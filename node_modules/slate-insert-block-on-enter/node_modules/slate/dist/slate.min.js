(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.Slate=f()}})(function(){var define,module,exports;return function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s}({1:[function(require,module,exports){"use strict";var copy=require("es5-ext/object/copy"),normalizeOptions=require("es5-ext/object/normalize-options"),ensureCallable=require("es5-ext/object/valid-callable"),map=require("es5-ext/object/map"),callable=require("es5-ext/object/valid-callable"),validValue=require("es5-ext/object/valid-value"),bind=Function.prototype.bind,defineProperty=Object.defineProperty,hasOwnProperty=Object.prototype.hasOwnProperty,define;define=function(name,desc,options){var value=validValue(desc)&&callable(desc.value),dgs;dgs=copy(desc);delete dgs.writable;delete dgs.value;dgs.get=function(){if(!options.overwriteDefinition&&hasOwnProperty.call(this,name))return value;desc.value=bind.call(value,options.resolveContext?options.resolveContext(this):this);defineProperty(this,name,desc);return this[name]};return dgs};module.exports=function(props){var options=normalizeOptions(arguments[1]);if(options.resolveContext!=null)ensureCallable(options.resolveContext);return map(props,function(desc,name){return define(name,desc,options)})}},{"es5-ext/object/copy":18,"es5-ext/object/map":26,"es5-ext/object/normalize-options":27,"es5-ext/object/valid-callable":32,"es5-ext/object/valid-value":33}],2:[function(require,module,exports){"use strict";var assign=require("es5-ext/object/assign"),normalizeOpts=require("es5-ext/object/normalize-options"),isCallable=require("es5-ext/object/is-callable"),contains=require("es5-ext/string/#/contains"),d;d=module.exports=function(dscr,value){var c,e,w,options,desc;if(arguments.length<2||typeof dscr!=="string"){options=value;value=dscr;dscr=null}else{options=arguments[2]}if(dscr==null){c=w=true;e=false}else{c=contains.call(dscr,"c");e=contains.call(dscr,"e");w=contains.call(dscr,"w")}desc={value:value,configurable:c,enumerable:e,writable:w};return!options?desc:assign(normalizeOpts(options),desc)};d.gs=function(dscr,get,set){var c,e,options,desc;if(typeof dscr!=="string"){options=set;set=get;get=dscr;dscr=null}else{options=arguments[3]}if(get==null){get=undefined}else if(!isCallable(get)){options=get;get=set=undefined}else if(set==null){set=undefined}else if(!isCallable(set)){options=set;set=undefined}if(dscr==null){c=true;e=false}else{c=contains.call(dscr,"c");e=contains.call(dscr,"e")}desc={get:get,set:set,configurable:c,enumerable:e};return!options?desc:assign(normalizeOpts(options),desc)}},{"es5-ext/object/assign":15,"es5-ext/object/is-callable":21,"es5-ext/object/normalize-options":27,"es5-ext/string/#/contains":34}],3:[function(require,module,exports){(function(process){exports=module.exports=require("./debug");exports.log=log;exports.formatArgs=formatArgs;exports.save=save;exports.load=load;exports.useColors=useColors;exports.storage="undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage?chrome.storage.local:localstorage();exports.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"];function useColors(){if(typeof window!=="undefined"&&window&&typeof window.process!=="undefined"&&window.process.type==="renderer"){return true}return typeof document!=="undefined"&&document&&"WebkitAppearance"in document.documentElement.style||typeof window!=="undefined"&&window&&window.console&&(console.firebug||console.exception&&console.table)||typeof navigator!=="undefined"&&navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator!=="undefined"&&navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}exports.formatters.j=function(v){try{return JSON.stringify(v)}catch(err){return"[UnexpectedJSONParseError]: "+err.message}};function formatArgs(args){var useColors=this.useColors;args[0]=(useColors?"%c":"")+this.namespace+(useColors?" %c":" ")+args[0]+(useColors?"%c ":" ")+"+"+exports.humanize(this.diff);if(!useColors)return;var c="color: "+this.color;args.splice(1,0,c,"color: inherit");var index=0;var lastC=0;args[0].replace(/%[a-zA-Z%]/g,function(match){if("%%"===match)return;index++;if("%c"===match){lastC=index}});args.splice(lastC,0,c)}function log(){return"object"===typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function save(namespaces){try{if(null==namespaces){exports.storage.removeItem("debug")}else{exports.storage.debug=namespaces}}catch(e){}}function load(){var r;try{r=exports.storage.debug}catch(e){}if(!r&&typeof process!=="undefined"&&"env"in process){r=process.env.DEBUG}return r}exports.enable(load());function localstorage(){try{return window.localStorage}catch(e){}}}).call(this,require("_process"))},{"./debug":4,_process:209}],4:[function(require,module,exports){exports=module.exports=createDebug.debug=createDebug["default"]=createDebug;exports.coerce=coerce;exports.disable=disable;exports.enable=enable;exports.enabled=enabled;exports.humanize=require("ms");exports.names=[];exports.skips=[];exports.formatters={};var prevTime;function selectColor(namespace){var hash=0,i;for(i in namespace){hash=(hash<<5)-hash+namespace.charCodeAt(i);hash|=0}return exports.colors[Math.abs(hash)%exports.colors.length]}function createDebug(namespace){function debug(){if(!debug.enabled)return;var self=debug;var curr=+new Date;var ms=curr-(prevTime||curr);self.diff=ms;self.prev=prevTime;self.curr=curr;prevTime=curr;var args=new Array(arguments.length);for(var i=0;i<args.length;i++){args[i]=arguments[i]}args[0]=exports.coerce(args[0]);if("string"!==typeof args[0]){args.unshift("%O")}var index=0;args[0]=args[0].replace(/%([a-zA-Z%])/g,function(match,format){if(match==="%%")return match;index++;var formatter=exports.formatters[format];if("function"===typeof formatter){var val=args[index];match=formatter.call(self,val);args.splice(index,1);index--}return match});exports.formatArgs.call(self,args);var logFn=debug.log||exports.log||console.log.bind(console);logFn.apply(self,args)}debug.namespace=namespace;debug.enabled=exports.enabled(namespace);debug.useColors=exports.useColors();debug.color=selectColor(namespace);if("function"===typeof exports.init){exports.init(debug)}return debug}function enable(namespaces){exports.save(namespaces);exports.names=[];exports.skips=[];var split=(typeof namespaces==="string"?namespaces:"").split(/[\s,]+/);var len=split.length;for(var i=0;i<len;i++){if(!split[i])continue;namespaces=split[i].replace(/\*/g,".*?");if(namespaces[0]==="-"){exports.skips.push(new RegExp("^"+namespaces.substr(1)+"$"))}else{exports.names.push(new RegExp("^"+namespaces+"$"))}}}function disable(){exports.enable("")}function enabled(name){var i,len;for(i=0,len=exports.skips.length;i<len;i++){if(exports.skips[i].test(name)){return false}}for(i=0,len=exports.names.length;i<len;i++){if(exports.names[i].test(name)){return true}}return false}function coerce(val){if(val instanceof Error)return val.stack||val.message;return val}},{ms:208}],5:[function(require,module,exports){"use strict";var GROUP_LEFT_TO_RIGHT,GROUP_RIGHT_TO_LEFT,EXPRESSION_LEFT_TO_RIGHT,EXPRESSION_RIGHT_TO_LEFT;GROUP_LEFT_TO_RIGHT="A-Za-zÀ-ÖØ-ö"+"ø-ʸ̀-֐ࠀ-῿‎Ⰰ-﬜"+"︀-﹯﻽-￿";GROUP_RIGHT_TO_LEFT="֑-߿יִ-﷽ﹰ-ﻼ";EXPRESSION_LEFT_TO_RIGHT=new RegExp("^[^"+GROUP_RIGHT_TO_LEFT+"]*["+GROUP_LEFT_TO_RIGHT+"]");EXPRESSION_RIGHT_TO_LEFT=new RegExp("^[^"+GROUP_LEFT_TO_RIGHT+"]*["+GROUP_RIGHT_TO_LEFT+"]");function direction(value){value=value.toString();if(EXPRESSION_RIGHT_TO_LEFT.test(value)){return"rtl"}if(EXPRESSION_LEFT_TO_RIGHT.test(value)){return"ltr"}return"neutral"}module.exports=direction},{}],6:[function(require,module,exports){"use strict";var value=require("../../object/valid-value");module.exports=function(){value(this).length=0;return this}},{"../../object/valid-value":33}],7:[function(require,module,exports){"use strict";var toPosInt=require("../../number/to-pos-integer"),value=require("../../object/valid-value"),indexOf=Array.prototype.indexOf,hasOwnProperty=Object.prototype.hasOwnProperty,abs=Math.abs,floor=Math.floor;module.exports=function(searchElement){var i,l,fromIndex,val;if(searchElement===searchElement){return indexOf.apply(this,arguments)}l=toPosInt(value(this).length);fromIndex=arguments[1];if(isNaN(fromIndex))fromIndex=0;else if(fromIndex>=0)fromIndex=floor(fromIndex);else fromIndex=toPosInt(this.length)-floor(abs(fromIndex));for(i=fromIndex;i<l;++i){if(hasOwnProperty.call(this,i)){val=this[i];if(val!==val)return i}}return-1}},{"../../number/to-pos-integer":13,"../../object/valid-value":33}],8:[function(require,module,exports){"use strict";var toString=Object.prototype.toString,id=toString.call(function(){return arguments}());module.exports=function(x){return toString.call(x)===id}},{}],9:[function(require,module,exports){"use strict";module.exports=require("./is-implemented")()?Math.sign:require("./shim")},{"./is-implemented":10,"./shim":11}],10:[function(require,module,exports){"use strict";module.exports=function(){var sign=Math.sign;if(typeof sign!=="function")return false;return sign(10)===1&&sign(-20)===-1}},{}],11:[function(require,module,exports){"use strict";module.exports=function(value){value=Number(value);if(isNaN(value)||value===0)return value;return value>0?1:-1}},{}],12:[function(require,module,exports){"use strict";var sign=require("../math/sign"),abs=Math.abs,floor=Math.floor;module.exports=function(value){if(isNaN(value))return 0;value=Number(value);if(value===0||!isFinite(value))return value;return sign(value)*floor(abs(value))}},{"../math/sign":9}],13:[function(require,module,exports){"use strict";var toInteger=require("./to-integer"),max=Math.max;module.exports=function(value){return max(0,toInteger(value))}},{"./to-integer":12}],14:[function(require,module,exports){"use strict";var callable=require("./valid-callable"),value=require("./valid-value"),bind=Function.prototype.bind,call=Function.prototype.call,keys=Object.keys,propertyIsEnumerable=Object.prototype.propertyIsEnumerable;module.exports=function(method,defVal){return function(obj,cb){var list,thisArg=arguments[2],compareFn=arguments[3];obj=Object(value(obj));callable(cb);list=keys(obj);if(compareFn){list.sort(typeof compareFn==="function"?bind.call(compareFn,obj):undefined)}if(typeof method!=="function")method=list[method];return call.call(method,list,function(key,index){if(!propertyIsEnumerable.call(obj,key))return defVal;return call.call(cb,thisArg,obj[key],key,obj,index)})}}},{"./valid-callable":32,"./valid-value":33}],15:[function(require,module,exports){"use strict";module.exports=require("./is-implemented")()?Object.assign:require("./shim")},{"./is-implemented":16,"./shim":17}],16:[function(require,module,exports){"use strict";module.exports=function(){var assign=Object.assign,obj;if(typeof assign!=="function")return false;obj={foo:"raz"};assign(obj,{bar:"dwa"},{trzy:"trzy"});return obj.foo+obj.bar+obj.trzy==="razdwatrzy"}},{}],17:[function(require,module,exports){"use strict";var keys=require("../keys"),value=require("../valid-value"),max=Math.max;module.exports=function(dest,src){var error,i,l=max(arguments.length,2),assign;dest=Object(value(dest));assign=function(key){try{dest[key]=src[key]}catch(e){if(!error)error=e}};for(i=1;i<l;++i){src=arguments[i];keys(src).forEach(assign)}if(error!==undefined)throw error;return dest}},{"../keys":23,"../valid-value":33}],18:[function(require,module,exports){"use strict";var assign=require("./assign"),value=require("./valid-value");module.exports=function(obj){var copy=Object(value(obj));if(copy!==obj)return copy;return assign({},obj)}},{"./assign":15,"./valid-value":33}],19:[function(require,module,exports){"use strict";var create=Object.create,shim;if(!require("./set-prototype-of/is-implemented")()){shim=require("./set-prototype-of/shim")}module.exports=function(){var nullObject,props,desc;if(!shim)return create;if(shim.level!==1)return create;nullObject={};props={};desc={configurable:false,enumerable:false,writable:true,value:undefined};Object.getOwnPropertyNames(Object.prototype).forEach(function(name){if(name==="__proto__"){props[name]={configurable:true,enumerable:false,writable:true,value:undefined};return}props[name]=desc});Object.defineProperties(nullObject,props);Object.defineProperty(shim,"nullPolyfill",{configurable:false,enumerable:false,writable:false,value:nullObject});return function(prototype,props){return create(prototype===null?nullObject:prototype,props)}}()},{"./set-prototype-of/is-implemented":30,"./set-prototype-of/shim":31}],20:[function(require,module,exports){"use strict";module.exports=require("./_iterate")("forEach")},{"./_iterate":14}],21:[function(require,module,exports){"use strict";module.exports=function(obj){return typeof obj==="function"}},{}],22:[function(require,module,exports){"use strict";var map={function:true,object:true};module.exports=function(x){return x!=null&&map[typeof x]||false}},{}],23:[function(require,module,exports){"use strict";module.exports=require("./is-implemented")()?Object.keys:require("./shim")},{"./is-implemented":24,"./shim":25}],24:[function(require,module,exports){"use strict";module.exports=function(){try{Object.keys("primitive");return true}catch(e){return false}}},{}],25:[function(require,module,exports){"use strict";var keys=Object.keys;module.exports=function(object){return keys(object==null?object:Object(object))}},{}],26:[function(require,module,exports){"use strict";var callable=require("./valid-callable"),forEach=require("./for-each"),call=Function.prototype.call;module.exports=function(obj,cb){var o={},thisArg=arguments[2];callable(cb);forEach(obj,function(value,key,obj,index){o[key]=call.call(cb,thisArg,value,key,obj,index)});return o}},{"./for-each":20,"./valid-callable":32}],27:[function(require,module,exports){"use strict";var forEach=Array.prototype.forEach,create=Object.create;var process=function(src,obj){var key;for(key in src)obj[key]=src[key]};module.exports=function(options){var result=create(null);forEach.call(arguments,function(options){if(options==null)return;process(Object(options),result)});return result}},{}],28:[function(require,module,exports){"use strict";var forEach=Array.prototype.forEach,create=Object.create;module.exports=function(arg){var set=create(null);forEach.call(arguments,function(name){set[name]=true});return set}},{}],29:[function(require,module,exports){"use strict";module.exports=require("./is-implemented")()?Object.setPrototypeOf:require("./shim")},{"./is-implemented":30,"./shim":31}],30:[function(require,module,exports){"use strict";var create=Object.create,getPrototypeOf=Object.getPrototypeOf,x={};module.exports=function(){var setPrototypeOf=Object.setPrototypeOf,customCreate=arguments[0]||create;if(typeof setPrototypeOf!=="function")return false;return getPrototypeOf(setPrototypeOf(customCreate(null),x))===x}},{}],31:[function(require,module,exports){"use strict";var isObject=require("../is-object"),value=require("../valid-value"),isPrototypeOf=Object.prototype.isPrototypeOf,defineProperty=Object.defineProperty,nullDesc={configurable:true,enumerable:false,writable:true,value:undefined},validate;validate=function(obj,prototype){value(obj);if(prototype===null||isObject(prototype))return obj;throw new TypeError("Prototype must be null or an object")};module.exports=function(status){var fn,set;if(!status)return null;if(status.level===2){if(status.set){set=status.set;fn=function(obj,prototype){set.call(validate(obj,prototype),prototype);return obj}}else{fn=function(obj,prototype){validate(obj,prototype).__proto__=prototype;return obj}}}else{fn=function self(obj,prototype){var isNullBase;validate(obj,prototype);isNullBase=isPrototypeOf.call(self.nullPolyfill,obj);if(isNullBase)delete self.nullPolyfill.__proto__;if(prototype===null)prototype=self.nullPolyfill;obj.__proto__=prototype;if(isNullBase)defineProperty(self.nullPolyfill,"__proto__",nullDesc);return obj}}return Object.defineProperty(fn,"level",{configurable:false,enumerable:false,writable:false,value:status.level})}(function(){var x=Object.create(null),y={},set,desc=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__");if(desc){try{set=desc.set;set.call(x,y)}catch(ignore){}if(Object.getPrototypeOf(x)===y)return{set:set,level:2}}x.__proto__=y;if(Object.getPrototypeOf(x)===y)return{level:2};x={};x.__proto__=y;if(Object.getPrototypeOf(x)===y)return{level:1};return false}());require("../create")},{"../create":19,"../is-object":22,"../valid-value":33}],32:[function(require,module,exports){"use strict";module.exports=function(fn){if(typeof fn!=="function")throw new TypeError(fn+" is not a function");return fn}},{}],33:[function(require,module,exports){"use strict";module.exports=function(value){if(value==null)throw new TypeError("Cannot use null or undefined");return value}},{}],34:[function(require,module,exports){"use strict";module.exports=require("./is-implemented")()?String.prototype.contains:require("./shim")},{"./is-implemented":35,"./shim":36}],35:[function(require,module,exports){"use strict";var str="razdwatrzy";module.exports=function(){if(typeof str.contains!=="function")return false;return str.contains("dwa")===true&&str.contains("foo")===false}},{}],36:[function(require,module,exports){"use strict";var indexOf=String.prototype.indexOf;module.exports=function(searchString){return indexOf.call(this,searchString,arguments[1])>-1}},{}],37:[function(require,module,exports){"use strict";var toString=Object.prototype.toString,id=toString.call("");module.exports=function(x){return typeof x==="string"||x&&typeof x==="object"&&(x instanceof String||toString.call(x)===id)||false}},{}],38:[function(require,module,exports){"use strict";var setPrototypeOf=require("es5-ext/object/set-prototype-of"),contains=require("es5-ext/string/#/contains"),d=require("d"),Iterator=require("./"),defineProperty=Object.defineProperty,ArrayIterator;ArrayIterator=module.exports=function(arr,kind){if(!(this instanceof ArrayIterator))return new ArrayIterator(arr,kind);Iterator.call(this,arr);if(!kind)kind="value";else if(contains.call(kind,"key+value"))kind="key+value";else if(contains.call(kind,"key"))kind="key";else kind="value";defineProperty(this,"__kind__",d("",kind))};if(setPrototypeOf)setPrototypeOf(ArrayIterator,Iterator);ArrayIterator.prototype=Object.create(Iterator.prototype,{constructor:d(ArrayIterator),_resolve:d(function(i){if(this.__kind__==="value")return this.__list__[i];if(this.__kind__==="key+value")return[i,this.__list__[i]];return i}),toString:d(function(){return"[object Array Iterator]"})})},{"./":41,d:2,"es5-ext/object/set-prototype-of":29,"es5-ext/string/#/contains":34}],39:[function(require,module,exports){"use strict";var isArguments=require("es5-ext/function/is-arguments"),callable=require("es5-ext/object/valid-callable"),isString=require("es5-ext/string/is-string"),get=require("./get"),isArray=Array.isArray,call=Function.prototype.call,some=Array.prototype.some;module.exports=function(iterable,cb){var mode,thisArg=arguments[2],result,doBreak,broken,i,l,char,code;if(isArray(iterable)||isArguments(iterable))mode="array";else if(isString(iterable))mode="string";else iterable=get(iterable);callable(cb);doBreak=function(){broken=true};if(mode==="array"){some.call(iterable,function(value){call.call(cb,thisArg,value,doBreak);if(broken)return true});return}if(mode==="string"){l=iterable.length;for(i=0;i<l;++i){char=iterable[i];if(i+1<l){code=char.charCodeAt(0);if(code>=55296&&code<=56319)char+=iterable[++i]}call.call(cb,thisArg,char,doBreak);if(broken)break}return}result=iterable.next();while(!result.done){call.call(cb,thisArg,result.value,doBreak);if(broken)return;result=iterable.next()}}},{"./get":40,"es5-ext/function/is-arguments":8,"es5-ext/object/valid-callable":32,"es5-ext/string/is-string":37}],40:[function(require,module,exports){"use strict";var isArguments=require("es5-ext/function/is-arguments"),isString=require("es5-ext/string/is-string"),ArrayIterator=require("./array"),StringIterator=require("./string"),iterable=require("./valid-iterable"),iteratorSymbol=require("es6-symbol").iterator;module.exports=function(obj){if(typeof iterable(obj)[iteratorSymbol]==="function")return obj[iteratorSymbol]();if(isArguments(obj))return new ArrayIterator(obj);if(isString(obj))return new StringIterator(obj);return new ArrayIterator(obj)}},{"./array":38,"./string":43,"./valid-iterable":44,"es5-ext/function/is-arguments":8,"es5-ext/string/is-string":37,"es6-symbol":51}],41:[function(require,module,exports){"use strict";var clear=require("es5-ext/array/#/clear"),assign=require("es5-ext/object/assign"),callable=require("es5-ext/object/valid-callable"),value=require("es5-ext/object/valid-value"),d=require("d"),autoBind=require("d/auto-bind"),Symbol=require("es6-symbol"),defineProperty=Object.defineProperty,defineProperties=Object.defineProperties,Iterator;module.exports=Iterator=function(list,context){if(!(this instanceof Iterator))return new Iterator(list,context);defineProperties(this,{__list__:d("w",value(list)),__context__:d("w",context),__nextIndex__:d("w",0)});if(!context)return;callable(context.on);context.on("_add",this._onAdd);context.on("_delete",this._onDelete);context.on("_clear",this._onClear)};defineProperties(Iterator.prototype,assign({constructor:d(Iterator),_next:d(function(){var i;if(!this.__list__)return;if(this.__redo__){i=this.__redo__.shift();if(i!==undefined)return i}if(this.__nextIndex__<this.__list__.length)return this.__nextIndex__++;this._unBind()}),next:d(function(){return this._createResult(this._next())}),_createResult:d(function(i){if(i===undefined)return{done:true,value:undefined};return{done:false,value:this._resolve(i)}}),_resolve:d(function(i){return this.__list__[i]}),_unBind:d(function(){this.__list__=null;delete this.__redo__;if(!this.__context__)return;this.__context__.off("_add",this._onAdd);this.__context__.off("_delete",this._onDelete);this.__context__.off("_clear",this._onClear);this.__context__=null}),toString:d(function(){return"[object Iterator]"})},autoBind({_onAdd:d(function(index){if(index>=this.__nextIndex__)return;++this.__nextIndex__;if(!this.__redo__){defineProperty(this,"__redo__",d("c",[index]));return}this.__redo__.forEach(function(redo,i){if(redo>=index)this.__redo__[i]=++redo},this);this.__redo__.push(index)}),_onDelete:d(function(index){var i;if(index>=this.__nextIndex__)return;--this.__nextIndex__;if(!this.__redo__)return;i=this.__redo__.indexOf(index);if(i!==-1)this.__redo__.splice(i,1);this.__redo__.forEach(function(redo,i){if(redo>index)this.__redo__[i]=--redo},this)}),_onClear:d(function(){if(this.__redo__)clear.call(this.__redo__);this.__nextIndex__=0})})));defineProperty(Iterator.prototype,Symbol.iterator,d(function(){return this}));defineProperty(Iterator.prototype,Symbol.toStringTag,d("","Iterator"))},{d:2,"d/auto-bind":1,"es5-ext/array/#/clear":6,"es5-ext/object/assign":15,"es5-ext/object/valid-callable":32,"es5-ext/object/valid-value":33,"es6-symbol":51}],42:[function(require,module,exports){"use strict";var isArguments=require("es5-ext/function/is-arguments"),isString=require("es5-ext/string/is-string"),iteratorSymbol=require("es6-symbol").iterator,isArray=Array.isArray;module.exports=function(value){if(value==null)return false;if(isArray(value))return true;if(isString(value))return true;if(isArguments(value))return true;return typeof value[iteratorSymbol]==="function"}},{"es5-ext/function/is-arguments":8,"es5-ext/string/is-string":37,"es6-symbol":51}],43:[function(require,module,exports){"use strict";var setPrototypeOf=require("es5-ext/object/set-prototype-of"),d=require("d"),Iterator=require("./"),defineProperty=Object.defineProperty,StringIterator;StringIterator=module.exports=function(str){if(!(this instanceof StringIterator))return new StringIterator(str);str=String(str);Iterator.call(this,str);defineProperty(this,"__length__",d("",str.length))};if(setPrototypeOf)setPrototypeOf(StringIterator,Iterator);StringIterator.prototype=Object.create(Iterator.prototype,{constructor:d(StringIterator),_next:d(function(){if(!this.__list__)return;if(this.__nextIndex__<this.__length__)return this.__nextIndex__++;this._unBind()}),_resolve:d(function(i){var char=this.__list__[i],code;if(this.__nextIndex__===this.__length__)return char;code=char.charCodeAt(0);if(code>=55296&&code<=56319)return char+this.__list__[this.__nextIndex__++];return char}),toString:d(function(){return"[object String Iterator]"})})},{"./":41,d:2,"es5-ext/object/set-prototype-of":29}],44:[function(require,module,exports){"use strict";var isIterable=require("./is-iterable");module.exports=function(value){if(!isIterable(value))throw new TypeError(value+" is not iterable");return value}},{"./is-iterable":42}],45:[function(require,module,exports){"use strict";module.exports=require("./is-implemented")()?Map:require("./polyfill")},{"./is-implemented":46,"./polyfill":50}],46:[function(require,module,exports){"use strict";module.exports=function(){var map,iterator,result;if(typeof Map!=="function")return false;try{map=new Map([["raz","one"],["dwa","two"],["trzy","three"]])}catch(e){return false}if(String(map)!=="[object Map]")return false;if(map.size!==3)return false;if(typeof map.clear!=="function")return false;if(typeof map.delete!=="function")return false;if(typeof map.entries!=="function")return false;if(typeof map.forEach!=="function")return false;if(typeof map.get!=="function")return false;if(typeof map.has!=="function")return false;if(typeof map.keys!=="function")return false;if(typeof map.set!=="function")return false;if(typeof map.values!=="function")return false;iterator=map.entries();result=iterator.next();if(result.done!==false)return false;if(!result.value)return false;if(result.value[0]!=="raz")return false;if(result.value[1]!=="one")return false;return true}},{}],47:[function(require,module,exports){"use strict";module.exports=function(){if(typeof Map==="undefined")return false;return Object.prototype.toString.call(new Map)==="[object Map]"}()},{}],48:[function(require,module,exports){"use strict";module.exports=require("es5-ext/object/primitive-set")("key","value","key+value")},{"es5-ext/object/primitive-set":28}],49:[function(require,module,exports){"use strict";var setPrototypeOf=require("es5-ext/object/set-prototype-of"),d=require("d"),Iterator=require("es6-iterator"),toStringTagSymbol=require("es6-symbol").toStringTag,kinds=require("./iterator-kinds"),defineProperties=Object.defineProperties,unBind=Iterator.prototype._unBind,MapIterator;MapIterator=module.exports=function(map,kind){if(!(this instanceof MapIterator))return new MapIterator(map,kind);Iterator.call(this,map.__mapKeysData__,map);if(!kind||!kinds[kind])kind="key+value";defineProperties(this,{__kind__:d("",kind),__values__:d("w",map.__mapValuesData__)})};if(setPrototypeOf)setPrototypeOf(MapIterator,Iterator);MapIterator.prototype=Object.create(Iterator.prototype,{constructor:d(MapIterator),_resolve:d(function(i){if(this.__kind__==="value")return this.__values__[i];if(this.__kind__==="key")return this.__list__[i];return[this.__list__[i],this.__values__[i]]}),_unBind:d(function(){this.__values__=null;unBind.call(this)}),toString:d(function(){return"[object Map Iterator]"})});Object.defineProperty(MapIterator.prototype,toStringTagSymbol,d("c","Map Iterator"))},{"./iterator-kinds":48,d:2,"es5-ext/object/set-prototype-of":29,"es6-iterator":41,"es6-symbol":51}],50:[function(require,module,exports){"use strict";var clear=require("es5-ext/array/#/clear"),eIndexOf=require("es5-ext/array/#/e-index-of"),setPrototypeOf=require("es5-ext/object/set-prototype-of"),callable=require("es5-ext/object/valid-callable"),validValue=require("es5-ext/object/valid-value"),d=require("d"),ee=require("event-emitter"),Symbol=require("es6-symbol"),iterator=require("es6-iterator/valid-iterable"),forOf=require("es6-iterator/for-of"),Iterator=require("./lib/iterator"),isNative=require("./is-native-implemented"),call=Function.prototype.call,defineProperties=Object.defineProperties,getPrototypeOf=Object.getPrototypeOf,MapPoly;module.exports=MapPoly=function(){var iterable=arguments[0],keys,values,self;if(!(this instanceof MapPoly))throw new TypeError("Constructor requires 'new'");if(isNative&&setPrototypeOf&&Map!==MapPoly){self=setPrototypeOf(new Map,getPrototypeOf(this))}else{self=this}if(iterable!=null)iterator(iterable);defineProperties(self,{__mapKeysData__:d("c",keys=[]),__mapValuesData__:d("c",values=[])});if(!iterable)return self;forOf(iterable,function(value){var key=validValue(value)[0];value=value[1];if(eIndexOf.call(keys,key)!==-1)return;keys.push(key);values.push(value)},self);return self};if(isNative){if(setPrototypeOf)setPrototypeOf(MapPoly,Map);MapPoly.prototype=Object.create(Map.prototype,{constructor:d(MapPoly)})}ee(defineProperties(MapPoly.prototype,{clear:d(function(){if(!this.__mapKeysData__.length)return;clear.call(this.__mapKeysData__);clear.call(this.__mapValuesData__);this.emit("_clear")}),delete:d(function(key){var index=eIndexOf.call(this.__mapKeysData__,key);if(index===-1)return false;this.__mapKeysData__.splice(index,1);this.__mapValuesData__.splice(index,1);this.emit("_delete",index,key);return true}),entries:d(function(){return new Iterator(this,"key+value")}),forEach:d(function(cb){var thisArg=arguments[1],iterator,result;callable(cb);iterator=this.entries();result=iterator._next();while(result!==undefined){call.call(cb,thisArg,this.__mapValuesData__[result],this.__mapKeysData__[result],this);result=iterator._next()}}),get:d(function(key){var index=eIndexOf.call(this.__mapKeysData__,key);if(index===-1)return;return this.__mapValuesData__[index]}),has:d(function(key){return eIndexOf.call(this.__mapKeysData__,key)!==-1}),keys:d(function(){return new Iterator(this,"key")}),set:d(function(key,value){var index=eIndexOf.call(this.__mapKeysData__,key),emit;if(index===-1){index=this.__mapKeysData__.push(key)-1;emit=true}this.__mapValuesData__[index]=value;if(emit)this.emit("_add",index,key);return this}),size:d.gs(function(){return this.__mapKeysData__.length}),values:d(function(){return new Iterator(this,"value")}),toString:d(function(){return"[object Map]"})}));Object.defineProperty(MapPoly.prototype,Symbol.iterator,d(function(){return this.entries()}));Object.defineProperty(MapPoly.prototype,Symbol.toStringTag,d("c","Map"))},{"./is-native-implemented":47,"./lib/iterator":49,d:2,"es5-ext/array/#/clear":6,"es5-ext/array/#/e-index-of":7,"es5-ext/object/set-prototype-of":29,"es5-ext/object/valid-callable":32,"es5-ext/object/valid-value":33,"es6-iterator/for-of":39,"es6-iterator/valid-iterable":44,"es6-symbol":51,"event-emitter":57}],51:[function(require,module,exports){"use strict";module.exports=require("./is-implemented")()?Symbol:require("./polyfill")},{"./is-implemented":52,"./polyfill":54}],52:[function(require,module,exports){"use strict";var validTypes={object:true,symbol:true};module.exports=function(){var symbol;if(typeof Symbol!=="function")return false;symbol=Symbol("test symbol");try{String(symbol)}catch(e){return false}if(!validTypes[typeof Symbol.iterator])return false;if(!validTypes[typeof Symbol.toPrimitive])return false;if(!validTypes[typeof Symbol.toStringTag])return false;return true}},{}],53:[function(require,module,exports){"use strict";module.exports=function(x){if(!x)return false;if(typeof x==="symbol")return true
;if(!x.constructor)return false;if(x.constructor.name!=="Symbol")return false;return x[x.constructor.toStringTag]==="Symbol"}},{}],54:[function(require,module,exports){"use strict";var d=require("d"),validateSymbol=require("./validate-symbol"),create=Object.create,defineProperties=Object.defineProperties,defineProperty=Object.defineProperty,objPrototype=Object.prototype,NativeSymbol,SymbolPolyfill,HiddenSymbol,globalSymbols=create(null),isNativeSafe;if(typeof Symbol==="function"){NativeSymbol=Symbol;try{String(NativeSymbol());isNativeSafe=true}catch(ignore){}}var generateName=function(){var created=create(null);return function(desc){var postfix=0,name,ie11BugWorkaround;while(created[desc+(postfix||"")])++postfix;desc+=postfix||"";created[desc]=true;name="@@"+desc;defineProperty(objPrototype,name,d.gs(null,function(value){if(ie11BugWorkaround)return;ie11BugWorkaround=true;defineProperty(this,name,d(value));ie11BugWorkaround=false}));return name}}();HiddenSymbol=function Symbol(description){if(this instanceof HiddenSymbol)throw new TypeError("Symbol is not a constructor");return SymbolPolyfill(description)};module.exports=SymbolPolyfill=function Symbol(description){var symbol;if(this instanceof Symbol)throw new TypeError("Symbol is not a constructor");if(isNativeSafe)return NativeSymbol(description);symbol=create(HiddenSymbol.prototype);description=description===undefined?"":String(description);return defineProperties(symbol,{__description__:d("",description),__name__:d("",generateName(description))})};defineProperties(SymbolPolyfill,{for:d(function(key){if(globalSymbols[key])return globalSymbols[key];return globalSymbols[key]=SymbolPolyfill(String(key))}),keyFor:d(function(s){var key;validateSymbol(s);for(key in globalSymbols)if(globalSymbols[key]===s)return key}),hasInstance:d("",NativeSymbol&&NativeSymbol.hasInstance||SymbolPolyfill("hasInstance")),isConcatSpreadable:d("",NativeSymbol&&NativeSymbol.isConcatSpreadable||SymbolPolyfill("isConcatSpreadable")),iterator:d("",NativeSymbol&&NativeSymbol.iterator||SymbolPolyfill("iterator")),match:d("",NativeSymbol&&NativeSymbol.match||SymbolPolyfill("match")),replace:d("",NativeSymbol&&NativeSymbol.replace||SymbolPolyfill("replace")),search:d("",NativeSymbol&&NativeSymbol.search||SymbolPolyfill("search")),species:d("",NativeSymbol&&NativeSymbol.species||SymbolPolyfill("species")),split:d("",NativeSymbol&&NativeSymbol.split||SymbolPolyfill("split")),toPrimitive:d("",NativeSymbol&&NativeSymbol.toPrimitive||SymbolPolyfill("toPrimitive")),toStringTag:d("",NativeSymbol&&NativeSymbol.toStringTag||SymbolPolyfill("toStringTag")),unscopables:d("",NativeSymbol&&NativeSymbol.unscopables||SymbolPolyfill("unscopables"))});defineProperties(HiddenSymbol.prototype,{constructor:d(SymbolPolyfill),toString:d("",function(){return this.__name__})});defineProperties(SymbolPolyfill.prototype,{toString:d(function(){return"Symbol ("+validateSymbol(this).__description__+")"}),valueOf:d(function(){return validateSymbol(this)})});defineProperty(SymbolPolyfill.prototype,SymbolPolyfill.toPrimitive,d("",function(){var symbol=validateSymbol(this);if(typeof symbol==="symbol")return symbol;return symbol.toString()}));defineProperty(SymbolPolyfill.prototype,SymbolPolyfill.toStringTag,d("c","Symbol"));defineProperty(HiddenSymbol.prototype,SymbolPolyfill.toStringTag,d("c",SymbolPolyfill.prototype[SymbolPolyfill.toStringTag]));defineProperty(HiddenSymbol.prototype,SymbolPolyfill.toPrimitive,d("c",SymbolPolyfill.prototype[SymbolPolyfill.toPrimitive]))},{"./validate-symbol":55,d:2}],55:[function(require,module,exports){"use strict";var isSymbol=require("./is-symbol");module.exports=function(value){if(!isSymbol(value))throw new TypeError(value+" is not a symbol");return value}},{"./is-symbol":53}],56:[function(require,module,exports){(function(global){(function(root){var freeExports=typeof exports=="object"&&exports;var freeModule=typeof module=="object"&&module&&module.exports==freeExports&&module;var freeGlobal=typeof global=="object"&&global;if(freeGlobal.global===freeGlobal||freeGlobal.window===freeGlobal){root=freeGlobal}var regexSymbolWithCombiningMarks=/([\0-\u02FF\u0370-\u1AAF\u1B00-\u1DBF\u1E00-\u20CF\u2100-\uD7FF\uE000-\uFE1F\uFE30-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])([\u0300-\u036F\u1AB0-\u1AFF\u1DC0-\u1DFF\u20D0-\u20FF\uFE20-\uFE2F]+)/g;var regexSurrogatePair=/([\uD800-\uDBFF])([\uDC00-\uDFFF])/g;var reverse=function(string){string=string.replace(regexSymbolWithCombiningMarks,function($0,$1,$2){return reverse($2)+$1}).replace(regexSurrogatePair,"$2$1");var result="";var index=string.length;while(index--){result+=string.charAt(index)}return result};var esrever={version:"0.2.0",reverse:reverse};if(typeof define=="function"&&typeof define.amd=="object"&&define.amd){define(function(){return esrever})}else if(freeExports&&!freeExports.nodeType){if(freeModule){freeModule.exports=esrever}else{for(var key in esrever){esrever.hasOwnProperty(key)&&(freeExports[key]=esrever[key])}}}else{root.esrever=esrever}})(this)}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],57:[function(require,module,exports){"use strict";var d=require("d"),callable=require("es5-ext/object/valid-callable"),apply=Function.prototype.apply,call=Function.prototype.call,create=Object.create,defineProperty=Object.defineProperty,defineProperties=Object.defineProperties,hasOwnProperty=Object.prototype.hasOwnProperty,descriptor={configurable:true,enumerable:false,writable:true},on,once,off,emit,methods,descriptors,base;on=function(type,listener){var data;callable(listener);if(!hasOwnProperty.call(this,"__ee__")){data=descriptor.value=create(null);defineProperty(this,"__ee__",descriptor);descriptor.value=null}else{data=this.__ee__}if(!data[type])data[type]=listener;else if(typeof data[type]==="object")data[type].push(listener);else data[type]=[data[type],listener];return this};once=function(type,listener){var once,self;callable(listener);self=this;on.call(this,type,once=function(){off.call(self,type,once);apply.call(listener,this,arguments)});once.__eeOnceListener__=listener;return this};off=function(type,listener){var data,listeners,candidate,i;callable(listener);if(!hasOwnProperty.call(this,"__ee__"))return this;data=this.__ee__;if(!data[type])return this;listeners=data[type];if(typeof listeners==="object"){for(i=0;candidate=listeners[i];++i){if(candidate===listener||candidate.__eeOnceListener__===listener){if(listeners.length===2)data[type]=listeners[i?0:1];else listeners.splice(i,1)}}}else{if(listeners===listener||listeners.__eeOnceListener__===listener){delete data[type]}}return this};emit=function(type){var i,l,listener,listeners,args;if(!hasOwnProperty.call(this,"__ee__"))return;listeners=this.__ee__[type];if(!listeners)return;if(typeof listeners==="object"){l=arguments.length;args=new Array(l-1);for(i=1;i<l;++i)args[i-1]=arguments[i];listeners=listeners.slice();for(i=0;listener=listeners[i];++i){apply.call(listener,this,args)}}else{switch(arguments.length){case 1:call.call(listeners,this);break;case 2:call.call(listeners,this,arguments[1]);break;case 3:call.call(listeners,this,arguments[1],arguments[2]);break;default:l=arguments.length;args=new Array(l-1);for(i=1;i<l;++i){args[i-1]=arguments[i]}apply.call(listeners,this,args)}}};methods={on:on,once:once,off:off,emit:emit};descriptors={on:d(on),once:d(once),off:d(off),emit:d(emit)};base=defineProperties({},descriptors);module.exports=exports=function(o){return o==null?create(base):defineProperties(Object(o),descriptors)};exports.methods=methods},{d:2,"es5-ext/object/valid-callable":32}],58:[function(require,module,exports){"use strict";function makeEmptyFunction(arg){return function(){return arg}}var emptyFunction=function emptyFunction(){};emptyFunction.thatReturns=makeEmptyFunction;emptyFunction.thatReturnsFalse=makeEmptyFunction(false);emptyFunction.thatReturnsTrue=makeEmptyFunction(true);emptyFunction.thatReturnsNull=makeEmptyFunction(null);emptyFunction.thatReturnsThis=function(){return this};emptyFunction.thatReturnsArgument=function(arg){return arg};module.exports=emptyFunction},{}],59:[function(require,module,exports){"use strict";var validateFormat=function validateFormat(format){};if("production"!=="production"){validateFormat=function validateFormat(format){if(format===undefined){throw new Error("invariant requires an error message argument")}}}function invariant(condition,format,a,b,c,d,e,f){validateFormat(format);if(!condition){var error;if(format===undefined){error=new Error("Minified exception occurred; use the non-minified dev environment "+"for the full error message and additional helpful warnings.")}else{var args=[a,b,c,d,e,f];var argIndex=0;error=new Error(format.replace(/%s/g,function(){return args[argIndex++]}));error.name="Invariant Violation"}error.framesToPop=1;throw error}}module.exports=invariant},{}],60:[function(require,module,exports){"use strict";var emptyFunction=require("./emptyFunction");var warning=emptyFunction;if("production"!=="production"){(function(){var printWarning=function printWarning(format){for(var _len=arguments.length,args=Array(_len>1?_len-1:0),_key=1;_key<_len;_key++){args[_key-1]=arguments[_key]}var argIndex=0;var message="Warning: "+format.replace(/%s/g,function(){return args[argIndex++]});if(typeof console!=="undefined"){console.error(message)}try{throw new Error(message)}catch(x){}};warning=function warning(condition,format){if(format===undefined){throw new Error("`warning(condition, format, ...args)` requires a warning "+"message argument")}if(format.indexOf("Failed Composite propType: ")===0){return}if(!condition){for(var _len2=arguments.length,args=Array(_len2>2?_len2-2:0),_key2=2;_key2<_len2;_key2++){args[_key2-2]=arguments[_key2]}printWarning.apply(undefined,[format].concat(args))}}})()}module.exports=warning},{"./emptyFunction":58}],61:[function(require,module,exports){module.exports=getDocument;var DOCUMENT_NODE=9;function isDocument(d){return d&&d.nodeType===DOCUMENT_NODE}function getDocument(node){if(isDocument(node)){return node}else if(isDocument(node.ownerDocument)){return node.ownerDocument}else if(isDocument(node.document)){return node.document}else if(node.parentNode){return getDocument(node.parentNode)}else if(node.commonAncestorContainer){return getDocument(node.commonAncestorContainer)}else if(node.startContainer){return getDocument(node.startContainer)}else if(node.anchorNode){return getDocument(node.anchorNode)}}},{}],62:[function(require,module,exports){var getDocument=require("get-document");module.exports=getWindow;var needsIEFallback=require("./needs-ie-fallback");function isWindow(w){return w&&w.window===w}function getWindow(node){if(isWindow(node)){return node}var doc=getDocument(node);if(needsIEFallback){doc.parentWindow.execScript("document._parentWindow = window;","Javascript");var win=doc._parentWindow;doc._parentWindow=null;return win}else{return doc.defaultView||doc.parentWindow}}},{"./needs-ie-fallback":63,"get-document":61}],63:[function(require,module,exports){module.exports=!!document.attachEvent&&window!==document.parentWindow},{}],64:[function(require,module,exports){var has=Object.prototype.hasOwnProperty;var toString=Object.prototype.toString;function isEmpty(val){if(val==null)return true;if("boolean"==typeof val)return false;if("number"==typeof val)return val===0;if("string"==typeof val)return val.length===0;if("function"==typeof val)return val.length===0;if(Array.isArray(val))return val.length===0;if(val instanceof Error)return val.message==="";if(val.toString==toString){switch(val.toString()){case"[object File]":case"[object Map]":case"[object Set]":{return val.size===0}case"[object Object]":{for(var key in val){if(has.call(val,key))return false}return true}}}return false}module.exports=isEmpty},{}],65:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _typeof=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(obj){return typeof obj}:function(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj};var isBrowser=exports.isBrowser=(typeof window==="undefined"?"undefined":_typeof(window))==="object"&&(typeof document==="undefined"?"undefined":_typeof(document))==="object"&&document.nodeType===9;exports.default=isBrowser},{}],66:[function(require,module,exports){"use strict";var isObject=require("isobject");function isObjectObject(o){return isObject(o)===true&&Object.prototype.toString.call(o)==="[object Object]"}module.exports=function isPlainObject(o){var ctor,prot;if(isObjectObject(o)===false)return false;ctor=o.constructor;if(typeof ctor!=="function")return false;prot=ctor.prototype;if(isObjectObject(prot)===false)return false;if(prot.hasOwnProperty("isPrototypeOf")===false){return false}return true}},{isobject:67}],67:[function(require,module,exports){"use strict";module.exports=function isObject(val){return val!=null&&typeof val==="object"&&Array.isArray(val)===false}},{}],68:[function(require,module,exports){exports=module.exports=function(searchInput){if(searchInput&&"object"===typeof searchInput){var hasKeyCode=searchInput.which||searchInput.keyCode||searchInput.charCode;if(hasKeyCode)searchInput=hasKeyCode}if("number"===typeof searchInput)return names[searchInput];var search=String(searchInput);var foundNamedKey=codes[search.toLowerCase()];if(foundNamedKey)return foundNamedKey;var foundNamedKey=aliases[search.toLowerCase()];if(foundNamedKey)return foundNamedKey;if(search.length===1)return search.charCodeAt(0);return undefined};var codes=exports.code=exports.codes={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,"pause/break":19,"caps lock":20,esc:27,space:32,"page up":33,"page down":34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,delete:46,command:91,"left command":91,"right command":93,"numpad *":106,"numpad +":107,"numpad -":109,"numpad .":110,"numpad /":111,"num lock":144,"scroll lock":145,"my computer":182,"my calculator":183,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222};var aliases=exports.aliases={windows:91,"⇧":16,"⌥":18,"⌃":17,"⌘":91,ctl:17,control:17,option:18,pause:19,break:19,caps:20,return:13,escape:27,spc:32,pgup:33,pgdn:34,ins:45,del:46,cmd:91};for(i=97;i<123;i++)codes[String.fromCharCode(i)]=i-32;for(var i=48;i<58;i++)codes[i-48]=i;for(i=1;i<13;i++)codes["f"+i]=i+111;for(i=0;i<10;i++)codes["numpad "+i]=i+96;var names=exports.names=exports.title={};for(i in codes)names[codes[i]]=i;for(var alias in aliases){codes[alias]=aliases[alias]}},{}],69:[function(require,module,exports){var getNative=require("./_getNative"),root=require("./_root");var DataView=getNative(root,"DataView");module.exports=DataView},{"./_getNative":128,"./_root":165}],70:[function(require,module,exports){var hashClear=require("./_hashClear"),hashDelete=require("./_hashDelete"),hashGet=require("./_hashGet"),hashHas=require("./_hashHas"),hashSet=require("./_hashSet");function Hash(entries){var index=-1,length=entries==null?0:entries.length;this.clear();while(++index<length){var entry=entries[index];this.set(entry[0],entry[1])}}Hash.prototype.clear=hashClear;Hash.prototype["delete"]=hashDelete;Hash.prototype.get=hashGet;Hash.prototype.has=hashHas;Hash.prototype.set=hashSet;module.exports=Hash},{"./_hashClear":134,"./_hashDelete":135,"./_hashGet":136,"./_hashHas":137,"./_hashSet":138}],71:[function(require,module,exports){var listCacheClear=require("./_listCacheClear"),listCacheDelete=require("./_listCacheDelete"),listCacheGet=require("./_listCacheGet"),listCacheHas=require("./_listCacheHas"),listCacheSet=require("./_listCacheSet");function ListCache(entries){var index=-1,length=entries==null?0:entries.length;this.clear();while(++index<length){var entry=entries[index];this.set(entry[0],entry[1])}}ListCache.prototype.clear=listCacheClear;ListCache.prototype["delete"]=listCacheDelete;ListCache.prototype.get=listCacheGet;ListCache.prototype.has=listCacheHas;ListCache.prototype.set=listCacheSet;module.exports=ListCache},{"./_listCacheClear":146,"./_listCacheDelete":147,"./_listCacheGet":148,"./_listCacheHas":149,"./_listCacheSet":150}],72:[function(require,module,exports){var getNative=require("./_getNative"),root=require("./_root");var Map=getNative(root,"Map");module.exports=Map},{"./_getNative":128,"./_root":165}],73:[function(require,module,exports){var mapCacheClear=require("./_mapCacheClear"),mapCacheDelete=require("./_mapCacheDelete"),mapCacheGet=require("./_mapCacheGet"),mapCacheHas=require("./_mapCacheHas"),mapCacheSet=require("./_mapCacheSet");function MapCache(entries){var index=-1,length=entries==null?0:entries.length;this.clear();while(++index<length){var entry=entries[index];this.set(entry[0],entry[1])}}MapCache.prototype.clear=mapCacheClear;MapCache.prototype["delete"]=mapCacheDelete;MapCache.prototype.get=mapCacheGet;MapCache.prototype.has=mapCacheHas;MapCache.prototype.set=mapCacheSet;module.exports=MapCache},{"./_mapCacheClear":151,"./_mapCacheDelete":152,"./_mapCacheGet":153,"./_mapCacheHas":154,"./_mapCacheSet":155}],74:[function(require,module,exports){var getNative=require("./_getNative"),root=require("./_root");var Promise=getNative(root,"Promise");module.exports=Promise},{"./_getNative":128,"./_root":165}],75:[function(require,module,exports){var getNative=require("./_getNative"),root=require("./_root");var Set=getNative(root,"Set");module.exports=Set},{"./_getNative":128,"./_root":165}],76:[function(require,module,exports){var MapCache=require("./_MapCache"),setCacheAdd=require("./_setCacheAdd"),setCacheHas=require("./_setCacheHas");function SetCache(values){var index=-1,length=values==null?0:values.length;this.__data__=new MapCache;while(++index<length){this.add(values[index])}}SetCache.prototype.add=SetCache.prototype.push=setCacheAdd;SetCache.prototype.has=setCacheHas;module.exports=SetCache},{"./_MapCache":73,"./_setCacheAdd":166,"./_setCacheHas":167}],77:[function(require,module,exports){var ListCache=require("./_ListCache"),stackClear=require("./_stackClear"),stackDelete=require("./_stackDelete"),stackGet=require("./_stackGet"),stackHas=require("./_stackHas"),stackSet=require("./_stackSet");function Stack(entries){var data=this.__data__=new ListCache(entries);this.size=data.size}Stack.prototype.clear=stackClear;Stack.prototype["delete"]=stackDelete;Stack.prototype.get=stackGet;Stack.prototype.has=stackHas;Stack.prototype.set=stackSet;module.exports=Stack},{"./_ListCache":71,"./_stackClear":171,"./_stackDelete":172,"./_stackGet":173,"./_stackHas":174,"./_stackSet":175}],78:[function(require,module,exports){var root=require("./_root");var Symbol=root.Symbol;module.exports=Symbol},{"./_root":165}],79:[function(require,module,exports){var root=require("./_root");var Uint8Array=root.Uint8Array;module.exports=Uint8Array},{"./_root":165}],80:[function(require,module,exports){var getNative=require("./_getNative"),root=require("./_root");var WeakMap=getNative(root,"WeakMap");module.exports=WeakMap},{"./_getNative":128,"./_root":165}],81:[function(require,module,exports){function apply(func,thisArg,args){switch(args.length){case 0:return func.call(thisArg);case 1:return func.call(thisArg,args[0]);case 2:return func.call(thisArg,args[0],args[1]);case 3:return func.call(thisArg,args[0],args[1],args[2])}return func.apply(thisArg,args)}module.exports=apply},{}],82:[function(require,module,exports){function arrayFilter(array,predicate){var index=-1,length=array==null?0:array.length,resIndex=0,result=[];while(++index<length){var value=array[index];if(predicate(value,index,array)){result[resIndex++]=value}}return result}module.exports=arrayFilter},{}],83:[function(require,module,exports){var baseTimes=require("./_baseTimes"),isArguments=require("./isArguments"),isArray=require("./isArray"),isBuffer=require("./isBuffer"),isIndex=require("./_isIndex"),isTypedArray=require("./isTypedArray");var objectProto=Object.prototype;var hasOwnProperty=objectProto.hasOwnProperty;function arrayLikeKeys(value,inherited){var isArr=isArray(value),isArg=!isArr&&isArguments(value),isBuff=!isArr&&!isArg&&isBuffer(value),isType=!isArr&&!isArg&&!isBuff&&isTypedArray(value),skipIndexes=isArr||isArg||isBuff||isType,result=skipIndexes?baseTimes(value.length,String):[],length=result.length;for(var key in value){if((inherited||hasOwnProperty.call(value,key))&&!(skipIndexes&&(key=="length"||isBuff&&(key=="offset"||key=="parent")||isType&&(key=="buffer"||key=="byteLength"||key=="byteOffset")||isIndex(key,length)))){result.push(key)}}return result}module.exports=arrayLikeKeys},{"./_baseTimes":112,"./_isIndex":140,"./isArguments":187,"./isArray":188,"./isBuffer":190,"./isTypedArray":197}],84:[function(require,module,exports){function arrayMap(array,iteratee){var index=-1,length=array==null?0:array.length,result=Array(length);while(++index<length){result[index]=iteratee(array[index],index,array)}return result}module.exports=arrayMap},{}],85:[function(require,module,exports){function arrayPush(array,values){var index=-1,length=values.length,offset=array.length;while(++index<length){array[offset+index]=values[index]}return array}module.exports=arrayPush},{}],86:[function(require,module,exports){function arraySome(array,predicate){var index=-1,length=array==null?0:array.length;while(++index<length){if(predicate(array[index],index,array)){return true}}return false}module.exports=arraySome},{}],87:[function(require,module,exports){var baseAssignValue=require("./_baseAssignValue"),eq=require("./eq");var objectProto=Object.prototype;var hasOwnProperty=objectProto.hasOwnProperty;function assignValue(object,key,value){var objValue=object[key];if(!(hasOwnProperty.call(object,key)&&eq(objValue,value))||value===undefined&&!(key in object)){baseAssignValue(object,key,value)}}module.exports=assignValue},{"./_baseAssignValue":89,"./eq":180}],88:[function(require,module,exports){var eq=require("./eq");function assocIndexOf(array,key){var length=array.length;while(length--){if(eq(array[length][0],key)){return length}}return-1}module.exports=assocIndexOf},{"./eq":180}],89:[function(require,module,exports){var defineProperty=require("./_defineProperty");function baseAssignValue(object,key,value){if(key=="__proto__"&&defineProperty){defineProperty(object,key,{configurable:true,enumerable:true,value:value,writable:true})}else{object[key]=value}}module.exports=baseAssignValue},{"./_defineProperty":119}],90:[function(require,module,exports){function baseFindIndex(array,predicate,fromIndex,fromRight){var length=array.length,index=fromIndex+(fromRight?1:-1);while(fromRight?index--:++index<length){if(predicate(array[index],index,array)){return index}}return-1}module.exports=baseFindIndex},{}],91:[function(require,module,exports){var arrayPush=require("./_arrayPush"),isFlattenable=require("./_isFlattenable");function baseFlatten(array,depth,predicate,isStrict,result){var index=-1,length=array.length;predicate||(predicate=isFlattenable);result||(result=[]);while(++index<length){var value=array[index];if(depth>0&&predicate(value)){if(depth>1){baseFlatten(value,depth-1,predicate,isStrict,result)}else{arrayPush(result,value)}}else if(!isStrict){result[result.length]=value}}return result}module.exports=baseFlatten},{"./_arrayPush":85,"./_isFlattenable":139}],92:[function(require,module,exports){var castPath=require("./_castPath"),toKey=require("./_toKey");function baseGet(object,path){path=castPath(path,object);var index=0,length=path.length;while(object!=null&&index<length){object=object[toKey(path[index++])]}return index&&index==length?object:undefined}module.exports=baseGet},{"./_castPath":116,"./_toKey":177}],93:[function(require,module,exports){var arrayPush=require("./_arrayPush"),isArray=require("./isArray");function baseGetAllKeys(object,keysFunc,symbolsFunc){var result=keysFunc(object);return isArray(object)?result:arrayPush(result,symbolsFunc(object))}module.exports=baseGetAllKeys},{"./_arrayPush":85,"./isArray":188}],94:[function(require,module,exports){var Symbol=require("./_Symbol"),getRawTag=require("./_getRawTag"),objectToString=require("./_objectToString");var nullTag="[object Null]",undefinedTag="[object Undefined]";var symToStringTag=Symbol?Symbol.toStringTag:undefined;function baseGetTag(value){if(value==null){return value===undefined?undefinedTag:nullTag}return symToStringTag&&symToStringTag in Object(value)?getRawTag(value):objectToString(value)}module.exports=baseGetTag},{"./_Symbol":78,"./_getRawTag":129,"./_objectToString":162}],95:[function(require,module,exports){function baseHasIn(object,key){return object!=null&&key in Object(object)}module.exports=baseHasIn},{}],96:[function(require,module,exports){var baseGetTag=require("./_baseGetTag"),isObjectLike=require("./isObjectLike");var argsTag="[object Arguments]";function baseIsArguments(value){return isObjectLike(value)&&baseGetTag(value)==argsTag}module.exports=baseIsArguments},{"./_baseGetTag":94,"./isObjectLike":195}],97:[function(require,module,exports){var baseIsEqualDeep=require("./_baseIsEqualDeep"),isObjectLike=require("./isObjectLike");function baseIsEqual(value,other,bitmask,customizer,stack){if(value===other){return true}if(value==null||other==null||!isObjectLike(value)&&!isObjectLike(other)){return value!==value&&other!==other}return baseIsEqualDeep(value,other,bitmask,customizer,baseIsEqual,stack)}module.exports=baseIsEqual},{"./_baseIsEqualDeep":98,"./isObjectLike":195}],98:[function(require,module,exports){var Stack=require("./_Stack"),equalArrays=require("./_equalArrays"),equalByTag=require("./_equalByTag"),equalObjects=require("./_equalObjects"),getTag=require("./_getTag"),isArray=require("./isArray"),isBuffer=require("./isBuffer"),isTypedArray=require("./isTypedArray");var COMPARE_PARTIAL_FLAG=1;var argsTag="[object Arguments]",arrayTag="[object Array]",objectTag="[object Object]";var objectProto=Object.prototype;var hasOwnProperty=objectProto.hasOwnProperty;function baseIsEqualDeep(object,other,bitmask,customizer,equalFunc,stack){var objIsArr=isArray(object),othIsArr=isArray(other),objTag=objIsArr?arrayTag:getTag(object),othTag=othIsArr?arrayTag:getTag(other);objTag=objTag==argsTag?objectTag:objTag;othTag=othTag==argsTag?objectTag:othTag;var objIsObj=objTag==objectTag,othIsObj=othTag==objectTag,isSameTag=objTag==othTag;if(isSameTag&&isBuffer(object)){if(!isBuffer(other)){return false}objIsArr=true;objIsObj=false}if(isSameTag&&!objIsObj){stack||(stack=new Stack);return objIsArr||isTypedArray(object)?equalArrays(object,other,bitmask,customizer,equalFunc,stack):equalByTag(object,other,objTag,bitmask,customizer,equalFunc,stack)}if(!(bitmask&COMPARE_PARTIAL_FLAG)){var objIsWrapped=objIsObj&&hasOwnProperty.call(object,"__wrapped__"),othIsWrapped=othIsObj&&hasOwnProperty.call(other,"__wrapped__");if(objIsWrapped||othIsWrapped){var objUnwrapped=objIsWrapped?object.value():object,othUnwrapped=othIsWrapped?other.value():other;stack||(stack=new Stack);return equalFunc(objUnwrapped,othUnwrapped,bitmask,customizer,stack)}}if(!isSameTag){return false}stack||(stack=new Stack);return equalObjects(object,other,bitmask,customizer,equalFunc,stack)}module.exports=baseIsEqualDeep},{"./_Stack":77,"./_equalArrays":120,"./_equalByTag":121,"./_equalObjects":122,"./_getTag":131,"./isArray":188,"./isBuffer":190,"./isTypedArray":197}],99:[function(require,module,exports){var Stack=require("./_Stack"),baseIsEqual=require("./_baseIsEqual");var COMPARE_PARTIAL_FLAG=1,COMPARE_UNORDERED_FLAG=2;function baseIsMatch(object,source,matchData,customizer){var index=matchData.length,length=index,noCustomizer=!customizer;if(object==null){return!length}object=Object(object);while(index--){var data=matchData[index];if(noCustomizer&&data[2]?data[1]!==object[data[0]]:!(data[0]in object)){return false}}while(++index<length){data=matchData[index];var key=data[0],objValue=object[key],srcValue=data[1];if(noCustomizer&&data[2]){if(objValue===undefined&&!(key in object)){return false}}else{var stack=new Stack;if(customizer){var result=customizer(objValue,srcValue,key,object,source,stack)}if(!(result===undefined?baseIsEqual(srcValue,objValue,COMPARE_PARTIAL_FLAG|COMPARE_UNORDERED_FLAG,customizer,stack):result)){return false}}}return true}module.exports=baseIsMatch},{"./_Stack":77,"./_baseIsEqual":97}],100:[function(require,module,exports){var isFunction=require("./isFunction"),isMasked=require("./_isMasked"),isObject=require("./isObject"),toSource=require("./_toSource");var reRegExpChar=/[\\^$.*+?()[\]{}|]/g;var reIsHostCtor=/^\[object .+?Constructor\]$/;var funcProto=Function.prototype,objectProto=Object.prototype;var funcToString=funcProto.toString;var hasOwnProperty=objectProto.hasOwnProperty;var reIsNative=RegExp("^"+funcToString.call(hasOwnProperty).replace(reRegExpChar,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function baseIsNative(value){if(!isObject(value)||isMasked(value)){return false}var pattern=isFunction(value)?reIsNative:reIsHostCtor;return pattern.test(toSource(value))}module.exports=baseIsNative},{"./_isMasked":143,"./_toSource":178,"./isFunction":192,"./isObject":194}],101:[function(require,module,exports){var baseGetTag=require("./_baseGetTag"),isLength=require("./isLength"),isObjectLike=require("./isObjectLike");var argsTag="[object Arguments]",arrayTag="[object Array]",boolTag="[object Boolean]",dateTag="[object Date]",errorTag="[object Error]",funcTag="[object Function]",mapTag="[object Map]",numberTag="[object Number]",objectTag="[object Object]",regexpTag="[object RegExp]",setTag="[object Set]",stringTag="[object String]",weakMapTag="[object WeakMap]";var arrayBufferTag="[object ArrayBuffer]",dataViewTag="[object DataView]",float32Tag="[object Float32Array]",float64Tag="[object Float64Array]",int8Tag="[object Int8Array]",int16Tag="[object Int16Array]",int32Tag="[object Int32Array]",uint8Tag="[object Uint8Array]",uint8ClampedTag="[object Uint8ClampedArray]",uint16Tag="[object Uint16Array]",uint32Tag="[object Uint32Array]";var typedArrayTags={};typedArrayTags[float32Tag]=typedArrayTags[float64Tag]=typedArrayTags[int8Tag]=typedArrayTags[int16Tag]=typedArrayTags[int32Tag]=typedArrayTags[uint8Tag]=typedArrayTags[uint8ClampedTag]=typedArrayTags[uint16Tag]=typedArrayTags[uint32Tag]=true;typedArrayTags[argsTag]=typedArrayTags[arrayTag]=typedArrayTags[arrayBufferTag]=typedArrayTags[boolTag]=typedArrayTags[dataViewTag]=typedArrayTags[dateTag]=typedArrayTags[errorTag]=typedArrayTags[funcTag]=typedArrayTags[mapTag]=typedArrayTags[numberTag]=typedArrayTags[objectTag]=typedArrayTags[regexpTag]=typedArrayTags[setTag]=typedArrayTags[stringTag]=typedArrayTags[weakMapTag]=false;function baseIsTypedArray(value){return isObjectLike(value)&&isLength(value.length)&&!!typedArrayTags[baseGetTag(value)]}module.exports=baseIsTypedArray},{"./_baseGetTag":94,"./isLength":193,"./isObjectLike":195}],102:[function(require,module,exports){var baseMatches=require("./_baseMatches"),baseMatchesProperty=require("./_baseMatchesProperty"),identity=require("./identity"),isArray=require("./isArray"),property=require("./property");function baseIteratee(value){if(typeof value=="function"){return value}if(value==null){return identity}if(typeof value=="object"){return isArray(value)?baseMatchesProperty(value[0],value[1]):baseMatches(value)}return property(value)}module.exports=baseIteratee},{"./_baseMatches":104,"./_baseMatchesProperty":105,"./identity":186,"./isArray":188,"./property":201}],103:[function(require,module,exports){var isPrototype=require("./_isPrototype"),nativeKeys=require("./_nativeKeys");var objectProto=Object.prototype;var hasOwnProperty=objectProto.hasOwnProperty;function baseKeys(object){if(!isPrototype(object)){return nativeKeys(object)}var result=[];for(var key in Object(object)){if(hasOwnProperty.call(object,key)&&key!="constructor"){result.push(key)}}return result}module.exports=baseKeys},{
"./_isPrototype":144,"./_nativeKeys":160}],104:[function(require,module,exports){var baseIsMatch=require("./_baseIsMatch"),getMatchData=require("./_getMatchData"),matchesStrictComparable=require("./_matchesStrictComparable");function baseMatches(source){var matchData=getMatchData(source);if(matchData.length==1&&matchData[0][2]){return matchesStrictComparable(matchData[0][0],matchData[0][1])}return function(object){return object===source||baseIsMatch(object,source,matchData)}}module.exports=baseMatches},{"./_baseIsMatch":99,"./_getMatchData":127,"./_matchesStrictComparable":157}],105:[function(require,module,exports){var baseIsEqual=require("./_baseIsEqual"),get=require("./get"),hasIn=require("./hasIn"),isKey=require("./_isKey"),isStrictComparable=require("./_isStrictComparable"),matchesStrictComparable=require("./_matchesStrictComparable"),toKey=require("./_toKey");var COMPARE_PARTIAL_FLAG=1,COMPARE_UNORDERED_FLAG=2;function baseMatchesProperty(path,srcValue){if(isKey(path)&&isStrictComparable(srcValue)){return matchesStrictComparable(toKey(path),srcValue)}return function(object){var objValue=get(object,path);return objValue===undefined&&objValue===srcValue?hasIn(object,path):baseIsEqual(srcValue,objValue,COMPARE_PARTIAL_FLAG|COMPARE_UNORDERED_FLAG)}}module.exports=baseMatchesProperty},{"./_baseIsEqual":97,"./_isKey":141,"./_isStrictComparable":145,"./_matchesStrictComparable":157,"./_toKey":177,"./get":184,"./hasIn":185}],106:[function(require,module,exports){var basePickBy=require("./_basePickBy"),hasIn=require("./hasIn");function basePick(object,paths){return basePickBy(object,paths,function(value,path){return hasIn(object,path)})}module.exports=basePick},{"./_basePickBy":107,"./hasIn":185}],107:[function(require,module,exports){var baseGet=require("./_baseGet"),baseSet=require("./_baseSet"),castPath=require("./_castPath");function basePickBy(object,paths,predicate){var index=-1,length=paths.length,result={};while(++index<length){var path=paths[index],value=baseGet(object,path);if(predicate(value,path)){baseSet(result,castPath(path,object),value)}}return result}module.exports=basePickBy},{"./_baseGet":92,"./_baseSet":110,"./_castPath":116}],108:[function(require,module,exports){function baseProperty(key){return function(object){return object==null?undefined:object[key]}}module.exports=baseProperty},{}],109:[function(require,module,exports){var baseGet=require("./_baseGet");function basePropertyDeep(path){return function(object){return baseGet(object,path)}}module.exports=basePropertyDeep},{"./_baseGet":92}],110:[function(require,module,exports){var assignValue=require("./_assignValue"),castPath=require("./_castPath"),isIndex=require("./_isIndex"),isObject=require("./isObject"),toKey=require("./_toKey");function baseSet(object,path,value,customizer){if(!isObject(object)){return object}path=castPath(path,object);var index=-1,length=path.length,lastIndex=length-1,nested=object;while(nested!=null&&++index<length){var key=toKey(path[index]),newValue=value;if(index!=lastIndex){var objValue=nested[key];newValue=customizer?customizer(objValue,key,nested):undefined;if(newValue===undefined){newValue=isObject(objValue)?objValue:isIndex(path[index+1])?[]:{}}}assignValue(nested,key,newValue);nested=nested[key]}return object}module.exports=baseSet},{"./_assignValue":87,"./_castPath":116,"./_isIndex":140,"./_toKey":177,"./isObject":194}],111:[function(require,module,exports){var constant=require("./constant"),defineProperty=require("./_defineProperty"),identity=require("./identity");var baseSetToString=!defineProperty?identity:function(func,string){return defineProperty(func,"toString",{configurable:true,enumerable:false,value:constant(string),writable:true})};module.exports=baseSetToString},{"./_defineProperty":119,"./constant":179,"./identity":186}],112:[function(require,module,exports){function baseTimes(n,iteratee){var index=-1,result=Array(n);while(++index<n){result[index]=iteratee(index)}return result}module.exports=baseTimes},{}],113:[function(require,module,exports){var Symbol=require("./_Symbol"),arrayMap=require("./_arrayMap"),isArray=require("./isArray"),isSymbol=require("./isSymbol");var INFINITY=1/0;var symbolProto=Symbol?Symbol.prototype:undefined,symbolToString=symbolProto?symbolProto.toString:undefined;function baseToString(value){if(typeof value=="string"){return value}if(isArray(value)){return arrayMap(value,baseToString)+""}if(isSymbol(value)){return symbolToString?symbolToString.call(value):""}var result=value+"";return result=="0"&&1/value==-INFINITY?"-0":result}module.exports=baseToString},{"./_Symbol":78,"./_arrayMap":84,"./isArray":188,"./isSymbol":196}],114:[function(require,module,exports){function baseUnary(func){return function(value){return func(value)}}module.exports=baseUnary},{}],115:[function(require,module,exports){function cacheHas(cache,key){return cache.has(key)}module.exports=cacheHas},{}],116:[function(require,module,exports){var isArray=require("./isArray"),isKey=require("./_isKey"),stringToPath=require("./_stringToPath"),toString=require("./toString");function castPath(value,object){if(isArray(value)){return value}return isKey(value,object)?[value]:stringToPath(toString(value))}module.exports=castPath},{"./_isKey":141,"./_stringToPath":176,"./isArray":188,"./toString":207}],117:[function(require,module,exports){var root=require("./_root");var coreJsData=root["__core-js_shared__"];module.exports=coreJsData},{"./_root":165}],118:[function(require,module,exports){var baseIteratee=require("./_baseIteratee"),isArrayLike=require("./isArrayLike"),keys=require("./keys");function createFind(findIndexFunc){return function(collection,predicate,fromIndex){var iterable=Object(collection);if(!isArrayLike(collection)){var iteratee=baseIteratee(predicate,3);collection=keys(collection);predicate=function(key){return iteratee(iterable[key],key,iterable)}}var index=findIndexFunc(collection,predicate,fromIndex);return index>-1?iterable[iteratee?collection[index]:index]:undefined}}module.exports=createFind},{"./_baseIteratee":102,"./isArrayLike":189,"./keys":198}],119:[function(require,module,exports){var getNative=require("./_getNative");var defineProperty=function(){try{var func=getNative(Object,"defineProperty");func({},"",{});return func}catch(e){}}();module.exports=defineProperty},{"./_getNative":128}],120:[function(require,module,exports){var SetCache=require("./_SetCache"),arraySome=require("./_arraySome"),cacheHas=require("./_cacheHas");var COMPARE_PARTIAL_FLAG=1,COMPARE_UNORDERED_FLAG=2;function equalArrays(array,other,bitmask,customizer,equalFunc,stack){var isPartial=bitmask&COMPARE_PARTIAL_FLAG,arrLength=array.length,othLength=other.length;if(arrLength!=othLength&&!(isPartial&&othLength>arrLength)){return false}var stacked=stack.get(array);if(stacked&&stack.get(other)){return stacked==other}var index=-1,result=true,seen=bitmask&COMPARE_UNORDERED_FLAG?new SetCache:undefined;stack.set(array,other);stack.set(other,array);while(++index<arrLength){var arrValue=array[index],othValue=other[index];if(customizer){var compared=isPartial?customizer(othValue,arrValue,index,other,array,stack):customizer(arrValue,othValue,index,array,other,stack)}if(compared!==undefined){if(compared){continue}result=false;break}if(seen){if(!arraySome(other,function(othValue,othIndex){if(!cacheHas(seen,othIndex)&&(arrValue===othValue||equalFunc(arrValue,othValue,bitmask,customizer,stack))){return seen.push(othIndex)}})){result=false;break}}else if(!(arrValue===othValue||equalFunc(arrValue,othValue,bitmask,customizer,stack))){result=false;break}}stack["delete"](array);stack["delete"](other);return result}module.exports=equalArrays},{"./_SetCache":76,"./_arraySome":86,"./_cacheHas":115}],121:[function(require,module,exports){var Symbol=require("./_Symbol"),Uint8Array=require("./_Uint8Array"),eq=require("./eq"),equalArrays=require("./_equalArrays"),mapToArray=require("./_mapToArray"),setToArray=require("./_setToArray");var COMPARE_PARTIAL_FLAG=1,COMPARE_UNORDERED_FLAG=2;var boolTag="[object Boolean]",dateTag="[object Date]",errorTag="[object Error]",mapTag="[object Map]",numberTag="[object Number]",regexpTag="[object RegExp]",setTag="[object Set]",stringTag="[object String]",symbolTag="[object Symbol]";var arrayBufferTag="[object ArrayBuffer]",dataViewTag="[object DataView]";var symbolProto=Symbol?Symbol.prototype:undefined,symbolValueOf=symbolProto?symbolProto.valueOf:undefined;function equalByTag(object,other,tag,bitmask,customizer,equalFunc,stack){switch(tag){case dataViewTag:if(object.byteLength!=other.byteLength||object.byteOffset!=other.byteOffset){return false}object=object.buffer;other=other.buffer;case arrayBufferTag:if(object.byteLength!=other.byteLength||!equalFunc(new Uint8Array(object),new Uint8Array(other))){return false}return true;case boolTag:case dateTag:case numberTag:return eq(+object,+other);case errorTag:return object.name==other.name&&object.message==other.message;case regexpTag:case stringTag:return object==other+"";case mapTag:var convert=mapToArray;case setTag:var isPartial=bitmask&COMPARE_PARTIAL_FLAG;convert||(convert=setToArray);if(object.size!=other.size&&!isPartial){return false}var stacked=stack.get(object);if(stacked){return stacked==other}bitmask|=COMPARE_UNORDERED_FLAG;stack.set(object,other);var result=equalArrays(convert(object),convert(other),bitmask,customizer,equalFunc,stack);stack["delete"](object);return result;case symbolTag:if(symbolValueOf){return symbolValueOf.call(object)==symbolValueOf.call(other)}}return false}module.exports=equalByTag},{"./_Symbol":78,"./_Uint8Array":79,"./_equalArrays":120,"./_mapToArray":156,"./_setToArray":168,"./eq":180}],122:[function(require,module,exports){var getAllKeys=require("./_getAllKeys");var COMPARE_PARTIAL_FLAG=1;var objectProto=Object.prototype;var hasOwnProperty=objectProto.hasOwnProperty;function equalObjects(object,other,bitmask,customizer,equalFunc,stack){var isPartial=bitmask&COMPARE_PARTIAL_FLAG,objProps=getAllKeys(object),objLength=objProps.length,othProps=getAllKeys(other),othLength=othProps.length;if(objLength!=othLength&&!isPartial){return false}var index=objLength;while(index--){var key=objProps[index];if(!(isPartial?key in other:hasOwnProperty.call(other,key))){return false}}var stacked=stack.get(object);if(stacked&&stack.get(other)){return stacked==other}var result=true;stack.set(object,other);stack.set(other,object);var skipCtor=isPartial;while(++index<objLength){key=objProps[index];var objValue=object[key],othValue=other[key];if(customizer){var compared=isPartial?customizer(othValue,objValue,key,other,object,stack):customizer(objValue,othValue,key,object,other,stack)}if(!(compared===undefined?objValue===othValue||equalFunc(objValue,othValue,bitmask,customizer,stack):compared)){result=false;break}skipCtor||(skipCtor=key=="constructor")}if(result&&!skipCtor){var objCtor=object.constructor,othCtor=other.constructor;if(objCtor!=othCtor&&("constructor"in object&&"constructor"in other)&&!(typeof objCtor=="function"&&objCtor instanceof objCtor&&typeof othCtor=="function"&&othCtor instanceof othCtor)){result=false}}stack["delete"](object);stack["delete"](other);return result}module.exports=equalObjects},{"./_getAllKeys":125}],123:[function(require,module,exports){var flatten=require("./flatten"),overRest=require("./_overRest"),setToString=require("./_setToString");function flatRest(func){return setToString(overRest(func,undefined,flatten),func+"")}module.exports=flatRest},{"./_overRest":164,"./_setToString":169,"./flatten":183}],124:[function(require,module,exports){(function(global){var freeGlobal=typeof global=="object"&&global&&global.Object===Object&&global;module.exports=freeGlobal}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],125:[function(require,module,exports){var baseGetAllKeys=require("./_baseGetAllKeys"),getSymbols=require("./_getSymbols"),keys=require("./keys");function getAllKeys(object){return baseGetAllKeys(object,keys,getSymbols)}module.exports=getAllKeys},{"./_baseGetAllKeys":93,"./_getSymbols":130,"./keys":198}],126:[function(require,module,exports){var isKeyable=require("./_isKeyable");function getMapData(map,key){var data=map.__data__;return isKeyable(key)?data[typeof key=="string"?"string":"hash"]:data.map}module.exports=getMapData},{"./_isKeyable":142}],127:[function(require,module,exports){var isStrictComparable=require("./_isStrictComparable"),keys=require("./keys");function getMatchData(object){var result=keys(object),length=result.length;while(length--){var key=result[length],value=object[key];result[length]=[key,value,isStrictComparable(value)]}return result}module.exports=getMatchData},{"./_isStrictComparable":145,"./keys":198}],128:[function(require,module,exports){var baseIsNative=require("./_baseIsNative"),getValue=require("./_getValue");function getNative(object,key){var value=getValue(object,key);return baseIsNative(value)?value:undefined}module.exports=getNative},{"./_baseIsNative":100,"./_getValue":132}],129:[function(require,module,exports){var Symbol=require("./_Symbol");var objectProto=Object.prototype;var hasOwnProperty=objectProto.hasOwnProperty;var nativeObjectToString=objectProto.toString;var symToStringTag=Symbol?Symbol.toStringTag:undefined;function getRawTag(value){var isOwn=hasOwnProperty.call(value,symToStringTag),tag=value[symToStringTag];try{value[symToStringTag]=undefined;var unmasked=true}catch(e){}var result=nativeObjectToString.call(value);if(unmasked){if(isOwn){value[symToStringTag]=tag}else{delete value[symToStringTag]}}return result}module.exports=getRawTag},{"./_Symbol":78}],130:[function(require,module,exports){var arrayFilter=require("./_arrayFilter"),stubArray=require("./stubArray");var objectProto=Object.prototype;var propertyIsEnumerable=objectProto.propertyIsEnumerable;var nativeGetSymbols=Object.getOwnPropertySymbols;var getSymbols=!nativeGetSymbols?stubArray:function(object){if(object==null){return[]}object=Object(object);return arrayFilter(nativeGetSymbols(object),function(symbol){return propertyIsEnumerable.call(object,symbol)})};module.exports=getSymbols},{"./_arrayFilter":82,"./stubArray":202}],131:[function(require,module,exports){var DataView=require("./_DataView"),Map=require("./_Map"),Promise=require("./_Promise"),Set=require("./_Set"),WeakMap=require("./_WeakMap"),baseGetTag=require("./_baseGetTag"),toSource=require("./_toSource");var mapTag="[object Map]",objectTag="[object Object]",promiseTag="[object Promise]",setTag="[object Set]",weakMapTag="[object WeakMap]";var dataViewTag="[object DataView]";var dataViewCtorString=toSource(DataView),mapCtorString=toSource(Map),promiseCtorString=toSource(Promise),setCtorString=toSource(Set),weakMapCtorString=toSource(WeakMap);var getTag=baseGetTag;if(DataView&&getTag(new DataView(new ArrayBuffer(1)))!=dataViewTag||Map&&getTag(new Map)!=mapTag||Promise&&getTag(Promise.resolve())!=promiseTag||Set&&getTag(new Set)!=setTag||WeakMap&&getTag(new WeakMap)!=weakMapTag){getTag=function(value){var result=baseGetTag(value),Ctor=result==objectTag?value.constructor:undefined,ctorString=Ctor?toSource(Ctor):"";if(ctorString){switch(ctorString){case dataViewCtorString:return dataViewTag;case mapCtorString:return mapTag;case promiseCtorString:return promiseTag;case setCtorString:return setTag;case weakMapCtorString:return weakMapTag}}return result}}module.exports=getTag},{"./_DataView":69,"./_Map":72,"./_Promise":74,"./_Set":75,"./_WeakMap":80,"./_baseGetTag":94,"./_toSource":178}],132:[function(require,module,exports){function getValue(object,key){return object==null?undefined:object[key]}module.exports=getValue},{}],133:[function(require,module,exports){var castPath=require("./_castPath"),isArguments=require("./isArguments"),isArray=require("./isArray"),isIndex=require("./_isIndex"),isLength=require("./isLength"),toKey=require("./_toKey");function hasPath(object,path,hasFunc){path=castPath(path,object);var index=-1,length=path.length,result=false;while(++index<length){var key=toKey(path[index]);if(!(result=object!=null&&hasFunc(object,key))){break}object=object[key]}if(result||++index!=length){return result}length=object==null?0:object.length;return!!length&&isLength(length)&&isIndex(key,length)&&(isArray(object)||isArguments(object))}module.exports=hasPath},{"./_castPath":116,"./_isIndex":140,"./_toKey":177,"./isArguments":187,"./isArray":188,"./isLength":193}],134:[function(require,module,exports){var nativeCreate=require("./_nativeCreate");function hashClear(){this.__data__=nativeCreate?nativeCreate(null):{};this.size=0}module.exports=hashClear},{"./_nativeCreate":159}],135:[function(require,module,exports){function hashDelete(key){var result=this.has(key)&&delete this.__data__[key];this.size-=result?1:0;return result}module.exports=hashDelete},{}],136:[function(require,module,exports){var nativeCreate=require("./_nativeCreate");var HASH_UNDEFINED="__lodash_hash_undefined__";var objectProto=Object.prototype;var hasOwnProperty=objectProto.hasOwnProperty;function hashGet(key){var data=this.__data__;if(nativeCreate){var result=data[key];return result===HASH_UNDEFINED?undefined:result}return hasOwnProperty.call(data,key)?data[key]:undefined}module.exports=hashGet},{"./_nativeCreate":159}],137:[function(require,module,exports){var nativeCreate=require("./_nativeCreate");var objectProto=Object.prototype;var hasOwnProperty=objectProto.hasOwnProperty;function hashHas(key){var data=this.__data__;return nativeCreate?data[key]!==undefined:hasOwnProperty.call(data,key)}module.exports=hashHas},{"./_nativeCreate":159}],138:[function(require,module,exports){var nativeCreate=require("./_nativeCreate");var HASH_UNDEFINED="__lodash_hash_undefined__";function hashSet(key,value){var data=this.__data__;this.size+=this.has(key)?0:1;data[key]=nativeCreate&&value===undefined?HASH_UNDEFINED:value;return this}module.exports=hashSet},{"./_nativeCreate":159}],139:[function(require,module,exports){var Symbol=require("./_Symbol"),isArguments=require("./isArguments"),isArray=require("./isArray");var spreadableSymbol=Symbol?Symbol.isConcatSpreadable:undefined;function isFlattenable(value){return isArray(value)||isArguments(value)||!!(spreadableSymbol&&value&&value[spreadableSymbol])}module.exports=isFlattenable},{"./_Symbol":78,"./isArguments":187,"./isArray":188}],140:[function(require,module,exports){var MAX_SAFE_INTEGER=9007199254740991;var reIsUint=/^(?:0|[1-9]\d*)$/;function isIndex(value,length){length=length==null?MAX_SAFE_INTEGER:length;return!!length&&(typeof value=="number"||reIsUint.test(value))&&(value>-1&&value%1==0&&value<length)}module.exports=isIndex},{}],141:[function(require,module,exports){var isArray=require("./isArray"),isSymbol=require("./isSymbol");var reIsDeepProp=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,reIsPlainProp=/^\w*$/;function isKey(value,object){if(isArray(value)){return false}var type=typeof value;if(type=="number"||type=="symbol"||type=="boolean"||value==null||isSymbol(value)){return true}return reIsPlainProp.test(value)||!reIsDeepProp.test(value)||object!=null&&value in Object(object)}module.exports=isKey},{"./isArray":188,"./isSymbol":196}],142:[function(require,module,exports){function isKeyable(value){var type=typeof value;return type=="string"||type=="number"||type=="symbol"||type=="boolean"?value!=="__proto__":value===null}module.exports=isKeyable},{}],143:[function(require,module,exports){var coreJsData=require("./_coreJsData");var maskSrcKey=function(){var uid=/[^.]+$/.exec(coreJsData&&coreJsData.keys&&coreJsData.keys.IE_PROTO||"");return uid?"Symbol(src)_1."+uid:""}();function isMasked(func){return!!maskSrcKey&&maskSrcKey in func}module.exports=isMasked},{"./_coreJsData":117}],144:[function(require,module,exports){var objectProto=Object.prototype;function isPrototype(value){var Ctor=value&&value.constructor,proto=typeof Ctor=="function"&&Ctor.prototype||objectProto;return value===proto}module.exports=isPrototype},{}],145:[function(require,module,exports){var isObject=require("./isObject");function isStrictComparable(value){return value===value&&!isObject(value)}module.exports=isStrictComparable},{"./isObject":194}],146:[function(require,module,exports){function listCacheClear(){this.__data__=[];this.size=0}module.exports=listCacheClear},{}],147:[function(require,module,exports){var assocIndexOf=require("./_assocIndexOf");var arrayProto=Array.prototype;var splice=arrayProto.splice;function listCacheDelete(key){var data=this.__data__,index=assocIndexOf(data,key);if(index<0){return false}var lastIndex=data.length-1;if(index==lastIndex){data.pop()}else{splice.call(data,index,1)}--this.size;return true}module.exports=listCacheDelete},{"./_assocIndexOf":88}],148:[function(require,module,exports){var assocIndexOf=require("./_assocIndexOf");function listCacheGet(key){var data=this.__data__,index=assocIndexOf(data,key);return index<0?undefined:data[index][1]}module.exports=listCacheGet},{"./_assocIndexOf":88}],149:[function(require,module,exports){var assocIndexOf=require("./_assocIndexOf");function listCacheHas(key){return assocIndexOf(this.__data__,key)>-1}module.exports=listCacheHas},{"./_assocIndexOf":88}],150:[function(require,module,exports){var assocIndexOf=require("./_assocIndexOf");function listCacheSet(key,value){var data=this.__data__,index=assocIndexOf(data,key);if(index<0){++this.size;data.push([key,value])}else{data[index][1]=value}return this}module.exports=listCacheSet},{"./_assocIndexOf":88}],151:[function(require,module,exports){var Hash=require("./_Hash"),ListCache=require("./_ListCache"),Map=require("./_Map");function mapCacheClear(){this.size=0;this.__data__={hash:new Hash,map:new(Map||ListCache),string:new Hash}}module.exports=mapCacheClear},{"./_Hash":70,"./_ListCache":71,"./_Map":72}],152:[function(require,module,exports){var getMapData=require("./_getMapData");function mapCacheDelete(key){var result=getMapData(this,key)["delete"](key);this.size-=result?1:0;return result}module.exports=mapCacheDelete},{"./_getMapData":126}],153:[function(require,module,exports){var getMapData=require("./_getMapData");function mapCacheGet(key){return getMapData(this,key).get(key)}module.exports=mapCacheGet},{"./_getMapData":126}],154:[function(require,module,exports){var getMapData=require("./_getMapData");function mapCacheHas(key){return getMapData(this,key).has(key)}module.exports=mapCacheHas},{"./_getMapData":126}],155:[function(require,module,exports){var getMapData=require("./_getMapData");function mapCacheSet(key,value){var data=getMapData(this,key),size=data.size;data.set(key,value);this.size+=data.size==size?0:1;return this}module.exports=mapCacheSet},{"./_getMapData":126}],156:[function(require,module,exports){function mapToArray(map){var index=-1,result=Array(map.size);map.forEach(function(value,key){result[++index]=[key,value]});return result}module.exports=mapToArray},{}],157:[function(require,module,exports){function matchesStrictComparable(key,srcValue){return function(object){if(object==null){return false}return object[key]===srcValue&&(srcValue!==undefined||key in Object(object))}}module.exports=matchesStrictComparable},{}],158:[function(require,module,exports){var memoize=require("./memoize");var MAX_MEMOIZE_SIZE=500;function memoizeCapped(func){var result=memoize(func,function(key){if(cache.size===MAX_MEMOIZE_SIZE){cache.clear()}return key});var cache=result.cache;return result}module.exports=memoizeCapped},{"./memoize":199}],159:[function(require,module,exports){var getNative=require("./_getNative");var nativeCreate=getNative(Object,"create");module.exports=nativeCreate},{"./_getNative":128}],160:[function(require,module,exports){var overArg=require("./_overArg");var nativeKeys=overArg(Object.keys,Object);module.exports=nativeKeys},{"./_overArg":163}],161:[function(require,module,exports){var freeGlobal=require("./_freeGlobal");var freeExports=typeof exports=="object"&&exports&&!exports.nodeType&&exports;var freeModule=freeExports&&typeof module=="object"&&module&&!module.nodeType&&module;var moduleExports=freeModule&&freeModule.exports===freeExports;var freeProcess=moduleExports&&freeGlobal.process;var nodeUtil=function(){try{return freeProcess&&freeProcess.binding&&freeProcess.binding("util")}catch(e){}}();module.exports=nodeUtil},{"./_freeGlobal":124}],162:[function(require,module,exports){var objectProto=Object.prototype;var nativeObjectToString=objectProto.toString;function objectToString(value){return nativeObjectToString.call(value)}module.exports=objectToString},{}],163:[function(require,module,exports){function overArg(func,transform){return function(arg){return func(transform(arg))}}module.exports=overArg},{}],164:[function(require,module,exports){var apply=require("./_apply");var nativeMax=Math.max;function overRest(func,start,transform){start=nativeMax(start===undefined?func.length-1:start,0);return function(){var args=arguments,index=-1,length=nativeMax(args.length-start,0),array=Array(length);while(++index<length){array[index]=args[start+index]}index=-1;var otherArgs=Array(start+1);while(++index<start){otherArgs[index]=args[index]}otherArgs[start]=transform(array);return apply(func,this,otherArgs)}}module.exports=overRest},{"./_apply":81}],165:[function(require,module,exports){var freeGlobal=require("./_freeGlobal");var freeSelf=typeof self=="object"&&self&&self.Object===Object&&self;var root=freeGlobal||freeSelf||Function("return this")();module.exports=root},{"./_freeGlobal":124}],166:[function(require,module,exports){var HASH_UNDEFINED="__lodash_hash_undefined__";function setCacheAdd(value){this.__data__.set(value,HASH_UNDEFINED);return this}module.exports=setCacheAdd},{}],167:[function(require,module,exports){function setCacheHas(value){return this.__data__.has(value)}module.exports=setCacheHas},{}],168:[function(require,module,exports){function setToArray(set){var index=-1,result=Array(set.size);set.forEach(function(value){result[++index]=value});return result}module.exports=setToArray},{}],169:[function(require,module,exports){var baseSetToString=require("./_baseSetToString"),shortOut=require("./_shortOut");var setToString=shortOut(baseSetToString);module.exports=setToString},{"./_baseSetToString":111,"./_shortOut":170}],170:[function(require,module,exports){var HOT_COUNT=800,HOT_SPAN=16;var nativeNow=Date.now;function shortOut(func){var count=0,lastCalled=0;return function(){var stamp=nativeNow(),remaining=HOT_SPAN-(stamp-lastCalled);lastCalled=stamp;if(remaining>0){if(++count>=HOT_COUNT){return arguments[0]}}else{count=0}return func.apply(undefined,arguments)}}module.exports=shortOut},{}],171:[function(require,module,exports){var ListCache=require("./_ListCache");function stackClear(){this.__data__=new ListCache;this.size=0}module.exports=stackClear},{"./_ListCache":71}],172:[function(require,module,exports){function stackDelete(key){var data=this.__data__,result=data["delete"](key);this.size=data.size;return result}module.exports=stackDelete},{}],173:[function(require,module,exports){function stackGet(key){return this.__data__.get(key)}module.exports=stackGet},{}],174:[function(require,module,exports){function stackHas(key){return this.__data__.has(key)}module.exports=stackHas},{}],175:[function(require,module,exports){var ListCache=require("./_ListCache"),Map=require("./_Map"),MapCache=require("./_MapCache");var LARGE_ARRAY_SIZE=200;function stackSet(key,value){var data=this.__data__;if(data instanceof ListCache){var pairs=data.__data__;if(!Map||pairs.length<LARGE_ARRAY_SIZE-1){pairs.push([key,value]);this.size=++data.size;return this}data=this.__data__=new MapCache(pairs)}data.set(key,value);this.size=data.size;return this}module.exports=stackSet},{"./_ListCache":71,"./_Map":72,"./_MapCache":73}],176:[function(require,module,exports){var memoizeCapped=require("./_memoizeCapped");var reLeadingDot=/^\./,rePropName=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g;var reEscapeChar=/\\(\\)?/g;var stringToPath=memoizeCapped(function(string){var result=[];if(reLeadingDot.test(string)){result.push("")}string.replace(rePropName,function(match,number,quote,string){result.push(quote?string.replace(reEscapeChar,"$1"):number||match)});return result});module.exports=stringToPath},{"./_memoizeCapped":158}],177:[function(require,module,exports){var isSymbol=require("./isSymbol");var INFINITY=1/0;function toKey(value){if(typeof value=="string"||isSymbol(value)){return value}var result=value+"";return result=="0"&&1/value==-INFINITY?"-0":result}module.exports=toKey},{"./isSymbol":196}],178:[function(require,module,exports){var funcProto=Function.prototype;var funcToString=funcProto.toString;function toSource(func){if(func!=null){try{return funcToString.call(func)}catch(e){}try{return func+""}catch(e){}}return""}module.exports=toSource},{}],179:[function(require,module,exports){function constant(value){return function(){return value}}module.exports=constant},{}],180:[function(require,module,exports){function eq(value,other){return value===other||value!==value&&other!==other}module.exports=eq},{}],181:[function(require,module,exports){var createFind=require("./_createFind"),findIndex=require("./findIndex");var find=createFind(findIndex);module.exports=find},{"./_createFind":118,"./findIndex":182}],182:[function(require,module,exports){var baseFindIndex=require("./_baseFindIndex"),baseIteratee=require("./_baseIteratee"),toInteger=require("./toInteger");var nativeMax=Math.max;function findIndex(array,predicate,fromIndex){var length=array==null?0:array.length;if(!length){return-1}var index=fromIndex==null?0:toInteger(fromIndex);if(index<0){index=nativeMax(length+index,0)}return baseFindIndex(array,baseIteratee(predicate,3),index)}module.exports=findIndex},{"./_baseFindIndex":90,"./_baseIteratee":102,"./toInteger":205}],183:[function(require,module,exports){var baseFlatten=require("./_baseFlatten");function flatten(array){var length=array==null?0:array.length;return length?baseFlatten(array,1):[]}module.exports=flatten},{"./_baseFlatten":91}],184:[function(require,module,exports){var baseGet=require("./_baseGet");function get(object,path,defaultValue){var result=object==null?undefined:baseGet(object,path);return result===undefined?defaultValue:result}module.exports=get},{"./_baseGet":92}],185:[function(require,module,exports){var baseHasIn=require("./_baseHasIn"),hasPath=require("./_hasPath");function hasIn(object,path){return object!=null&&hasPath(object,path,baseHasIn)}module.exports=hasIn},{"./_baseHasIn":95,"./_hasPath":133}],186:[function(require,module,exports){function identity(value){return value}module.exports=identity},{}],187:[function(require,module,exports){var baseIsArguments=require("./_baseIsArguments"),isObjectLike=require("./isObjectLike");var objectProto=Object.prototype;var hasOwnProperty=objectProto.hasOwnProperty;var propertyIsEnumerable=objectProto.propertyIsEnumerable;var isArguments=baseIsArguments(function(){return arguments}())?baseIsArguments:function(value){return isObjectLike(value)&&hasOwnProperty.call(value,"callee")&&!propertyIsEnumerable.call(value,"callee")};module.exports=isArguments},{"./_baseIsArguments":96,"./isObjectLike":195}],188:[function(require,module,exports){var isArray=Array.isArray;module.exports=isArray},{}],189:[function(require,module,exports){var isFunction=require("./isFunction"),isLength=require("./isLength");function isArrayLike(value){return value!=null&&isLength(value.length)&&!isFunction(value)}module.exports=isArrayLike},{"./isFunction":192,"./isLength":193}],190:[function(require,module,exports){var root=require("./_root"),stubFalse=require("./stubFalse");var freeExports=typeof exports=="object"&&exports&&!exports.nodeType&&exports;var freeModule=freeExports&&typeof module=="object"&&module&&!module.nodeType&&module;var moduleExports=freeModule&&freeModule.exports===freeExports;var Buffer=moduleExports?root.Buffer:undefined;var nativeIsBuffer=Buffer?Buffer.isBuffer:undefined
;var isBuffer=nativeIsBuffer||stubFalse;module.exports=isBuffer},{"./_root":165,"./stubFalse":203}],191:[function(require,module,exports){var baseIsEqual=require("./_baseIsEqual");function isEqual(value,other){return baseIsEqual(value,other)}module.exports=isEqual},{"./_baseIsEqual":97}],192:[function(require,module,exports){var baseGetTag=require("./_baseGetTag"),isObject=require("./isObject");var asyncTag="[object AsyncFunction]",funcTag="[object Function]",genTag="[object GeneratorFunction]",proxyTag="[object Proxy]";function isFunction(value){if(!isObject(value)){return false}var tag=baseGetTag(value);return tag==funcTag||tag==genTag||tag==asyncTag||tag==proxyTag}module.exports=isFunction},{"./_baseGetTag":94,"./isObject":194}],193:[function(require,module,exports){var MAX_SAFE_INTEGER=9007199254740991;function isLength(value){return typeof value=="number"&&value>-1&&value%1==0&&value<=MAX_SAFE_INTEGER}module.exports=isLength},{}],194:[function(require,module,exports){function isObject(value){var type=typeof value;return value!=null&&(type=="object"||type=="function")}module.exports=isObject},{}],195:[function(require,module,exports){function isObjectLike(value){return value!=null&&typeof value=="object"}module.exports=isObjectLike},{}],196:[function(require,module,exports){var baseGetTag=require("./_baseGetTag"),isObjectLike=require("./isObjectLike");var symbolTag="[object Symbol]";function isSymbol(value){return typeof value=="symbol"||isObjectLike(value)&&baseGetTag(value)==symbolTag}module.exports=isSymbol},{"./_baseGetTag":94,"./isObjectLike":195}],197:[function(require,module,exports){var baseIsTypedArray=require("./_baseIsTypedArray"),baseUnary=require("./_baseUnary"),nodeUtil=require("./_nodeUtil");var nodeIsTypedArray=nodeUtil&&nodeUtil.isTypedArray;var isTypedArray=nodeIsTypedArray?baseUnary(nodeIsTypedArray):baseIsTypedArray;module.exports=isTypedArray},{"./_baseIsTypedArray":101,"./_baseUnary":114,"./_nodeUtil":161}],198:[function(require,module,exports){var arrayLikeKeys=require("./_arrayLikeKeys"),baseKeys=require("./_baseKeys"),isArrayLike=require("./isArrayLike");function keys(object){return isArrayLike(object)?arrayLikeKeys(object):baseKeys(object)}module.exports=keys},{"./_arrayLikeKeys":83,"./_baseKeys":103,"./isArrayLike":189}],199:[function(require,module,exports){var MapCache=require("./_MapCache");var FUNC_ERROR_TEXT="Expected a function";function memoize(func,resolver){if(typeof func!="function"||resolver!=null&&typeof resolver!="function"){throw new TypeError(FUNC_ERROR_TEXT)}var memoized=function(){var args=arguments,key=resolver?resolver.apply(this,args):args[0],cache=memoized.cache;if(cache.has(key)){return cache.get(key)}var result=func.apply(this,args);memoized.cache=cache.set(key,result)||cache;return result};memoized.cache=new(memoize.Cache||MapCache);return memoized}memoize.Cache=MapCache;module.exports=memoize},{"./_MapCache":73}],200:[function(require,module,exports){var basePick=require("./_basePick"),flatRest=require("./_flatRest");var pick=flatRest(function(object,paths){return object==null?{}:basePick(object,paths)});module.exports=pick},{"./_basePick":106,"./_flatRest":123}],201:[function(require,module,exports){var baseProperty=require("./_baseProperty"),basePropertyDeep=require("./_basePropertyDeep"),isKey=require("./_isKey"),toKey=require("./_toKey");function property(path){return isKey(path)?baseProperty(toKey(path)):basePropertyDeep(path)}module.exports=property},{"./_baseProperty":108,"./_basePropertyDeep":109,"./_isKey":141,"./_toKey":177}],202:[function(require,module,exports){function stubArray(){return[]}module.exports=stubArray},{}],203:[function(require,module,exports){function stubFalse(){return false}module.exports=stubFalse},{}],204:[function(require,module,exports){var toNumber=require("./toNumber");var INFINITY=1/0,MAX_INTEGER=1.7976931348623157e308;function toFinite(value){if(!value){return value===0?value:0}value=toNumber(value);if(value===INFINITY||value===-INFINITY){var sign=value<0?-1:1;return sign*MAX_INTEGER}return value===value?value:0}module.exports=toFinite},{"./toNumber":206}],205:[function(require,module,exports){var toFinite=require("./toFinite");function toInteger(value){var result=toFinite(value),remainder=result%1;return result===result?remainder?result-remainder:result:0}module.exports=toInteger},{"./toFinite":204}],206:[function(require,module,exports){var isObject=require("./isObject"),isSymbol=require("./isSymbol");var NAN=0/0;var reTrim=/^\s+|\s+$/g;var reIsBadHex=/^[-+]0x[0-9a-f]+$/i;var reIsBinary=/^0b[01]+$/i;var reIsOctal=/^0o[0-7]+$/i;var freeParseInt=parseInt;function toNumber(value){if(typeof value=="number"){return value}if(isSymbol(value)){return NAN}if(isObject(value)){var other=typeof value.valueOf=="function"?value.valueOf():value;value=isObject(other)?other+"":other}if(typeof value!="string"){return value===0?value:+value}value=value.replace(reTrim,"");var isBinary=reIsBinary.test(value);return isBinary||reIsOctal.test(value)?freeParseInt(value.slice(2),isBinary?2:8):reIsBadHex.test(value)?NAN:+value}module.exports=toNumber},{"./isObject":194,"./isSymbol":196}],207:[function(require,module,exports){var baseToString=require("./_baseToString");function toString(value){return value==null?"":baseToString(value)}module.exports=toString},{"./_baseToString":113}],208:[function(require,module,exports){var s=1e3;var m=s*60;var h=m*60;var d=h*24;var y=d*365.25;module.exports=function(val,options){options=options||{};var type=typeof val;if(type==="string"&&val.length>0){return parse(val)}else if(type==="number"&&isNaN(val)===false){return options.long?fmtLong(val):fmtShort(val)}throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(val))};function parse(str){str=String(str);if(str.length>1e4){return}var match=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(str);if(!match){return}var n=parseFloat(match[1]);var type=(match[2]||"ms").toLowerCase();switch(type){case"years":case"year":case"yrs":case"yr":case"y":return n*y;case"days":case"day":case"d":return n*d;case"hours":case"hour":case"hrs":case"hr":case"h":return n*h;case"minutes":case"minute":case"mins":case"min":case"m":return n*m;case"seconds":case"second":case"secs":case"sec":case"s":return n*s;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return undefined}}function fmtShort(ms){if(ms>=d){return Math.round(ms/d)+"d"}if(ms>=h){return Math.round(ms/h)+"h"}if(ms>=m){return Math.round(ms/m)+"m"}if(ms>=s){return Math.round(ms/s)+"s"}return ms+"ms"}function fmtLong(ms){return plural(ms,d,"day")||plural(ms,h,"hour")||plural(ms,m,"minute")||plural(ms,s,"second")||ms+" ms"}function plural(ms,n,name){if(ms<n){return}if(ms<n*1.5){return Math.floor(ms/n)+" "+name}return Math.ceil(ms/n)+" "+name+"s"}},{}],209:[function(require,module,exports){var process=module.exports={};var cachedSetTimeout;var cachedClearTimeout;function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}(function(){try{if(typeof setTimeout==="function"){cachedSetTimeout=setTimeout}else{cachedSetTimeout=defaultSetTimout}}catch(e){cachedSetTimeout=defaultSetTimout}try{if(typeof clearTimeout==="function"){cachedClearTimeout=clearTimeout}else{cachedClearTimeout=defaultClearTimeout}}catch(e){cachedClearTimeout=defaultClearTimeout}})();function runTimeout(fun){if(cachedSetTimeout===setTimeout){return setTimeout(fun,0)}if((cachedSetTimeout===defaultSetTimout||!cachedSetTimeout)&&setTimeout){cachedSetTimeout=setTimeout;return setTimeout(fun,0)}try{return cachedSetTimeout(fun,0)}catch(e){try{return cachedSetTimeout.call(null,fun,0)}catch(e){return cachedSetTimeout.call(this,fun,0)}}}function runClearTimeout(marker){if(cachedClearTimeout===clearTimeout){return clearTimeout(marker)}if((cachedClearTimeout===defaultClearTimeout||!cachedClearTimeout)&&clearTimeout){cachedClearTimeout=clearTimeout;return clearTimeout(marker)}try{return cachedClearTimeout(marker)}catch(e){try{return cachedClearTimeout.call(null,marker)}catch(e){return cachedClearTimeout.call(this,marker)}}}var queue=[];var draining=false;var currentQueue;var queueIndex=-1;function cleanUpNextTick(){if(!draining||!currentQueue){return}draining=false;if(currentQueue.length){queue=currentQueue.concat(queue)}else{queueIndex=-1}if(queue.length){drainQueue()}}function drainQueue(){if(draining){return}var timeout=runTimeout(cleanUpNextTick);draining=true;var len=queue.length;while(len){currentQueue=queue;queue=[];while(++queueIndex<len){if(currentQueue){currentQueue[queueIndex].run()}}queueIndex=-1;len=queue.length}currentQueue=null;draining=false;runClearTimeout(timeout)}process.nextTick=function(fun){var args=new Array(arguments.length-1);if(arguments.length>1){for(var i=1;i<arguments.length;i++){args[i-1]=arguments[i]}}queue.push(new Item(fun,args));if(queue.length===1&&!draining){runTimeout(drainQueue)}};function Item(fun,array){this.fun=fun;this.array=array}Item.prototype.run=function(){this.fun.apply(null,this.array)};process.title="browser";process.browser=true;process.env={};process.argv=[];process.version="";process.versions={};function noop(){}process.on=noop;process.addListener=noop;process.once=noop;process.off=noop;process.removeListener=noop;process.removeAllListeners=noop;process.emit=noop;process.binding=function(name){throw new Error("process.binding is not supported")};process.cwd=function(){return"/"};process.chdir=function(dir){throw new Error("process.chdir is not supported")};process.umask=function(){return 0}},{}],210:[function(require,module,exports){(function(process){"use strict";if(process.env.NODE_ENV!=="production"){var invariant=require("fbjs/lib/invariant");var warning=require("fbjs/lib/warning");var ReactPropTypesSecret=require("./lib/ReactPropTypesSecret");var loggedTypeFailures={}}function checkPropTypes(typeSpecs,values,location,componentName,getStack){if(process.env.NODE_ENV!=="production"){for(var typeSpecName in typeSpecs){if(typeSpecs.hasOwnProperty(typeSpecName)){var error;try{invariant(typeof typeSpecs[typeSpecName]==="function","%s: %s type `%s` is invalid; it must be a function, usually from "+"React.PropTypes.",componentName||"React class",location,typeSpecName);error=typeSpecs[typeSpecName](values,typeSpecName,componentName,location,null,ReactPropTypesSecret)}catch(ex){error=ex}warning(!error||error instanceof Error,"%s: type specification of %s `%s` is invalid; the type checker "+"function must return `null` or an `Error` but returned a %s. "+"You may have forgotten to pass an argument to the type checker "+"creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and "+"shape all require an argument).",componentName||"React class",location,typeSpecName,typeof error);if(error instanceof Error&&!(error.message in loggedTypeFailures)){loggedTypeFailures[error.message]=true;var stack=getStack?getStack():"";warning(false,"Failed %s type: %s%s",location,error.message,stack!=null?stack:"")}}}}}module.exports=checkPropTypes}).call(this,require("_process"))},{"./lib/ReactPropTypesSecret":214,_process:209,"fbjs/lib/invariant":59,"fbjs/lib/warning":60}],211:[function(require,module,exports){"use strict";var emptyFunction=require("fbjs/lib/emptyFunction");var invariant=require("fbjs/lib/invariant");module.exports=function(){function shim(){invariant(false,"Calling PropTypes validators directly is not supported by the `prop-types` package. "+"Use PropTypes.checkPropTypes() to call them. "+"Read more at http://fb.me/use-check-prop-types")}shim.isRequired=shim;function getShim(){return shim}var ReactPropTypes={array:shim,bool:shim,func:shim,number:shim,object:shim,string:shim,symbol:shim,any:shim,arrayOf:getShim,element:shim,instanceOf:getShim,node:shim,objectOf:getShim,oneOf:getShim,oneOfType:getShim,shape:getShim};ReactPropTypes.checkPropTypes=emptyFunction;ReactPropTypes.PropTypes=ReactPropTypes;return ReactPropTypes}},{"fbjs/lib/emptyFunction":58,"fbjs/lib/invariant":59}],212:[function(require,module,exports){(function(process){"use strict";var emptyFunction=require("fbjs/lib/emptyFunction");var invariant=require("fbjs/lib/invariant");var warning=require("fbjs/lib/warning");var ReactPropTypesSecret=require("./lib/ReactPropTypesSecret");var checkPropTypes=require("./checkPropTypes");module.exports=function(isValidElement,throwOnDirectAccess){var ITERATOR_SYMBOL=typeof Symbol==="function"&&Symbol.iterator;var FAUX_ITERATOR_SYMBOL="@@iterator";function getIteratorFn(maybeIterable){var iteratorFn=maybeIterable&&(ITERATOR_SYMBOL&&maybeIterable[ITERATOR_SYMBOL]||maybeIterable[FAUX_ITERATOR_SYMBOL]);if(typeof iteratorFn==="function"){return iteratorFn}}var ANONYMOUS="<<anonymous>>";var ReactPropTypes={array:createPrimitiveTypeChecker("array"),bool:createPrimitiveTypeChecker("boolean"),func:createPrimitiveTypeChecker("function"),number:createPrimitiveTypeChecker("number"),object:createPrimitiveTypeChecker("object"),string:createPrimitiveTypeChecker("string"),symbol:createPrimitiveTypeChecker("symbol"),any:createAnyTypeChecker(),arrayOf:createArrayOfTypeChecker,element:createElementTypeChecker(),instanceOf:createInstanceTypeChecker,node:createNodeChecker(),objectOf:createObjectOfTypeChecker,oneOf:createEnumTypeChecker,oneOfType:createUnionTypeChecker,shape:createShapeTypeChecker};function is(x,y){if(x===y){return x!==0||1/x===1/y}else{return x!==x&&y!==y}}function PropTypeError(message){this.message=message;this.stack=""}PropTypeError.prototype=Error.prototype;function createChainableTypeChecker(validate){if(process.env.NODE_ENV!=="production"){var manualPropTypeCallCache={};var manualPropTypeWarningCount=0}function checkType(isRequired,props,propName,componentName,location,propFullName,secret){componentName=componentName||ANONYMOUS;propFullName=propFullName||propName;if(secret!==ReactPropTypesSecret){if(throwOnDirectAccess){invariant(false,"Calling PropTypes validators directly is not supported by the `prop-types` package. "+"Use `PropTypes.checkPropTypes()` to call them. "+"Read more at http://fb.me/use-check-prop-types")}else if(process.env.NODE_ENV!=="production"&&typeof console!=="undefined"){var cacheKey=componentName+":"+propName;if(!manualPropTypeCallCache[cacheKey]&&manualPropTypeWarningCount<3){warning(false,"You are manually calling a React.PropTypes validation "+"function for the `%s` prop on `%s`. This is deprecated "+"and will throw in the standalone `prop-types` package. "+"You may be seeing this warning due to a third-party PropTypes "+"library. See https://fb.me/react-warning-dont-call-proptypes "+"for details.",propFullName,componentName);manualPropTypeCallCache[cacheKey]=true;manualPropTypeWarningCount++}}}if(props[propName]==null){if(isRequired){if(props[propName]===null){return new PropTypeError("The "+location+" `"+propFullName+"` is marked as required "+("in `"+componentName+"`, but its value is `null`."))}return new PropTypeError("The "+location+" `"+propFullName+"` is marked as required in "+("`"+componentName+"`, but its value is `undefined`."))}return null}else{return validate(props,propName,componentName,location,propFullName)}}var chainedCheckType=checkType.bind(null,false);chainedCheckType.isRequired=checkType.bind(null,true);return chainedCheckType}function createPrimitiveTypeChecker(expectedType){function validate(props,propName,componentName,location,propFullName,secret){var propValue=props[propName];var propType=getPropType(propValue);if(propType!==expectedType){var preciseType=getPreciseType(propValue);return new PropTypeError("Invalid "+location+" `"+propFullName+"` of type "+("`"+preciseType+"` supplied to `"+componentName+"`, expected ")+("`"+expectedType+"`."))}return null}return createChainableTypeChecker(validate)}function createAnyTypeChecker(){return createChainableTypeChecker(emptyFunction.thatReturnsNull)}function createArrayOfTypeChecker(typeChecker){function validate(props,propName,componentName,location,propFullName){if(typeof typeChecker!=="function"){return new PropTypeError("Property `"+propFullName+"` of component `"+componentName+"` has invalid PropType notation inside arrayOf.")}var propValue=props[propName];if(!Array.isArray(propValue)){var propType=getPropType(propValue);return new PropTypeError("Invalid "+location+" `"+propFullName+"` of type "+("`"+propType+"` supplied to `"+componentName+"`, expected an array."))}for(var i=0;i<propValue.length;i++){var error=typeChecker(propValue,i,componentName,location,propFullName+"["+i+"]",ReactPropTypesSecret);if(error instanceof Error){return error}}return null}return createChainableTypeChecker(validate)}function createElementTypeChecker(){function validate(props,propName,componentName,location,propFullName){var propValue=props[propName];if(!isValidElement(propValue)){var propType=getPropType(propValue);return new PropTypeError("Invalid "+location+" `"+propFullName+"` of type "+("`"+propType+"` supplied to `"+componentName+"`, expected a single ReactElement."))}return null}return createChainableTypeChecker(validate)}function createInstanceTypeChecker(expectedClass){function validate(props,propName,componentName,location,propFullName){if(!(props[propName]instanceof expectedClass)){var expectedClassName=expectedClass.name||ANONYMOUS;var actualClassName=getClassName(props[propName]);return new PropTypeError("Invalid "+location+" `"+propFullName+"` of type "+("`"+actualClassName+"` supplied to `"+componentName+"`, expected ")+("instance of `"+expectedClassName+"`."))}return null}return createChainableTypeChecker(validate)}function createEnumTypeChecker(expectedValues){if(!Array.isArray(expectedValues)){process.env.NODE_ENV!=="production"?warning(false,"Invalid argument supplied to oneOf, expected an instance of array."):void 0;return emptyFunction.thatReturnsNull}function validate(props,propName,componentName,location,propFullName){var propValue=props[propName];for(var i=0;i<expectedValues.length;i++){if(is(propValue,expectedValues[i])){return null}}var valuesString=JSON.stringify(expectedValues);return new PropTypeError("Invalid "+location+" `"+propFullName+"` of value `"+propValue+"` "+("supplied to `"+componentName+"`, expected one of "+valuesString+"."))}return createChainableTypeChecker(validate)}function createObjectOfTypeChecker(typeChecker){function validate(props,propName,componentName,location,propFullName){if(typeof typeChecker!=="function"){return new PropTypeError("Property `"+propFullName+"` of component `"+componentName+"` has invalid PropType notation inside objectOf.")}var propValue=props[propName];var propType=getPropType(propValue);if(propType!=="object"){return new PropTypeError("Invalid "+location+" `"+propFullName+"` of type "+("`"+propType+"` supplied to `"+componentName+"`, expected an object."))}for(var key in propValue){if(propValue.hasOwnProperty(key)){var error=typeChecker(propValue,key,componentName,location,propFullName+"."+key,ReactPropTypesSecret);if(error instanceof Error){return error}}}return null}return createChainableTypeChecker(validate)}function createUnionTypeChecker(arrayOfTypeCheckers){if(!Array.isArray(arrayOfTypeCheckers)){process.env.NODE_ENV!=="production"?warning(false,"Invalid argument supplied to oneOfType, expected an instance of array."):void 0;return emptyFunction.thatReturnsNull}function validate(props,propName,componentName,location,propFullName){for(var i=0;i<arrayOfTypeCheckers.length;i++){var checker=arrayOfTypeCheckers[i];if(checker(props,propName,componentName,location,propFullName,ReactPropTypesSecret)==null){return null}}return new PropTypeError("Invalid "+location+" `"+propFullName+"` supplied to "+("`"+componentName+"`."))}return createChainableTypeChecker(validate)}function createNodeChecker(){function validate(props,propName,componentName,location,propFullName){if(!isNode(props[propName])){return new PropTypeError("Invalid "+location+" `"+propFullName+"` supplied to "+("`"+componentName+"`, expected a ReactNode."))}return null}return createChainableTypeChecker(validate)}function createShapeTypeChecker(shapeTypes){function validate(props,propName,componentName,location,propFullName){var propValue=props[propName];var propType=getPropType(propValue);if(propType!=="object"){return new PropTypeError("Invalid "+location+" `"+propFullName+"` of type `"+propType+"` "+("supplied to `"+componentName+"`, expected `object`."))}for(var key in shapeTypes){var checker=shapeTypes[key];if(!checker){continue}var error=checker(propValue,key,componentName,location,propFullName+"."+key,ReactPropTypesSecret);if(error){return error}}return null}return createChainableTypeChecker(validate)}function isNode(propValue){switch(typeof propValue){case"number":case"string":case"undefined":return true;case"boolean":return!propValue;case"object":if(Array.isArray(propValue)){return propValue.every(isNode)}if(propValue===null||isValidElement(propValue)){return true}var iteratorFn=getIteratorFn(propValue);if(iteratorFn){var iterator=iteratorFn.call(propValue);var step;if(iteratorFn!==propValue.entries){while(!(step=iterator.next()).done){if(!isNode(step.value)){return false}}}else{while(!(step=iterator.next()).done){var entry=step.value;if(entry){if(!isNode(entry[1])){return false}}}}}else{return false}return true;default:return false}}function isSymbol(propType,propValue){if(propType==="symbol"){return true}if(propValue["@@toStringTag"]==="Symbol"){return true}if(typeof Symbol==="function"&&propValue instanceof Symbol){return true}return false}function getPropType(propValue){var propType=typeof propValue;if(Array.isArray(propValue)){return"array"}if(propValue instanceof RegExp){return"object"}if(isSymbol(propType,propValue)){return"symbol"}return propType}function getPreciseType(propValue){var propType=getPropType(propValue);if(propType==="object"){if(propValue instanceof Date){return"date"}else if(propValue instanceof RegExp){return"regexp"}}return propType}function getClassName(propValue){if(!propValue.constructor||!propValue.constructor.name){return ANONYMOUS}return propValue.constructor.name}ReactPropTypes.checkPropTypes=checkPropTypes;ReactPropTypes.PropTypes=ReactPropTypes;return ReactPropTypes}}).call(this,require("_process"))},{"./checkPropTypes":210,"./lib/ReactPropTypesSecret":214,_process:209,"fbjs/lib/emptyFunction":58,"fbjs/lib/invariant":59,"fbjs/lib/warning":60}],213:[function(require,module,exports){(function(process){if(process.env.NODE_ENV!=="production"){var REACT_ELEMENT_TYPE=typeof Symbol==="function"&&Symbol.for&&Symbol.for("react.element")||60103;var isValidElement=function(object){return typeof object==="object"&&object!==null&&object.$$typeof===REACT_ELEMENT_TYPE};var throwOnDirectAccess=true;module.exports=require("./factoryWithTypeCheckers")(isValidElement,throwOnDirectAccess)}else{module.exports=require("./factoryWithThrowingShims")()}}).call(this,require("_process"))},{"./factoryWithThrowingShims":211,"./factoryWithTypeCheckers":212,_process:209}],214:[function(require,module,exports){"use strict";var ReactPropTypesSecret="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";module.exports=ReactPropTypesSecret},{}],215:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _react=window.React;var _react2=_interopRequireDefault(_react);var _reactDom=window.ReactDOM;var _reactDom2=_interopRequireDefault(_reactDom);var _propTypes=require("prop-types");var _propTypes2=_interopRequireDefault(_propTypes);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var KEYCODES={ESCAPE:27};var Portal=function(_React$Component){_inherits(Portal,_React$Component);function Portal(){_classCallCheck(this,Portal);var _this=_possibleConstructorReturn(this,(Portal.__proto__||Object.getPrototypeOf(Portal)).call(this));_this.state={active:false};_this.handleWrapperClick=_this.handleWrapperClick.bind(_this);_this.closePortal=_this.closePortal.bind(_this);_this.handleOutsideMouseClick=_this.handleOutsideMouseClick.bind(_this);_this.handleKeydown=_this.handleKeydown.bind(_this);_this.portal=null;_this.node=null;return _this}_createClass(Portal,[{key:"componentDidMount",value:function componentDidMount(){if(this.props.closeOnEsc){document.addEventListener("keydown",this.handleKeydown)}if(this.props.closeOnOutsideClick){document.addEventListener("mouseup",this.handleOutsideMouseClick);document.addEventListener("touchstart",this.handleOutsideMouseClick)}if(this.props.isOpened){this.openPortal()}}},{key:"componentWillReceiveProps",value:function componentWillReceiveProps(newProps){if(typeof newProps.isOpened!=="undefined"){if(newProps.isOpened){if(this.state.active){this.renderPortal(newProps)}else{this.openPortal(newProps)}}if(!newProps.isOpened&&this.state.active){this.closePortal()}}if(typeof newProps.isOpened==="undefined"&&this.state.active){this.renderPortal(newProps)}}},{key:"componentWillUnmount",value:function componentWillUnmount(){if(this.props.closeOnEsc){document.removeEventListener("keydown",this.handleKeydown)}if(this.props.closeOnOutsideClick){document.removeEventListener("mouseup",this.handleOutsideMouseClick);document.removeEventListener("touchstart",this.handleOutsideMouseClick)}this.closePortal(true)}},{key:"handleWrapperClick",value:function handleWrapperClick(e){e.preventDefault();e.stopPropagation();if(this.state.active){return}this.openPortal()}},{key:"openPortal",value:function openPortal(){var props=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.props;this.setState({active:true});this.renderPortal(props);this.props.onOpen(this.node)}},{key:"closePortal",value:function closePortal(){var _this2=this;var isUnmounted=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;var resetPortalState=function resetPortalState(){if(_this2.node){_reactDom2.default.unmountComponentAtNode(_this2.node);document.body.removeChild(_this2.node)}_this2.portal=null;_this2.node=null;if(isUnmounted!==true){_this2.setState({active:false})}};if(this.state.active){if(this.props.beforeClose){this.props.beforeClose(this.node,resetPortalState)}else{resetPortalState()}this.props.onClose()}}},{key:"handleOutsideMouseClick",value:function handleOutsideMouseClick(e){if(!this.state.active){return}var root=(0,_reactDom.findDOMNode)(this.portal);if(root.contains(e.target)||e.button&&e.button!==0){return}e.stopPropagation();this.closePortal()}},{key:"handleKeydown",value:function handleKeydown(e){if(e.keyCode===KEYCODES.ESCAPE&&this.state.active){this.closePortal()}}},{key:"renderPortal",value:function renderPortal(props){if(!this.node){this.node=document.createElement("div");document.body.appendChild(this.node)}var children=props.children;if(typeof props.children.type==="function"){children=_react2.default.cloneElement(props.children,{closePortal:this.closePortal})}this.portal=_reactDom2.default.unstable_renderSubtreeIntoContainer(this,children,this.node,this.props.onUpdate)}},{key:"render",value:function render(){if(this.props.openByClickOn){return _react2.default.cloneElement(this.props.openByClickOn,{onClick:this.handleWrapperClick})}return null}}]);return Portal}(_react2.default.Component);exports.default=Portal;Portal.propTypes={children:_propTypes2.default.element.isRequired,openByClickOn:_propTypes2.default.element,closeOnEsc:_propTypes2.default.bool,closeOnOutsideClick:_propTypes2.default.bool,isOpened:_propTypes2.default.bool,onOpen:_propTypes2.default.func,onClose:_propTypes2.default.func,beforeClose:_propTypes2.default.func,onUpdate:_propTypes2.default.func};Portal.defaultProps={onOpen:function onOpen(){},onClose:function onClose(){},onUpdate:function onUpdate(){}};module.exports=exports["default"]},{"prop-types":213}],216:[function(require,module,exports){function isBackward(selection){var startNode=selection.anchorNode;var startOffset=selection.anchorOffset;var endNode=selection.focusNode;var endOffset=selection.focusOffset;var position=startNode.compareDocumentPosition(endNode);return!(position===4||position===0&&startOffset<endOffset)}module.exports=isBackward},{}],217:[function(require,module,exports){var toString=Object.prototype.toString;module.exports=function(val){switch(toString.call(val)){case"[object Function]":return"function";case"[object Date]":return"date";case"[object RegExp]":return"regexp";case"[object Arguments]":return"arguments";case"[object Array]":return"array";case"[object String]":return"string"}if(typeof val=="object"&&val&&typeof val.length=="number"){try{if(typeof val.callee=="function")return"arguments"}catch(ex){if(ex instanceof TypeError){return"arguments"}}}if(val===null)return"null";if(val===undefined)return"undefined";if(val&&val.nodeType===1)return"element";if(val===Object(val))return"object";return typeof val}},{}],218:[function(require,module,exports){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var _block=require("../models/block"),_block2=_interopRequireDefault(_block),_inline=require("../models/inline"),_inline2=_interopRequireDefault(_inline),_mark=require("../models/mark"),_mark2=_interopRequireDefault(_mark),Changes={},PROXY_TRANSFORMS=["deleteBackward","deleteCharBackward","deleteLineBackward","deleteWordBackward","deleteForward","deleteCharForward","deleteWordForward","deleteLineForward","setBlock","setInline","splitInline","unwrapBlock","unwrapInline","wrapBlock","wrapInline"];PROXY_TRANSFORMS.forEach(function(e){Changes[e]=function(t){for(var a=arguments.length,n=Array(a>1?a-1:0),r=1;r<a;r++)n[r-1]=arguments[r];var s=t.state,l=s.selection;t[e+"AtRange"].apply(t,[l].concat(n))}}),Changes.addMark=function(e,t){t=_mark2.default.create(t);var a=e.state,n=a.document,r=a.selection;if(r.isExpanded)e.addMarkAtRange(r,t);else if(r.marks){var s=r.marks.add(t),l=r.set("marks",s);e.select(l)}else{var o=n.getActiveMarksAtRange(r).add(t),i=r.set("marks",o);e.select(i)}},Changes.delete=function(e){var t=e.state,a=t.selection;e.deleteAtRange(a),e.collapseToStart()},Changes.insertBlock=function(e,t){t=_block2.default.create(t);var a=e.state,n=a.selection;e.insertBlockAtRange(n,t);var r=e.state.document.getNode(t.key);r&&e.collapseToEndOf(r)},Changes.insertFragment=function(e,t){if(t.nodes.size){var a=e.state,n=a,r=n.document,s=n.selection,l=a,o=l.startText,i=l.endText,c=l.startInline,d=t.getLastText(),u=t.getClosestInline(d.key),k=r.getTexts().map(function(e){return e.key}),g=!c||s.hasEdgeAtStartOf(o)||s.hasEdgeAtEndOf(i);e.insertFragmentAtRange(s,t),a=e.state,r=a.document;var f=r.getTexts().filter(function(e){return!k.includes(e.key)
}),m=g?f.last():f.takeLast(2).first();m&&u?e.select(s.collapseToEndOf(m)):m?e.select(s.collapseToStartOf(m).move(d.text.length)):e.select(s.collapseToStart().move(d.text.length))}},Changes.insertInline=function(e,t){t=_inline2.default.create(t);var a=e.state,n=a.selection;e.insertInlineAtRange(n,t);var r=e.state.document.getNode(t.key);r&&e.collapseToEndOf(r)},Changes.insertText=function(e,t,a){var n=e.state,r=n.document,s=n.selection;a=a||s.marks,e.insertTextAtRange(s,t,a),s.marks&&r!=e.state.document&&e.select({marks:null})},Changes.splitBlock=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=e.state,n=a.selection;e.splitBlockAtRange(n,t).collapseToEnd()},Changes.removeMark=function(e,t){t=_mark2.default.create(t);var a=e.state,n=a.document,r=a.selection;if(r.isExpanded)e.removeMarkAtRange(r,t);else if(r.marks){var s=r.marks.remove(t),l=r.set("marks",s);e.select(l)}else{var o=n.getActiveMarksAtRange(r).remove(t),i=r.set("marks",o);e.select(i)}},Changes.toggleMark=function(e,t){t=_mark2.default.create(t),e.state.activeMarks.has(t)?e.removeMark(t):e.addMark(t)},Changes.wrapText=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t,n=e.state,r=n.selection;e.wrapTextAtRange(r,t,a),r.isCollapsed&&e.moveStart(0-t.length),e.moveEnd(0-a.length),r.isForward!=e.state.selection.isForward&&e.flip()},exports.default=Changes},{"../models/block":237,"../models/inline":243,"../models/mark":244}],219:[function(require,module,exports){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var _block=require("../models/block"),_block2=_interopRequireDefault(_block),_inline=require("../models/inline"),_inline2=_interopRequireDefault(_inline),_mark=require("../models/mark"),_mark2=_interopRequireDefault(_mark),_node=require("../models/node"),_node2=_interopRequireDefault(_node),_string=require("../utils/string"),_string2=_interopRequireDefault(_string),_core=require("../schemas/core"),_core2=_interopRequireDefault(_core),_immutable=window.Immutable,Changes={};Changes.addMarkAtRange=function(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(!t.isCollapsed){var r=o.normalize,a=void 0===r||r,i=e.state,s=i.document,d=t.startKey,l=t.startOffset,y=t.endKey,f=t.endOffset;s.getTextsAtRange(t).forEach(function(t){var o=t.key,r=0,i=t.text.length;o==d&&(r=l),o==y&&(i=f),o==d&&o==y&&(i=f-l),e.addMarkByKey(o,r,i,n,{normalize:a})})}},Changes.deleteAtRange=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!t.isCollapsed){e.snapshotSelection();var o=n.normalize,r=void 0===o||o,a=e.state,i=t.startKey,s=t.startOffset,d=t.endKey,l=t.endOffset,y=a.document,f=y.hasVoidParent(i),c=y.hasVoidParent(d),g=y.getClosestBlock(i),u=y.getClosestBlock(d),k=0==s&&0==l&&0==f&&i==g.getFirstText().key&&d==u.getFirstText().key;if(k){var m=y.getPreviousText(d);d=m.key,l=m.text.length,c=y.hasVoidParent(d)}for(;f;){var v=y.getClosestVoid(i),h=y.getNextText(i);if(e.removeNodeByKey(v.key,{normalize:!1}),i==d)return;if(!h)return;y=e.state.document,i=h.key,s=0,f=y.hasVoidParent(i)}for(;c;){var B=y.getClosestVoid(d),z=y.getPreviousText(d);e.removeNodeByKey(B.key,{normalize:!1}),y=e.state.document,d=z.key,l=z.text.length,c=y.hasVoidParent(d)}if(i==d&&k)return void e.removeNodeByKey(g.key);if(i==d){var K=s,A=l-s;return void e.removeTextByKey(i,K,A,{normalize:r})}y=e.state.document;var C=y.getCommonAncestor(i,d),p=C.getFurthestAncestor(i),x=C.getFurthestAncestor(d);e.splitDescendantsByKey(p.key,i,s,{normalize:!1}),e.splitDescendantsByKey(x.key,d,l,{normalize:!1}),y=e.state.document,C=y.getCommonAncestor(i,d),p=C.getFurthestAncestor(i),x=C.getFurthestAncestor(d);var N=y.getNextText(d),R=C.nodes.indexOf(p),O=C.nodes.indexOf(x),_=C.nodes.slice(R+1,O+1);if(g=y.getClosestBlock(i),u=y.getClosestBlock(N.key),_.forEach(function(t){e.removeNodeByKey(t.key,{normalize:!1})}),g.key!=u.key&&k)e.removeNodeByKey(g.key,{normalize:!1}),e.removeNodeByKey(u.key,{normalize:!1});else if(g.key!=u.key){u.nodes.forEach(function(t,n){var o=g.key,r=g.nodes.size+n;e.moveNodeByKey(t.key,o,r,{normalize:!1})});var E=y.getFurthestOnlyChildAncestor(u.key)||u;e.removeNodeByKey(E.key,{normalize:!1})}r&&e.normalizeNodeByKey(C.key,_core2.default)}},Changes.deleteCharBackwardAtRange=function(e,t,n){var o=e.state,r=o.document,a=t.startKey,i=t.startOffset,s=r.getClosestBlock(a),d=s.getOffset(a),l=d+i,y=s.text,f=_string2.default.getCharOffsetBackward(y,l);e.deleteBackwardAtRange(t,f,n)},Changes.deleteLineBackwardAtRange=function(e,t,n){var o=e.state,r=o.document,a=t.startKey,i=t.startOffset,s=r.getClosestBlock(a),d=s.getOffset(a),l=d+i;e.deleteBackwardAtRange(t,l,n)},Changes.deleteWordBackwardAtRange=function(e,t,n){var o=e.state,r=o.document,a=t.startKey,i=t.startOffset,s=r.getClosestBlock(a),d=s.getOffset(a),l=d+i,y=s.text,f=_string2.default.getWordOffsetBackward(y,l);e.deleteBackwardAtRange(t,f,n)},Changes.deleteBackwardAtRange=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=o.normalize,a=void 0===r||r,i=e.state,s=i.document,d=t,l=d.startKey,y=d.focusOffset;if(t.isExpanded)return void e.deleteAtRange(t,{normalize:a});var f=s.getClosestBlock(l);if(f&&f.isVoid)return void e.removeNodeByKey(f.key,{normalize:a});if(f&&!f.isVoid&&f.isEmpty&&1!==s.nodes.size)return void e.removeNodeByKey(f.key,{normalize:a});var c=s.getClosestInline(l);if(c&&c.isVoid)return void e.removeNodeByKey(c.key,{normalize:a});if(!t.isAtStartOf(s)){var g=s.getDescendant(l);if(t.isAtStartOf(g)){var u=s.getPreviousText(g.key),k=s.getClosestBlock(u.key),m=s.getClosestInline(u.key);if(k&&k.isVoid)return void e.removeNodeByKey(k.key,{normalize:a});if(m&&m.isVoid)return void e.removeNodeByKey(m.key,{normalize:a});if(1==n&&k!=f)return t=t.merge({anchorKey:u.key,anchorOffset:u.text.length}),void e.deleteAtRange(t,{normalize:a})}if(n<y)return t=t.merge({focusOffset:y-n,isBackward:!0}),void e.deleteAtRange(t,{normalize:a});for(var v=g,h=0,B=y;n>B;){v=s.getPreviousText(v.key);var z=B+v.text.length;if(n<=z){h=z-n;break}B=z}if(s.hasVoidParent(v.key)){var K=s.getClosestVoid(v.key);v=s.getNextText(K.key),h=0}t=t.merge({focusKey:v.key,focusOffset:h,isBackward:!0}),e.deleteAtRange(t,{normalize:a})}},Changes.deleteCharForwardAtRange=function(e,t,n){var o=e.state,r=o.document,a=t.startKey,i=t.startOffset,s=r.getClosestBlock(a),d=s.getOffset(a),l=d+i,y=s.text,f=_string2.default.getCharOffsetForward(y,l);e.deleteForwardAtRange(t,f,n)},Changes.deleteLineForwardAtRange=function(e,t,n){var o=e.state,r=o.document,a=t.startKey,i=t.startOffset,s=r.getClosestBlock(a),d=s.getOffset(a),l=d+i;e.deleteForwardAtRange(t,l,n)},Changes.deleteWordForwardAtRange=function(e,t,n){var o=e.state,r=o.document,a=t.startKey,i=t.startOffset,s=r.getClosestBlock(a),d=s.getOffset(a),l=d+i,y=s.text,f=_string2.default.getWordOffsetForward(y,l);e.deleteForwardAtRange(t,f,n)},Changes.deleteForwardAtRange=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=o.normalize,a=void 0===r||r,i=e.state,s=i.document,d=t,l=d.startKey,y=d.focusOffset;if(t.isExpanded)return void e.deleteAtRange(t,{normalize:a});var f=s.getClosestBlock(l);if(f&&f.isVoid)return void e.removeNodeByKey(f.key,{normalize:a});if(f&&!f.isVoid&&f.isEmpty&&1!==s.nodes.size)return void e.removeNodeByKey(f.key,{normalize:a});var c=s.getClosestInline(l);if(c&&c.isVoid)return void e.removeNodeByKey(c.key,{normalize:a});if(!t.isAtEndOf(s)){var g=s.getDescendant(l);if(t.isAtEndOf(g)){var u=s.getNextText(g.key),k=s.getClosestBlock(u.key),m=s.getClosestInline(u.key);if(k&&k.isVoid)return void e.removeNodeByKey(k.key,{normalize:a});if(m&&m.isVoid)return void e.removeNodeByKey(m.key,{normalize:a});if(1==n&&k!=f)return t=t.merge({focusKey:u.key,focusOffset:0}),void e.deleteAtRange(t,{normalize:a})}if(n<=g.text.length-y)return t=t.merge({focusOffset:y+n}),void e.deleteAtRange(t,{normalize:a});for(var v=g,h=y,B=g.text.length-y;n>B;){v=s.getNextText(v.key);var z=B+v.text.length;if(n<=z){h=n-B;break}B=z}if(s.hasVoidParent(v.key)){var K=s.getClosestVoid(v.key);v=s.getPreviousText(K.key),h=v.text.length}t=t.merge({focusKey:v.key,focusOffset:h}),e.deleteAtRange(t,{normalize:a})}},Changes.insertBlockAtRange=function(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};n=_block2.default.create(n);var r=o.normalize,a=void 0===r||r;t.isExpanded&&(e.deleteAtRange(t),t=t.collapseToStart());var i=e.state,s=i.document,d=t,l=d.startKey,y=d.startOffset,f=s.getClosestBlock(l),c=s.getParent(f.key),g=c.nodes.indexOf(f);if(f.isVoid){var u=t.isAtEndOf(f)?1:0;e.insertNodeByKey(c.key,g+u,n,{normalize:a})}else f.isEmpty?(e.removeNodeByKey(f.key),e.insertNodeByKey(c.key,g,n,{normalize:a})):t.isAtStartOf(f)?e.insertNodeByKey(c.key,g,n,{normalize:a}):t.isAtEndOf(f)?e.insertNodeByKey(c.key,g+1,n,{normalize:a}):(e.splitDescendantsByKey(f.key,l,y,{normalize:!1}),e.insertNodeByKey(c.key,g+1,n,{normalize:a}));a&&e.normalizeNodeByKey(c.key,_core2.default)},Changes.insertFragmentAtRange=function(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=o.normalize,a=void 0===r||r;if(t.isExpanded&&(e.deleteAtRange(t,{normalize:!1}),t=t.collapseToStart()),n.nodes.size){n=n.mapDescendants(function(e){return e.regenerateKey()});var i=t,s=i.startKey,d=i.startOffset,l=e.state,y=l.document,f=y.getDescendant(s),c=y.getClosestBlock(f.key),g=c.getFurthestAncestor(f.key),u=t.isAtStartOf(c),k=y.getParent(c.key),m=k.nodes.indexOf(c),v=n.getBlocks(),h=v.first(),B=v.last();if(h==B&&h.isVoid)return void e.insertBlockAtRange(t,h,o);if(h!=B){var z=n.getFurthest(h.key,function(e){return 1==e.nodes.size}),K=z||h,A=k.nodes.indexOf(c);n=n.removeDescendant(K.key),n.nodes.forEach(function(t,n){var o=A+n+1;e.insertNodeByKey(k.key,o,t,{normalize:!1})})}if(0!=d&&e.splitDescendantsByKey(g.key,s,d,{normalize:!1}),y=e.state.document,f=y.getDescendant(s),c=y.getClosestBlock(s),g=c.getFurthestAncestor(f.key),h!=B){var C=u?g:c.getNextSibling(g.key),p=C?c.nodes.skipUntil(function(e){return e.key==C.key}):(0,_immutable.List)(),x=B.nodes.size;p.forEach(function(t,n){var o=x+n;e.moveNodeByKey(t.key,B.key,o,{normalize:!1})})}if(c.isEmpty)e.removeNodeByKey(c.key,{normalize:!1}),e.insertNodeByKey(k.key,m,h,{normalize:!1});else{var N=c.getFurthestAncestor(f.key),R=c.nodes.indexOf(N);h.nodes.forEach(function(t,n){var o=0==d?0:1,r=R+n+o;e.insertNodeByKey(c.key,r,t,{normalize:!1})})}a&&e.normalizeNodeByKey(k.key,_core2.default)}},Changes.insertInlineAtRange=function(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=o.normalize,a=void 0===r||r;n=_inline2.default.create(n),t.isExpanded&&(e.deleteAtRange(t,{normalize:!1}),t=t.collapseToStart());var i=e.state,s=i.document,d=t,l=d.startKey,y=d.startOffset,f=s.getParent(l),c=s.assertDescendant(l),g=f.nodes.indexOf(c);f.isVoid||(e.splitNodeByKey(l,y,{normalize:!1}),e.insertNodeByKey(f.key,g+1,n,{normalize:!1}),a&&e.normalizeNodeByKey(f.key,_core2.default))},Changes.insertTextAtRange=function(e,t,n,o){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},a=r.normalize,i=e.state,s=i.document,d=t.startKey,l=t.startOffset;s.getParent(d).isVoid||(t.isExpanded&&e.deleteAtRange(t,{normalize:!1}),void 0!==a&&(a=t.isExpanded),e.insertTextByKey(d,l,n,o,{normalize:a}))},Changes.removeMarkAtRange=function(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(!t.isCollapsed){var r=o.normalize,a=void 0===r||r,i=e.state,s=i.document,d=s.getTextsAtRange(t),l=t.startKey,y=t.startOffset,f=t.endKey,c=t.endOffset;d.forEach(function(t){var o=t.key,r=0,i=t.text.length;o==l&&(r=y),o==f&&(i=c),o==l&&o==f&&(i=c-y),e.removeMarkByKey(o,r,i,n,{normalize:a})})}},Changes.setBlockAtRange=function(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=o.normalize,a=void 0===r||r;e.state.document.getBlocksAtRange(t).forEach(function(t){e.setNodeByKey(t.key,n,{normalize:a})})},Changes.setInlineAtRange=function(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=o.normalize,a=void 0===r||r;e.state.document.getInlinesAtRange(t).forEach(function(t){e.setNodeByKey(t.key,n,{normalize:a})})},Changes.splitBlockAtRange=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=o.normalize,a=void 0===r||r;t.isExpanded&&(e.deleteAtRange(t,{normalize:a}),t=t.collapseToStart());for(var i=t,s=i.startKey,d=i.startOffset,l=e.state,y=l.document,f=y.assertDescendant(s),c=y.getClosestBlock(f.key),g=0;c&&"block"==c.kind&&g<n;)f=c,c=y.getClosestBlock(c.key),g++;e.splitDescendantsByKey(f.key,s,d,{normalize:a})},Changes.splitInlineAtRange=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1/0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=o.normalize,a=void 0===r||r;t.isExpanded&&(e.deleteAtRange(t,{normalize:a}),t=t.collapseToStart());for(var i=t,s=i.startKey,d=i.startOffset,l=e.state,y=l.document,f=y.assertDescendant(s),c=y.getClosestInline(f.key),g=0;c&&"inline"==c.kind&&g<n;)f=c,c=y.getClosestInline(c.key),g++;e.splitDescendantsByKey(f.key,s,d,{normalize:a})},Changes.toggleMarkAtRange=function(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(!t.isCollapsed){n=_mark2.default.create(n);var r=o.normalize,a=void 0===r||r;e.state.document.getActiveMarksAtRange(t).some(function(e){return e.equals(n)})?e.removeMarkAtRange(t,n,{normalize:a}):e.addMarkAtRange(t,n,{normalize:a})}},Changes.unwrapBlockAtRange=function(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};n=_node2.default.createProperties(n);var r=o.normalize,a=void 0===r||r,i=e.state,s=i.document,d=s.getBlocksAtRange(t);d.map(function(e){return s.getClosest(e.key,function(e){return"block"==e.kind&&((null==n.type||e.type==n.type)&&((null==n.isVoid||e.isVoid==n.isVoid)&&!(null!=n.data&&!e.data.isSuperset(n.data))))})}).filter(function(e){return e}).toOrderedSet().toList().forEach(function(t){var n=t.nodes.first(),o=t.nodes.last(),r=s.getParent(t.key),a=r.nodes.indexOf(t),i=t.nodes.filter(function(e){return d.some(function(t){return e==t||e.hasDescendant(t.key)})}),l=i.first(),y=i.last();if(n==l&&o==y)t.nodes.forEach(function(t,n){e.moveNodeByKey(t.key,r.key,a+n,{normalize:!1})}),e.removeNodeByKey(t.key,{normalize:!1});else if(o==y)t.nodes.skipUntil(function(e){return e==l}).forEach(function(t,n){e.moveNodeByKey(t.key,r.key,a+1+n,{normalize:!1})});else if(n==l)t.nodes.takeUntil(function(e){return e==y}).push(y).forEach(function(t,n){e.moveNodeByKey(t.key,r.key,a+n,{normalize:!1})});else{var f=l.getFirstText();e.splitDescendantsByKey(t.key,f.key,0,{normalize:!1}),s=e.state.document,i.forEach(function(t,n){if(0==n){var o=t;t=s.getNextBlock(t.key),e.removeNodeByKey(o.key,{normalize:!1})}e.moveNodeByKey(t.key,r.key,a+1+n,{normalize:!1})})}}),a&&e.normalizeDocument(_core2.default)},Changes.unwrapInlineAtRange=function(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};n=_node2.default.createProperties(n);var r=o.normalize,a=void 0===r||r,i=e.state,s=i.document;s.getTextsAtRange(t).map(function(e){return s.getClosest(e.key,function(e){return!("inline"!=e.kind||null!=n.type&&e.type!=n.type||null!=n.isVoid&&e.isVoid!=n.isVoid||null!=n.data&&!e.data.isSuperset(n.data))})}).filter(function(e){return e}).toOrderedSet().toList().forEach(function(t){var n=e.state.document.getParent(t.key),o=n.nodes.indexOf(t);t.nodes.forEach(function(t,r){e.moveNodeByKey(t.key,n.key,o+r,{normalize:!1})})}),a&&e.normalizeDocument(_core2.default)},Changes.wrapBlockAtRange=function(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};n=_block2.default.create(n),n=n.set("nodes",n.nodes.clear());var r=o.normalize,a=void 0===r||r,i=e.state,s=i.document,d=s.getBlocksAtRange(t),l=d.first(),y=d.last(),f=void 0,c=void 0,g=void 0;if(1===d.length?(f=s.getParent(l.key),c=d):f=s.getClosest(l.key,function(e){return!!s.getClosest(y.key,function(t){return e==t})}),null==f&&(f=s),null==c){var u=f.nodes.reduce(function(e,t,n){return(t==l||t.hasDescendant(l.key))&&(e[0]=n),(t==y||t.hasDescendant(y.key))&&(e[1]=n),e},[]);g=u[0],c=f.nodes.slice(u[0],u[1]+1)}null==g&&(g=f.nodes.indexOf(c.first())),e.insertNodeByKey(f.key,g,n,{normalize:!1}),c.forEach(function(t,o){e.moveNodeByKey(t.key,n.key,o,{normalize:!1})}),a&&e.normalizeNodeByKey(f.key,_core2.default)},Changes.wrapInlineAtRange=function(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=e.state,a=r.document,i=o.normalize,s=void 0===i||i,d=t.startKey,l=t.startOffset,y=t.endKey,f=t.endOffset;if(t.isCollapsed){var c=a.getClosestInline(d);if(!c.isVoid)return;return e.wrapInlineByKey(c.key,n,o)}n=_inline2.default.create(n),n=n.set("nodes",n.nodes.clear());var g=a.getBlocksAtRange(t),u=a.getClosestBlock(d),k=a.getClosestBlock(y),m=u.getFurthestAncestor(d),v=k.getFurthestAncestor(y);e.splitDescendantsByKey(v.key,y,f,{normalize:!1}),e.splitDescendantsByKey(m.key,d,l,{normalize:!1}),a=e.state.document,u=a.getDescendant(u.key),k=a.getDescendant(k.key),m=u.getFurthestAncestor(d),v=k.getFurthestAncestor(y);var h=u.nodes.indexOf(m),B=k.nodes.indexOf(v);if(u==k){a=e.state.document,u=a.getClosestBlock(d),m=u.getFurthestAncestor(d);var z=a.getNextSibling(m.key),K=u.nodes.indexOf(z),A=d==y?z:u.getFurthestAncestor(y),C=u.nodes.skipUntil(function(e){return e==z}).takeUntil(function(e){return e==A}).push(A),p=n.regenerateKey();e.insertNodeByKey(u.key,K,p,{normalize:!1}),C.forEach(function(t,n){e.moveNodeByKey(t.key,p.key,n,{normalize:!1})}),s&&e.normalizeNodeByKey(u.key,_core2.default)}else{var x=u.nodes.slice(h+1),N=k.nodes.slice(0,B+1),R=n.regenerateKey(),O=n.regenerateKey();e.insertNodeByKey(u.key,h-1,R,{normalize:!1}),e.insertNodeByKey(k.key,B,O,{normalize:!1}),x.forEach(function(t,n){e.moveNodeByKey(t.key,R.key,n,{normalize:!1})}),N.forEach(function(t,n){e.moveNodeByKey(t.key,O.key,n,{normalize:!1})}),s&&e.normalizeNodeByKey(u.key,_core2.default).normalizeNodeByKey(k.key,_core2.default),g.slice(1,-1).forEach(function(t){var o=n.regenerateKey();e.insertNodeByKey(t.key,0,o,{normalize:!1}),t.nodes.forEach(function(t,n){e.moveNodeByKey(t.key,o.key,n,{normalize:!1})}),s&&e.normalizeNodeByKey(t.key,_core2.default)})}},Changes.wrapTextAtRange=function(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},a=r.normalize,i=void 0===a||a,s=t.startKey,d=t.endKey,l=t.collapseToStart(),y=t.collapseToEnd();s==d&&(y=y.move(n.length)),e.insertTextAtRange(l,n,[],{normalize:i}),e.insertTextAtRange(y,o,[],{normalize:i})},exports.default=Changes},{"../models/block":237,"../models/inline":243,"../models/mark":244,"../models/node":245,"../schemas/core":256,"../utils/string":279}],220:[function(require,module,exports){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}Object.defineProperty(exports,"__esModule",{value:!0});var _block=require("../models/block"),_block2=_interopRequireDefault(_block),_inline=require("../models/inline"),_inline2=_interopRequireDefault(_inline),_mark=require("../models/mark"),_mark2=_interopRequireDefault(_mark),_node=require("../models/node"),_node2=_interopRequireDefault(_node),_core=require("../schemas/core"),_core2=_interopRequireDefault(_core),Changes={};Changes.addMarkByKey=function(e,t,a,o,n){var r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};n=_mark2.default.create(n);var i=r.normalize,d=void 0===i||i,y=e.state,s=y.document,l=s.getPath(t),m=s.getNode(t),u=m.getRanges(),g=[],c=a,f=a+o,v=0;if(u.forEach(function(e){var t=v,a=t+e.text.length;if(v+=e.text.length,!(a<c||f<t||e.marks.has(n))){var o=Math.max(t,c),r=Math.min(a,f);g.push({type:"add_mark",path:l,offset:o,length:r-o,mark:n})}}),e.applyOperations(g),d){var h=s.getParent(t);e.normalizeNodeByKey(h.key,_core2.default)}},Changes.insertFragmentByKey=function(e,t,a,o){var n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},r=n.normalize,i=void 0===r||r;o.nodes.forEach(function(o,n){e.insertNodeByKey(t,a+n,o)}),i&&e.normalizeNodeByKey(t,_core2.default)},Changes.insertNodeByKey=function(e,t,a,o){var n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},r=n.normalize,i=void 0===r||r,d=e.state,y=d.document,s=y.getPath(t);e.applyOperation({type:"insert_node",path:[].concat(_toConsumableArray(s),[a]),node:o}),i&&e.normalizeNodeByKey(t,_core2.default)},Changes.insertTextByKey=function(e,t,a,o,n){var r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},i=r.normalize,d=void 0===i||i,y=e.state,s=y.document,l=s.getPath(t),m=s.getNode(t);if(n=n||m.getMarksAtIndex(a),e.applyOperation({type:"insert_text",path:l,offset:a,text:o,marks:n}),d){var u=s.getParent(t);e.normalizeNodeByKey(u.key,_core2.default)}},Changes.mergeNodeByKey=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=a.normalize,n=void 0===o||o,r=e.state,i=r.document,d=i.getPath(t),y=i.getPreviousSibling(t);if(!y)throw new Error('Unable to merge node with key "'+t+'", no previous key.');var s="text"==y.kind?y.text.length:y.nodes.size;if(e.applyOperation({type:"merge_node",path:d,position:s}),n){var l=i.getParent(t);e.normalizeNodeByKey(l.key,_core2.default)}},Changes.moveNodeByKey=function(e,t,a,o){var n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},r=n.normalize,i=void 0===r||r,d=e.state,y=d.document,s=y.getPath(t),l=y.getPath(a);if(e.applyOperation({type:"move_node",path:s,newPath:[].concat(_toConsumableArray(l),[o])}),i){var m=y.getCommonAncestor(t,a);e.normalizeNodeByKey(m.key,_core2.default)}},Changes.removeMarkByKey=function(e,t,a,o,n){var r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};n=_mark2.default.create(n);var i=r.normalize,d=void 0===i||i,y=e.state,s=y.document,l=s.getPath(t),m=s.getNode(t),u=m.getRanges(),g=[],c=a,f=a+o,v=0;if(u.forEach(function(e){var t=v,a=t+e.text.length;if(v+=e.text.length,!(a<c||f<t)&&e.marks.has(n)){var o=Math.max(t,c),r=Math.min(a,f);g.push({type:"remove_mark",path:l,offset:o,length:r-o,mark:n})}}),e.applyOperations(g),d){var h=s.getParent(t);e.normalizeNodeByKey(h.key,_core2.default)}},Changes.removeNodeByKey=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=a.normalize,n=void 0===o||o,r=e.state,i=r.document,d=i.getPath(t),y=i.getNode(t);if(e.applyOperation({type:"remove_node",path:d,node:y}),n){var s=i.getParent(t);e.normalizeNodeByKey(s.key,_core2.default)}},Changes.removeTextByKey=function(e,t,a,o){var n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},r=n.normalize,i=void 0===r||r,d=e.state,y=d.document,s=y.getPath(t),l=y.getNode(t),m=l.getRanges(),u=l.text,g=[],c=a,f=a+o,v=0;if(m.forEach(function(e){var t=v,a=t+e.text.length;if(v+=e.text.length,!(a<c||f<t)){var o=Math.max(t,c),n=Math.min(a,f),r=u.slice(o,n);g.push({type:"remove_text",path:s,offset:o,text:r,marks:e.marks})}}),e.applyOperations(g.reverse()),i){var h=y.getClosestBlock(t);e.normalizeNodeByKey(h.key,_core2.default)}},Changes.setMarkByKey=function(e,t,a,o,n,r){var i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:{};n=_mark2.default.create(n),r=_mark2.default.createProperties(r);var d=i.normalize,y=void 0===d||d,s=e.state,l=s.document,m=l.getPath(t);if(e.applyOperation({type:"set_mark",path:m,offset:a,length:o,mark:n,properties:r}),y){var u=l.getParent(t);e.normalizeNodeByKey(u.key,_core2.default)}},Changes.setNodeByKey=function(e,t,a){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};a=_node2.default.createProperties(a);var n=o.normalize,r=void 0===n||n,i=e.state,d=i.document,y=d.getPath(t),s=d.getNode(t);e.applyOperation({type:"set_node",path:y,node:s,properties:a}),r&&e.normalizeNodeByKey(s.key,_core2.default)},Changes.splitNodeByKey=function(e,t,a){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=o.normalize,r=void 0===n||n,i=e.state,d=i.document,y=d.getPath(t);if(e.applyOperation({type:"split_node",path:y,position:a}),r){var s=d.getParent(t);e.normalizeNodeByKey(s.key,_core2.default)}},Changes.splitDescendantsByKey=function(e,t,a,o){var n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};if(t==a)return void e.splitNodeByKey(a,o,n);var r=n.normalize,i=void 0===r||r,d=e.state,y=d.document,s=y.getNode(a),l=y.getAncestors(a),m=l.skipUntil(function(e){return e.key==t}).reverse().unshift(s),u=void 0;if(m.forEach(function(t){var a=u?t.nodes.indexOf(u)+1:o;u=t,e.splitNodeByKey(t.key,a,{normalize:!1})}),i){var g=y.getParent(t);e.normalizeNodeByKey(g.key,_core2.default)}},Changes.unwrapInlineByKey=function(e,t,a,o){var n=e.state,r=n.document,i=n.selection,d=r.assertDescendant(t),y=d.getFirstText(),s=d.getLastText(),l=i.moveToRangeOf(y,s);e.unwrapInlineAtRange(l,a,o)},Changes.unwrapBlockByKey=function(e,t,a,o){var n=e.state,r=n.document,i=n.selection,d=r.assertDescendant(t),y=d.getFirstText(),s=d.getLastText(),l=i.moveToRangeOf(y,s);e.unwrapBlockAtRange(l,a,o)},Changes.unwrapNodeByKey=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=a.normalize,n=void 0===o||o,r=e.state,i=r.document,d=i.getParent(t),y=d.getChild(t),s=d.nodes.indexOf(y),l=0===s,m=s===d.nodes.size-1,u=i.getParent(d.key),g=u.nodes.indexOf(d);1===d.nodes.size?(e.moveNodeByKey(t,u.key,g,{normalize:!1}),e.removeNodeByKey(d.key,a)):l?e.moveNodeByKey(t,u.key,g,a):m?e.moveNodeByKey(t,u.key,g+1,a):(e.splitNodeByKey(d.key,s,{normalize:!1}),e.moveNodeByKey(t,u.key,g+1,{normalize:!1}),n&&e.normalizeNodeByKey(u.key,_core2.default))},Changes.wrapInlineByKey=function(e,t,a,o){a=_inline2.default.create(a),a=a.set("nodes",a.nodes.clear());var n=e.state.document,r=n.assertDescendant(t),i=n.getParent(r.key),d=i.nodes.indexOf(r);e.insertNodeByKey(i.key,d,a,{normalize:!1}),e.moveNodeByKey(r.key,a.key,0,o)},Changes.wrapBlockByKey=function(e,t,a,o){a=_block2.default.create(a),a=a.set("nodes",a.nodes.clear());var n=e.state.document,r=n.assertDescendant(t),i=n.getParent(r.key),d=i.nodes.indexOf(r);e.insertNodeByKey(i.key,d,a,{normalize:!1}),e.moveNodeByKey(r.key,a.key,0,o)},exports.default=Changes},{"../models/block":237,"../models/inline":243,"../models/mark":244,"../models/node":245,"../schemas/core":256}],221:[function(require,module,exports){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_atCurrentRange=require("./at-current-range"),_atCurrentRange2=_interopRequireDefault(_atCurrentRange),_atRange=require("./at-range"),_atRange2=_interopRequireDefault(_atRange),_byKey=require("./by-key"),_byKey2=_interopRequireDefault(_byKey),_normalize=require("./normalize"),_normalize2=_interopRequireDefault(_normalize),_onHistory=require("./on-history"),_onHistory2=_interopRequireDefault(_onHistory),_onSelection=require("./on-selection"),_onSelection2=_interopRequireDefault(_onSelection),_onState=require("./on-state"),_onState2=_interopRequireDefault(_onState);exports.default=_extends({},_atCurrentRange2.default,_atRange2.default,_byKey2.default,_normalize2.default,_onHistory2.default,_onSelection2.default,_onState2.default)},{"./at-current-range":218,"./at-range":219,"./by-key":220,"./normalize":222,"./on-history":223,"./on-selection":224,"./on-state":225}],222:[function(require,module,exports){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function normalizeNodeAndChildren(e,n,a){if("text"==n.kind)return void normalizeNode(e,n,a);for(var t=n.nodes.toArray().map(function(e){return e.key});t.length;)!function(){for(var o=e.operations.length,r=void 0,i=(new _immutable.Set).asMutable();r=t[0];){var u=n.getChild(r);normalizeNodeAndChildren(e,u,a),i.add(r),t.shift()}i=i.asImmutable(),e.operations.length!=o&&(n=refindNode(e,n),n.nodes.forEach(function(e){i.has(e.key)||t.unshift(e.key)}))}();n&&normalizeNode(e,n,a)}function refindNode(e,n){var a=e.state,t=a.document;return"document"==n.kind?t:t.getDescendant(n.key)}function normalizeNode(e,n,a){function t(e,n){var i=n.validate(a);if(i){var u=i.value;if(i.rule.normalize(e,n,u),n=refindNode(e,n)){if(++r>o)throw new Error("A schema rule could not be validated after sufficient iterations. This is usually due to a `rule.validate` or `rule.normalize` function of a schema being incorrectly written, causing an infinite loop.");t(e,n)}}}var o=a.rules.length,r=0;t(e,n)}function assertSchema(e){if(!_schema2.default.isSchema(e))throw null==e?new Error("You must pass a `schema` object."):new Error("You passed an invalid `schema` object: "+e+".")}Object.defineProperty(exports,"__esModule",{value:!0});var _schema=require("../models/schema"),_schema2=_interopRequireDefault(_schema),_immutable=window.Immutable,Changes={};Changes.normalize=function(e,n){e.normalizeDocument(n)},Changes.normalizeDocument=function(e,n){var a=e.state,t=a.document;e.normalizeNodeByKey(t.key,n)},Changes.normalizeNodeByKey=function(e,n,a){if(assertSchema(a),a.hasValidators){normalizeNodeAndChildren(e,e.state.document.assertNode(n),a)}},exports.default=Changes},{"../models/schema":247}],223:[function(require,module,exports){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var _invert=require("../operations/invert"),_invert2=_interopRequireDefault(_invert),Changes={};Changes.redo=function(e){var t=e.state,s=t,r=s.history;if(r){var o=r,a=o.undos,n=o.redos,i=n.peek();i&&(n=n.pop(),a=a.push(i),i.forEach(function(t){e.applyOperation(t,{save:!1})}),t=e.state,r=r.set("undos",a).set("redos",n),t=t.set("history",r),e.state=t)}},Changes.undo=function(e){var t=e.state,s=t,r=s.history;if(r){var o=r,a=o.undos,n=o.redos,i=a.peek();i&&(a=a.pop(),n=n.push(i),i.slice().reverse().map(_invert2.default).forEach(function(t){e.applyOperation(t,{save:!1})}),t=e.state,r=r.set("undos",a).set("redos",n),t=t.set("history",r),e.state=t)}},exports.default=Changes},{"../operations/invert":254}],224:[function(require,module,exports){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var _slicedToArray=function(){function e(e,t){var o=[],n=!0,a=!1,r=void 0;try{for(var s,c=e[Symbol.iterator]();!(n=(s=c.next()).done)&&(o.push(s.value),!t||o.length!==t);n=!0);}catch(e){a=!0,r=e}finally{try{!n&&c.return&&c.return()}finally{if(a)throw r}}return o}return function(t,o){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,o);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_selection=require("../models/selection"),_selection2=_interopRequireDefault(_selection),_isEmpty=require("is-empty"),_isEmpty2=_interopRequireDefault(_isEmpty),_logger=require("../utils/logger"),_logger2=_interopRequireDefault(_logger),_pick=require("lodash/pick"),_pick2=_interopRequireDefault(_pick),Changes={};Changes.select=function(e,t){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};t=_selection2.default.createProperties(t);var n=o.snapshot,a=void 0!==n&&n,r=e.state,s=r.document,c=r.selection,l={},i=c.toJSON(),f=c.merge(t).normalize(s);t=(0,_pick2.default)(f,Object.keys(t));for(var u in t)0==a&&t[u]==i[u]||(l[u]=t[u]);i.anchorPath=null==i.anchorKey?null:s.getPath(i.anchorKey),delete i.anchorKey,l.anchorKey&&(l.anchorPath=null==l.anchorKey?null:s.getPath(l.anchorKey),delete l.anchorKey),i.focusPath=null==i.focusKey?null:s.getPath(i.focusKey),delete i.focusKey,l.focusKey&&(l.focusPath=null==l.focusKey?null:s.getPath(l.focusKey),delete l.focusKey)
;var d=["anchorPath","anchorOffset","focusPath","focusOffset"].some(function(e){return l.hasOwnProperty(e)});i.marks&&t.marks==i.marks&&d&&(l.marks=null),(0,_isEmpty2.default)(l)||e.applyOperation({type:"set_selection",properties:l,selection:i},a?{skip:!1,merge:!1}:{})},Changes.selectAll=function(e){var t=e.state,o=t.document,n=t.selection,a=n.moveToRangeOf(o);e.select(a)},Changes.snapshotSelection=function(e){var t=e.state,o=t.selection;e.select(o,{snapshot:!0})},Changes.moveTo=function(e,t){_logger2.default.deprecate("0.17.0","The `moveTo()` change is deprecated, please use `select()` instead."),e.select(t)},Changes.unsetMarks=function(e){_logger2.default.deprecate("0.17.0","The `unsetMarks()` change is deprecated."),e.select({marks:null})},Changes.unsetSelection=function(e){_logger2.default.deprecate("0.17.0","The `unsetSelection()` change is deprecated, please use `deselect()` instead."),e.select({anchorKey:null,anchorOffset:0,focusKey:null,focusOffset:0,isFocused:!1,isBackward:!1})};var PROXY_TRANSFORMS=["blur","collapseTo","collapseToAnchor","collapseToEnd","collapseToEndOf","collapseToFocus","collapseToStart","collapseToStartOf","extend","extendTo","extendToEndOf","extendToStartOf","flip","focus","move","moveAnchor","moveAnchorOffsetTo","moveAnchorTo","moveAnchorToEndOf","moveAnchorToStartOf","moveEnd","moveEndOffsetTo","moveEndTo","moveFocus","moveFocusOffsetTo","moveFocusTo","moveFocusToEndOf","moveFocusToStartOf","moveOffsetsTo","moveStart","moveStartOffsetTo","moveStartTo","moveToEnd","moveToEndOf","moveToRangeOf","moveToStart","moveToStartOf","deselect"];PROXY_TRANSFORMS.forEach(function(e){Changes[e]=function(t){for(var o=arguments.length,n=Array(o>1?o-1:0),a=1;a<o;a++)n[a-1]=arguments[a];var r="deselect"!=e,s=t.state,c=s.document,l=s.selection,i=l[e].apply(l,n);r&&(i=i.normalize(c)),t.select(i)}});var PREFIXES=["moveTo","collapseTo","extendTo"],DIRECTIONS=["Next","Previous"],KINDS=["Block","Inline","Text"];PREFIXES.forEach(function(e){var t=["Start","End"];"moveTo"==e&&t.push("Range"),t.forEach(function(t){DIRECTIONS.forEach(function(o){KINDS.forEach(function(n){var a="get"+o+n,r="get"+n+"sAtRange",s="Next"==o?"last":"first",c=""+e+t+"Of";Changes[""+c+o+n]=function(e){var t=e.state,o=t.document,n=t.selection,l=o[r](n),i=l[s](),f=o[a](i.key);if(f){var u=n[c](f);e.select(u)}}})})})});var DEPRECATED_TRANSFORMS=[["extendBackward","extend","The `extendBackward(n)` change is deprecated, please use `extend(n)` instead with a negative offset."],["extendForward","extend","The `extendForward(n)` change is deprecated, please use `extend(n)` instead."],["moveBackward","move","The `moveBackward(n)` change is deprecated, please use `move(n)` instead with a negative offset."],["moveForward","move","The `moveForward(n)` change is deprecated, please use `move(n)` instead."],["moveStartOffset","moveStart","The `moveStartOffset(n)` change is deprecated, please use `moveStart(n)` instead."],["moveEndOffset","moveEnd","The `moveEndOffset(n)` change is deprecated, please use `moveEnd()` instead."],["moveToOffsets","moveOffsetsTo","The `moveToOffsets()` change is deprecated, please use `moveOffsetsTo()` instead."],["flipSelection","flip","The `flipSelection()` change is deprecated, please use `flip()` instead."]];DEPRECATED_TRANSFORMS.forEach(function(e){var t=_slicedToArray(e,3),o=t[0],n=t[1],a=t[2];Changes[o]=function(e){for(var t=arguments.length,o=Array(t>1?t-1:0),r=1;r<t;r++)o[r-1]=arguments[r];_logger2.default.deprecate("0.17.0",a);var s=e.state,c=s.document,l=s.selection,i=l[n].apply(l,o).normalize(c);e.select(i)}}),exports.default=Changes},{"../models/selection":248,"../utils/logger":271,"is-empty":64,"lodash/pick":200}],225:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var Changes={};Changes.setIsNative=function(e,t){var a=e.state;a=a.set("isNative",t),e.state=a},Changes.setData=function(e,t){var a=e.state,s=a.data;e.applyOperation({type:"set_data",properties:t,data:s})},exports.default=Changes},{}],226:[function(require,module,exports){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(exports,"__esModule",{value:!0});var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},_createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),_debug=require("debug"),_debug2=_interopRequireDefault(_debug),_react=window.React,_react2=_interopRequireDefault(_react),_propTypes=require("prop-types"),_propTypes2=_interopRequireDefault(_propTypes),_getWindow=require("get-window"),_getWindow2=_interopRequireDefault(_getWindow),_keycode=require("keycode"),_keycode2=_interopRequireDefault(_keycode),_transferTypes=require("../constants/transfer-types"),_transferTypes2=_interopRequireDefault(_transferTypes),_base=require("../serializers/base-64"),_base2=_interopRequireDefault(_base),_node=require("./node"),_node2=_interopRequireDefault(_node),_selection=require("../models/selection"),_selection2=_interopRequireDefault(_selection),_propTypes3=require("../utils/prop-types"),_propTypes4=_interopRequireDefault(_propTypes3),_extendSelection=require("../utils/extend-selection"),_extendSelection2=_interopRequireDefault(_extendSelection),_findClosestNode=require("../utils/find-closest-node"),_findClosestNode2=_interopRequireDefault(_findClosestNode),_findDeepestNode=require("../utils/find-deepest-node"),_findDeepestNode2=_interopRequireDefault(_findDeepestNode),_getHtmlFromNativePaste=require("../utils/get-html-from-native-paste"),_getHtmlFromNativePaste2=_interopRequireDefault(_getHtmlFromNativePaste),_getPoint=require("../utils/get-point"),_getPoint2=_interopRequireDefault(_getPoint),_getTransferData=require("../utils/get-transfer-data"),_getTransferData2=_interopRequireDefault(_getTransferData),_setTransferData=require("../utils/set-transfer-data"),_setTransferData2=_interopRequireDefault(_setTransferData),_environment=require("../constants/environment"),debug=(0,_debug2.default)("slate:content"),Content=function(e){function t(e){_classCallCheck(this,t);var n=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return _initialiseProps.call(n),n.tmp={},n.tmp.compositions=0,n.tmp.forces=0,n}return _inherits(t,e),_createClass(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.className,o=t.readOnly,r=t.state,i=t.tabIndex,s=t.role,a=t.tagName,u=a,p=r.document,f=r.selection,d=p.getSelectionIndexes(f,f.isFocused),l=p.nodes.toArray().map(function(t,n){var o=!!d&&d.start<=n&&n<d.end;return e.renderNode(t,o)}),c=_extends({outline:"none",whiteSpace:"pre-wrap",wordWrap:"break-word"},o?{}:{WebkitUserModify:"read-write-plaintext-only"},t.style),g=!_environment.IS_FIREFOX&&t.spellCheck;return debug("render",{props:t}),_react2.default.createElement(u,{"data-slate-editor":!0,key:this.tmp.forces,ref:this.ref,"data-key":p.key,contentEditable:!o,suppressContentEditableWarning:!0,className:n,onBeforeInput:this.onBeforeInput,onBlur:this.onBlur,onFocus:this.onFocus,onCompositionEnd:this.onCompositionEnd,onCompositionStart:this.onCompositionStart,onCopy:this.onCopy,onCut:this.onCut,onDragEnd:this.onDragEnd,onDragOver:this.onDragOver,onDragStart:this.onDragStart,onDrop:this.onDrop,onInput:this.onInput,onKeyDown:this.onKeyDown,onKeyUp:this.onKeyUp,onPaste:this.onPaste,onSelect:this.onSelect,autoCorrect:t.autoCorrect,spellCheck:g,style:c,role:o?null:s||"textbox",tabIndex:i,"data-gramm":!1},l,this.props.children)}}]),t}(_react2.default.Component);Content.propTypes={autoCorrect:_propTypes2.default.bool.isRequired,autoFocus:_propTypes2.default.bool.isRequired,children:_propTypes2.default.array.isRequired,className:_propTypes2.default.string,editor:_propTypes2.default.object.isRequired,onBeforeInput:_propTypes2.default.func.isRequired,onBlur:_propTypes2.default.func.isRequired,onCopy:_propTypes2.default.func.isRequired,onCut:_propTypes2.default.func.isRequired,onDrop:_propTypes2.default.func.isRequired,onFocus:_propTypes2.default.func.isRequired,onKeyDown:_propTypes2.default.func.isRequired,onKeyUp:_propTypes2.default.func.isRequired,onPaste:_propTypes2.default.func.isRequired,onSelect:_propTypes2.default.func.isRequired,readOnly:_propTypes2.default.bool.isRequired,role:_propTypes2.default.string,schema:_propTypes4.default.schema.isRequired,spellCheck:_propTypes2.default.bool.isRequired,state:_propTypes4.default.state.isRequired,style:_propTypes2.default.object,tabIndex:_propTypes2.default.number,tagName:_propTypes2.default.string},Content.defaultProps={style:{},tagName:"div"};var _initialiseProps=function(){var e=this;this.shouldComponentUpdate=function(t,n){return t.readOnly!=e.props.readOnly||!t.state.isNative&&(t.className!=e.props.className||t.schema!=e.props.schema||t.autoCorrect!=e.props.autoCorrect||t.spellCheck!=e.props.spellCheck||t.state!=e.props.state||t.style!=e.props.style)},this.componentDidMount=function(){e.updateSelection(),e.props.autoFocus&&e.element.focus()},this.componentDidUpdate=function(){e.updateSelection()},this.updateSelection=function(){var t=e.props,n=t.editor,o=t.state,r=o.document,i=o.selection,s=(0,_getWindow2.default)(e.element),a=s.getSelection();if(a.rangeCount||!i.isBlurred){if(i.isBlurred){if(!e.isInEditor(a.anchorNode))return;return a.removeAllRanges(),e.element.blur(),void debug("updateSelection",{selection:i,native:a})}if(!i.isUnset){var u=o.anchorText,p=o.focusText,f=i.anchorKey,d=i.anchorOffset,l=i.focusKey,c=i.focusOffset,g=n.getSchema(),_=r.getDescendantDecorators(f,g),y=r.getDescendantDecorators(l,g),m=u.getRanges(_),h=p.getRanges(y),v=0,C=0,D=void 0,b=void 0,S=void 0,T=void 0;m.forEach(function(e,t,n){var o=e.text.length;if(!((v+=o)<d))return D=t,S=d-(v-o),!1}),h.forEach(function(e,t,n){var o=e.text.length;if(!((C+=o)<c))return b=t,T=c-(C-o),!1});var q=e.element.querySelector('[data-offset-key="'+f+"-"+D+'"]'),I=e.element.querySelector('[data-offset-key="'+l+"-"+b+'"]'),k=(0,_findDeepestNode2.default)(q),O=(0,_findDeepestNode2.default)(I);if(k!=a.anchorNode||S!=a.anchorOffset||O!=a.focusNode||T!=a.focusOffset){e.tmp.isSelecting=!0,a.removeAllRanges();var R=s.document.createRange();R.setStart(k,S),a.addRange(R),(0,_extendSelection2.default)(a,O,T),setTimeout(function(){_environment.IS_FIREFOX&&e.element.focus(),e.tmp.isSelecting=!1}),debug("updateSelection",{selection:i,native:a})}}}},this.ref=function(t){e.element=t},this.isInEditor=function(t){var n=e.element,o=3===t.nodeType?t.parentNode:t;return o.isContentEditable&&(o===n||(0,_findClosestNode2.default)(o,"[data-slate-editor]")===n)},this.onBeforeInput=function(t){if(!e.props.readOnly&&e.isInEditor(t.target)){var n={};debug("onBeforeInput",{event:t,data:n}),e.props.onBeforeInput(t,n)}},this.onBlur=function(t){if(!e.props.readOnly&&!e.tmp.isCopying&&e.isInEditor(t.target)){if((0,_getWindow2.default)(e.element).document.activeElement!=e.element){var n={};debug("onBlur",{event:t,data:n}),e.props.onBlur(t,n)}}},this.onFocus=function(t){if(!e.props.readOnly&&!e.tmp.isCopying&&e.isInEditor(t.target)){if(_environment.IS_FIREFOX&&t.target!=e.element)return void e.element.focus();var n={};debug("onFocus",{event:t,data:n}),e.props.onFocus(t,n)}},this.onCompositionStart=function(t){e.isInEditor(t.target)&&(e.tmp.isComposing=!0,e.tmp.compositions++,debug("onCompositionStart",{event:t}))},this.onCompositionEnd=function(t){if(e.isInEditor(t.target)){e.tmp.forces++;var n=e.tmp.compositions;setTimeout(function(){e.tmp.compositions>n||(e.tmp.isComposing=!1)}),debug("onCompositionEnd",{event:t})}},this.onCopy=function(t){if(e.isInEditor(t.target)){var n=(0,_getWindow2.default)(t.target);e.tmp.isCopying=!0,n.requestAnimationFrame(function(){e.tmp.isCopying=!1});var o=e.props.state,r={};r.type="fragment",r.fragment=o.fragment,debug("onCopy",{event:t,data:r}),e.props.onCopy(t,r)}},this.onCut=function(t){if(!e.props.readOnly&&e.isInEditor(t.target)){var n=(0,_getWindow2.default)(t.target);e.tmp.isCopying=!0,n.requestAnimationFrame(function(){e.tmp.isCopying=!1});var o=e.props.state,r={};r.type="fragment",r.fragment=o.fragment,debug("onCut",{event:t,data:r}),e.props.onCut(t,r)}},this.onDragEnd=function(t){e.isInEditor(t.target)&&(e.tmp.isDragging=!1,e.tmp.isInternalDrag=null,debug("onDragEnd",{event:t}))},this.onDragOver=function(t){e.isInEditor(t.target)&&(e.tmp.isDragging||(e.tmp.isDragging=!0,e.tmp.isInternalDrag=!1,debug("onDragOver",{event:t})))},this.onDragStart=function(t){if(e.isInEditor(t.target)){e.tmp.isDragging=!0,e.tmp.isInternalDrag=!0;var n=t.nativeEvent.dataTransfer;if("node"!=(0,_getTransferData2.default)(n).type){var o=e.props.state,r=o.fragment,i=_base2.default.serializeNode(r);(0,_setTransferData2.default)(n,_transferTypes2.default.FRAGMENT,i),debug("onDragStart",{event:t})}}},this.onDrop=function(t){if(t.preventDefault(),!e.props.readOnly&&e.isInEditor(t.target)){var n=(0,_getWindow2.default)(t.target),o=e.props,r=o.state,i=o.editor,s=t.nativeEvent,a=s.dataTransfer,u=s.x,p=s.y,f=(0,_getTransferData2.default)(a),d=void 0;n.document.caretRangeFromPoint?d=n.document.caretRangeFromPoint(u,p):(d=n.document.createRange(),d.setStart(s.rangeParent,s.rangeOffset));var l=d,c=l.startContainer,g=l.startOffset,_=(0,_getPoint2.default)(c,g,r,i);if(_){var y=_selection2.default.create({anchorKey:_.key,anchorOffset:_.offset,focusKey:_.key,focusOffset:_.offset,isFocused:!0});f.target=y;try{f.effect=a.dropEffect}catch(e){f.effect=null}"fragment"!=f.type&&"node"!=f.type||(f.isInternal=e.tmp.isInternalDrag),debug("onDrop",{event:t,data:f}),e.props.onDrop(t,f)}}},this.onInput=function(t){if(!e.tmp.isComposing&&!e.props.state.isBlurred&&e.isInEditor(t.target)){debug("onInput",{event:t});var n=(0,_getWindow2.default)(t.target),o=e.props,r=o.state,i=o.editor,s=n.getSelection(),a=s.anchorNode,u=s.anchorOffset,p=(0,_getPoint2.default)(a,u,r,i);if(p){var f=p.key,d=p.index,l=p.start,c=p.end,g=r.document,_=r.selection,y=i.getSchema(),m=g.getDescendantDecorators(f,y),h=g.getDescendant(f),v=g.getClosestBlock(h.key),C=h.getRanges(m),D=v.getLastText(),b=a.textContent,S=b.charAt(b.length-1),T=h==D,q=d==C.size-1;T&&q&&"\n"==S&&(b=b.slice(0,-1));var I=C.get(d),k=I.text,O=I.marks;if(b!=k){var R=b.length-k.length,E=_.collapseToEnd().move(R);i.change(function(e){e.select({anchorKey:f,anchorOffset:l,focusKey:f,focusOffset:c}).delete().insertText(b,O).select(E)})}}}},this.onKeyDown=function(t){if(!e.props.readOnly&&e.isInEditor(t.target)){var n=t.altKey,o=t.ctrlKey,r=t.metaKey,i=t.shiftKey,s=t.which,a=(0,_keycode2.default)(s),u={};if("shift"==a&&(e.tmp.isShifting=!0),e.tmp.isComposing&&("left"==a||"right"==a||"up"==a||"down"==a))return void t.preventDefault();u.code=s,u.key=a,u.isAlt=n,u.isCmd=!!_environment.IS_MAC&&(r&&!n),u.isCtrl=o&&!n,u.isLine=!!_environment.IS_MAC&&r,u.isMeta=r,u.isMod=_environment.IS_MAC?r&&!n:o&&!n,u.isModAlt=_environment.IS_MAC?r&&n:o&&n,u.isShift=i,u.isWord=_environment.IS_MAC?n:o,("enter"==a||"backspace"==a||"delete"==a||"b"==a&&u.isMod||"i"==a&&u.isMod||"y"==a&&u.isMod||"z"==a&&u.isMod)&&t.preventDefault(),debug("onKeyDown",{event:t,data:u}),e.props.onKeyDown(t,u)}},this.onKeyUp=function(t){var n=t.altKey,o=t.ctrlKey,r=t.metaKey,i=t.shiftKey,s=t.which,a=(0,_keycode2.default)(s),u={};"shift"==a&&(e.tmp.isShifting=!1),u.code=s,u.key=a,u.isAlt=n,u.isCmd=!!_environment.IS_MAC&&(r&&!n),u.isCtrl=o&&!n,u.isLine=!!_environment.IS_MAC&&r,u.isMeta=r,u.isMod=_environment.IS_MAC?r&&!n:o&&!n,u.isModAlt=_environment.IS_MAC?r&&n:o&&n,u.isShift=i,u.isWord=_environment.IS_MAC?n:o,debug("onKeyUp",{event:t,data:u}),e.props.onKeyUp(t,u)},this.onPaste=function(t){if(!e.props.readOnly&&e.isInEditor(t.target)){var n=(0,_getTransferData2.default)(t.clipboardData);n.isShift=!!e.tmp.isShifting,debug("onPaste",{event:t,data:n}),_environment.IS_IE?(0,_getHtmlFromNativePaste2.default)(t.target,function(o){e.props.onPaste(t,void 0===o?n:_extends({},n,{html:o,type:"html"}))}):(t.preventDefault(),e.props.onPaste(t,n))}},this.onSelect=function(t){if(!e.props.readOnly&&!e.tmp.isCopying&&!e.tmp.isComposing&&!e.tmp.isSelecting&&e.isInEditor(t.target)){var n=(0,_getWindow2.default)(t.target),o=e.props,r=o.state,i=o.editor,s=r.document,a=r.selection,u=n.getSelection(),p={};if(u.rangeCount){var f=u.anchorNode,d=u.anchorOffset,l=u.focusNode,c=u.focusOffset,g=(0,_getPoint2.default)(f,d,r,i),_=(0,_getPoint2.default)(l,c,r,i);if(!g||!_)return;if(g.key==a.anchorKey&&g.offset==a.anchorOffset&&_.key==a.focusKey&&_.offset==a.focusOffset&&a.isFocused)return void e.updateSelection();var y={anchorKey:g.key,anchorOffset:g.offset,focusKey:_.key,focusOffset:_.offset,isFocused:!0,isBackward:null},m=s.getNode(g.key),h=s.getNode(_.key),v=s.getClosestInline(g.key),C=s.getClosestInline(_.key),D=s.getClosestBlock(_.key),b=s.getClosestBlock(g.key);if(b&&!b.isVoid&&0==g.offset&&D&&D.isVoid&&0!=_.offset&&(y.focusOffset=0),v&&!v.isVoid&&g.offset==m.text.length){var S=s.getClosestBlock(g.key),T=S.getNextText(g.key);T&&(y.anchorKey=T.key,y.anchorOffset=0)}if(C&&!C.isVoid&&_.offset==h.text.length){var q=s.getClosestBlock(_.key),I=q.getNextText(_.key);I&&(y.focusKey=I.key,y.focusOffset=0)}p.selection=a.merge(y).normalize(s)}else p.selection=a.set("isFocused",!1),p.isNative=!0;debug("onSelect",{event:t,data:p}),e.props.onSelect(t,p)}},this.renderNode=function(t,n){var o=e.props,r=o.editor,i=o.readOnly,s=o.schema,a=o.state,u=a.document;return _react2.default.createElement(_node2.default,{block:null,editor:r,isSelected:n,key:t.key,node:t,parent:u,readOnly:i,schema:s,state:a})}};exports.default=Content},{"../constants/environment":232,"../constants/transfer-types":235,"../models/selection":248,"../serializers/base-64":257,"../utils/extend-selection":261,"../utils/find-closest-node":262,"../utils/find-deepest-node":263,"../utils/get-html-from-native-paste":266,"../utils/get-point":267,"../utils/get-transfer-data":268,"../utils/prop-types":276,"../utils/set-transfer-data":278,"./node":229,debug:3,"get-window":62,keycode:68,"prop-types":213}],227:[function(require,module,exports){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _objectWithoutProperties(e,t){var o={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(o[r]=e[r]);return o}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(exports,"__esModule",{value:!0});var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(e[r]=o[r])}return e},_createClass=function(){function e(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,o,r){return o&&e(t.prototype,o),r&&e(t,r),t}}(),_debug=require("debug"),_debug2=_interopRequireDefault(_debug),_reactPortal=require("react-portal"),_reactPortal2=_interopRequireDefault(_reactPortal),_react=window.React,_react2=_interopRequireDefault(_react),_propTypes=require("prop-types"),_propTypes2=_interopRequireDefault(_propTypes),_stack=require("../models/stack"),_stack2=_interopRequireDefault(_stack),_state=require("../models/state"),_state2=_interopRequireDefault(_state),_propTypes3=require("../utils/prop-types"),_propTypes4=_interopRequireDefault(_propTypes3),_logger=require("../utils/logger"),_logger2=_interopRequireDefault(_logger),_noop=require("../utils/noop"),_noop2=_interopRequireDefault(_noop),debug=(0,_debug2.default)("slate:editor"),EVENT_HANDLERS=["onBeforeInput","onBlur","onFocus","onCopy","onCut","onDrop","onKeyDown","onKeyUp","onPaste","onSelect"],PLUGINS_PROPS=[].concat(EVENT_HANDLERS,["placeholder","placeholderClassName","placeholderStyle","plugins","schema"]),Editor=function(e){function t(e){_classCallCheck(this,t);var o=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));_initialiseProps.call(o),o.tmp={},o.state={};var r=e.state,a=(e.onChange,_objectWithoutProperties(e,["state","onChange"])),n=_stack2.default.create(a);o.state.stack=n,o.cacheState(r),o.state.state=r;for(var s=0;s<EVENT_HANDLERS.length;s++)!function(e){var t=EVENT_HANDLERS[e];o[t]=function(){for(var e=arguments.length,r=Array(e),a=0;a<e;a++)r[a]=arguments[a];var n=o.state.stack,s=o.state.state.change();n[t].apply(n,[s,o].concat(r)),n.onBeforeChange(s,o),n.onChange(s,o),o.onChange(s)}}(s);return e.onDocumentChange&&_logger2.default.deprecate("0.22.10","The `onDocumentChange` prop is deprecated because it led to confusing UX issues, see https://github.com/ianstormtaylor/slate/issues/614#issuecomment-327868679"),e.onSelectionChange&&_logger2.default.deprecate("0.22.10","The `onSelectionChange` prop is deprecated because it led to confusing UX issues, see https://github.com/ianstormtaylor/slate/issues/614#issuecomment-327868679"),o}return _inherits(t,e),_createClass(t,[{key:"render",value:function(){var e=this.props,t=this.state,o=t.stack,r=o.renderPortal(t.state,this).map(function(e,t){return _react2.default.createElement(_reactPortal2.default,{key:t,isOpened:!0},e)});return debug("render",{props:e,state:t}),o.render(t.state,this,_extends({},e,{children:r}))}}]),t}(_react2.default.Component);Editor.propTypes={autoCorrect:_propTypes2.default.bool,autoFocus:_propTypes2.default.bool,className:_propTypes2.default.string,onBeforeChange:_propTypes2.default.func,onChange:_propTypes2.default.func,placeholder:_propTypes2.default.any,placeholderClassName:_propTypes2.default.string,placeholderStyle:_propTypes2.default.object,plugins:_propTypes2.default.array,readOnly:_propTypes2.default.bool,role:_propTypes2.default.string,schema:_propTypes2.default.object,spellCheck:_propTypes2.default.bool,state:_propTypes4.default.state.isRequired,style:_propTypes2.default.object,tabIndex:_propTypes2.default.number},Editor.defaultProps={autoFocus:!1,autoCorrect:!0,onChange:_noop2.default,plugins:[],readOnly:!1,schema:{},spellCheck:!0};for(var _initialiseProps=function(){var e=this;this.componentWillReceiveProps=function(t){for(var o=t.state,r=0;r<PLUGINS_PROPS.length;r++){var a=PLUGINS_PROPS[r];if(t[a]!=e.props[a]){var n=(t.onChange,_objectWithoutProperties(t,["onChange"])),s=_stack2.default.create(n);e.setState({stack:s})}}e.cacheState(o),e.setState({state:o})},this.cacheState=function(t){e.tmp.document=t.document,e.tmp.selection=t.selection},this.blur=function(){e.change(function(e){return e.blur()})},this.focus=function(){e.change(function(e){return e.focus()})},this.getSchema=function(){return e.state.stack.schema},this.getState=function(){return e.state.state},this.change=function(t){var o=e.state.state.change();t(o),e.onChange(o)},this.onChange=function(t){if(_state2.default.isState(t))throw new Error("As of slate@0.22.0 the `editor.onChange` method must be passed a `Change` object not a `State` object.");var o=e.props,r=o.onChange,a=o.onDocumentChange,n=o.onSelectionChange,s=e.tmp,p=s.document,u=s.selection,i=t.state;i!=e.state.state&&(r(t),a&&i.document!=p&&a(i.document,t),n&&i.selection!=u&&n(i.selection,t))}},i=0;i<EVENT_HANDLERS.length;i++){var property=EVENT_HANDLERS[i];Editor.propTypes[property]=_propTypes2.default.func}exports.default=Editor},{"../models/stack":249,"../models/state":250,"../utils/logger":271,"../utils/noop":273,"../utils/prop-types":276,debug:3,"prop-types":213,"react-portal":215}],228:[function(require,module,exports){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),_debug=require("debug"),_debug2=_interopRequireDefault(_debug),_react=window.React,_react2=_interopRequireDefault(_react),_reactDom=window.ReactDOM,_reactDom2=_interopRequireDefault(_reactDom),_propTypes=require("prop-types"),_propTypes2=_interopRequireDefault(_propTypes),_offsetKey=require("../utils/offset-key"),_offsetKey2=_interopRequireDefault(_offsetKey),_propTypes3=require("../utils/prop-types"),_propTypes4=_interopRequireDefault(_propTypes3),_findDeepestNode=require("../utils/find-deepest-node"),_findDeepestNode2=_interopRequireDefault(_findDeepestNode),_environment=require("../constants/environment"),debug=(0,_debug2.default)("slate:leaf"),Leaf=function(e){function t(e){_classCallCheck(this,t);var r=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.debug=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];debug.apply(void 0,[e,r.props.node.key+"-"+r.props.index].concat(n))},r.tmp={},r.tmp.renders=0,r}return _inherits(t,e),_createClass(t,[{key:"shouldComponentUpdate",value:function(e){if(e.index!=this.props.index||e.marks!=this.props.marks||e.schema!=this.props.schema||e.text!=this.props.text)return!0;var t=(0,_findDeepestNode2.default)(_reactDom2.default.findDOMNode(this)),r=this.renderText(e);return t.textContent!=r}},{key:"render",value:function(){var e=this.props,t=e.node,r=e.index,n=_offsetKey2.default.stringify({key:t.key,index:r});return this.tmp.renders++,this.debug("render",{props:e}),_react2.default.createElement("span",{key:this.tmp.renders,"data-offset-key":n},this.renderMarks(e))}},{key:"renderText",value:function(e){var t=e.block,r=e.node,n=e.parent,o=e.text,s=e.index,a=e.ranges;if(""==o&&"block"==n.kind&&""==n.text)return _react2.default.createElement("br",null);if(""==o){var i=_environment.IS_FIREFOX?"​":" ";return _react2.default.createElement("span",{"data-slate-zero-width":!0},i)}var u=t.getLastText(),p=o.charAt(o.length-1),f=r==u,d=s==a.size-1;return f&&d&&"\n"==p?o+"\n":o}},{key:"renderMarks",value:function(e){var t=e.marks,r=e.schema,n=e.node,o=e.offset,s=e.text,a=e.state,i=e.editor,u=this.renderText(e);return t.reduce(function(e,u){var p=u.getComponent(r);return p?_react2.default.createElement(p,{editor:i,mark:u,marks:t,node:n,offset:o,schema:r,state:a,text:s},e):e},u)}}]),t}(_react2.default.Component);Leaf.propTypes={block:_propTypes4.default.block.isRequired,editor:_propTypes2.default.object.isRequired,index:_propTypes2.default.number.isRequired,marks:_propTypes4.default.marks.isRequired,node:_propTypes4.default.node.isRequired,offset:_propTypes2.default.number.isRequired,parent:_propTypes4.default.node.isRequired,ranges:_propTypes4.default.ranges.isRequired,schema:_propTypes4.default.schema.isRequired,state:_propTypes4.default.state.isRequired,text:_propTypes2.default.string.isRequired},exports.default=Leaf},{"../constants/environment":232,"../utils/find-deepest-node":263,"../utils/offset-key":275,"../utils/prop-types":276,debug:3,"prop-types":213}],229:[function(require,module,exports){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),_debug=require("debug"),_debug2=_interopRequireDefault(_debug),_react=window.React,_react2=_interopRequireDefault(_react),_reactDom=window.ReactDOM,_reactDom2=_interopRequireDefault(_reactDom),_propTypes=require("prop-types"),_propTypes2=_interopRequireDefault(_propTypes),_transferTypes=require("../constants/transfer-types"),_transferTypes2=_interopRequireDefault(_transferTypes),_base=require("../serializers/base-64"),_base2=_interopRequireDefault(_base),_leaf=require("./leaf"),_leaf2=_interopRequireDefault(_leaf),_propTypes3=require("../utils/prop-types"),_propTypes4=_interopRequireDefault(_propTypes3),_void=require("./void"),_void2=_interopRequireDefault(_void),_getWindow=require("get-window"),_getWindow2=_interopRequireDefault(_getWindow),_scrollToSelection=require("../utils/scroll-to-selection"),_scrollToSelection2=_interopRequireDefault(_scrollToSelection),_setTransferData=require("../utils/set-transfer-data"),_setTransferData2=_interopRequireDefault(_setTransferData),debug=(0,_debug2.default)("slate:node"),Node=function(e){function t(e){_classCallCheck(this,t);var r=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));_initialiseProps.call(r);var n=e.node,o=e.schema;return r.state={},r.state.Component="text"==n.kind?null:n.getComponent(o),r}return _inherits(t,e),_createClass(t,[{key:"render",value:function(){var e=this.props,t=this.props.node;return this.debug("render",{props:e}),"text"==t.kind?this.renderText():this.renderElement()}}]),t}(_react2.default.Component);Node.propTypes={block:_propTypes4.default.block,editor:_propTypes2.default.object.isRequired,isSelected:_propTypes2.default.bool.isRequired,node:_propTypes4.default.node.isRequired,parent:_propTypes4.default.node.isRequired,readOnly:_propTypes2.default.bool.isRequired,schema:_propTypes4.default.schema.isRequired,state:_propTypes4.default.state.isRequired};var _initialiseProps=function(){var e=this;this.debug=function(t){for(var r=arguments.length,n=Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];var a=e.props.node,s=a.key,i=a.kind,d=a.type,u="text"==i?s+" ("+i+")":s+" ("+d+")"
;debug.apply(void 0,[t,""+u].concat(n))},this.componentWillReceiveProps=function(t){if("text"!=t.node.kind&&t.node!=e.props.node){var r=t.node.getComponent(t.schema);e.setState({Component:r})}},this.shouldComponentUpdate=function(t){var r=e.props,n=e.state.Component,o=t,a=r;if(n&&n.suppressShouldComponentUpdate)return!0;if(o.readOnly!=a.readOnly)return!0;if(o.node!=a.node)return!0;if(o.isSelected!=a.isSelected)return!0;if("text"==o.node.kind&&o.schema.hasDecorators){var s=o.state.document.getDescendantDecorators(o.node.key,o.schema),i=a.state.document.getDescendantDecorators(a.node.key,a.schema),d=o.node.getRanges(s),u=a.node.getRanges(i);if(!d.equals(u))return!0}if("text"==o.node.kind&&"block"==o.parent.kind){var l=a.parent.nodes.last(),p=o.parent.nodes.last();if(a.node==l&&o.node!=p)return!0}return!1},this.componentDidMount=function(){e.updateScroll()},this.componentDidUpdate=function(t,r){e.props.node!=t.node&&e.updateScroll()},this.componentWillUnmount=function(){clearTimeout(e.scrollTimer)},this.updateScroll=function(){var t=e.props,r=t.node,n=t.state,o=n.selection;"block"==r.kind&&"block"!=r.nodes.first().kind&&(o.isBlurred||o.hasEndIn(r)&&(e.scrollTimer=setTimeout(function(){var t=_reactDom2.default.findDOMNode(e),r=(0,_getWindow2.default)(t),n=r.getSelection();(0,_scrollToSelection2.default)(n),e.debug("updateScroll",t)})))},this.onDragStart=function(t){var r=e.props.node;if(r.isVoid){var n=_base2.default.serializeNode(r,{preserveKeys:!0}),o=t.nativeEvent.dataTransfer;(0,_setTransferData2.default)(o,_transferTypes2.default.NODE,n),e.debug("onDragStart",t)}},this.renderNode=function(t,r){var n=e.props,o=n.block,a=n.editor,s=n.node,i=n.readOnly,d=n.schema,u=n.state;return _react2.default.createElement(Node,{block:"block"==s.kind?s:o,editor:a,isSelected:r,key:t.key,node:t,parent:s,readOnly:i,schema:d,state:u})},this.renderElement=function(){var t=e.props,r=t.editor,n=t.isSelected,o=t.node,a=t.parent,s=t.readOnly,i=t.state,d=e.state.Component,u=i.selection,l=o.getSelectionIndexes(u,n),p=o.nodes.toArray().map(function(t,r){var n=!!l&&l.start<=r&&r<l.end;return e.renderNode(t,n)}),c={"data-key":o.key,onDragStart:e.onDragStart};if("block"==o.kind&&"block"!=o.nodes.first().kind){"rtl"==o.getTextDirection()&&(c.dir="rtl")}var f=_react2.default.createElement(d,{attributes:c,editor:r,isSelected:n,key:o.key,node:o,parent:a,readOnly:s,state:i},p);return o.isVoid?_react2.default.createElement(_void2.default,e.props,f):f},this.renderText=function(){var t=e.props,r=t.node,n=t.schema,o=t.state,a=o.document,s=n.hasDecorators?a.getDescendantDecorators(r.key,n):[],i=r.getRanges(s),d=0,u=i.map(function(t,r){var n=e.renderLeaf(i,t,r,d);return d+=t.text.length,n});return _react2.default.createElement("span",{"data-key":r.key},u)},this.renderLeaf=function(t,r,n,o){var a=e.props,s=a.block,i=a.node,d=a.parent,u=a.schema,l=a.state,p=a.editor,c=r.text,f=r.marks;return _react2.default.createElement(_leaf2.default,{key:i.key+"-"+n,block:s,editor:p,index:n,marks:f,node:i,offset:o,parent:d,ranges:t,schema:u,state:l,text:c})}};exports.default=Node},{"../constants/transfer-types":235,"../serializers/base-64":257,"../utils/prop-types":276,"../utils/scroll-to-selection":277,"../utils/set-transfer-data":278,"./leaf":228,"./void":231,debug:3,"get-window":62,"prop-types":213}],230:[function(require,module,exports){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(exports,"__esModule",{value:!0});var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},_createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,r,o){return r&&e(t.prototype,r),o&&e(t,o),t}}(),_react=window.React,_react2=_interopRequireDefault(_react),_propTypes=require("prop-types"),_propTypes2=_interopRequireDefault(_propTypes),_propTypes3=require("../utils/prop-types"),_propTypes4=_interopRequireDefault(_propTypes3),Placeholder=function(e){function t(){var e,r,o,n;_classCallCheck(this,t);for(var p=arguments.length,s=Array(p),l=0;l<p;l++)s[l]=arguments[l];return r=o=_possibleConstructorReturn(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),o.shouldComponentUpdate=function(e,t){return e.children!=o.props.children||e.className!=o.props.className||e.firstOnly!=o.props.firstOnly||e.parent!=o.props.parent||e.node!=o.props.node||e.style!=o.props.style},o.isVisible=function(){var e=o.props,t=e.firstOnly,r=e.node,n=e.parent;return!r.text&&(!t||!(n.nodes.size>1)&&n.nodes.first()===r)},n=r,_possibleConstructorReturn(o,n)}return _inherits(t,e),_createClass(t,[{key:"render",value:function(){if(!this.isVisible())return null;var e=this.props,t=e.children,r=e.className,o=this.props.style;"string"==typeof t&&null==o&&null==r?o={opacity:"0.333"}:null==o&&(o={});var n=_extends({position:"absolute",top:"0px",right:"0px",bottom:"0px",left:"0px",pointerEvents:"none"},o);return _react2.default.createElement("span",{contentEditable:!1,className:r,style:n},t)}}]),t}(_react2.default.Component);Placeholder.propTypes={children:_propTypes2.default.any.isRequired,className:_propTypes2.default.string,firstOnly:_propTypes2.default.bool,node:_propTypes4.default.node.isRequired,parent:_propTypes4.default.node,state:_propTypes4.default.state.isRequired,style:_propTypes2.default.object},Placeholder.defaultProps={firstOnly:!0},exports.default=Placeholder},{"../utils/prop-types":276,"prop-types":213}],231:[function(require,module,exports){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),_debug=require("debug"),_debug2=_interopRequireDefault(_debug),_react=window.React,_react2=_interopRequireDefault(_react),_propTypes=require("prop-types"),_propTypes2=_interopRequireDefault(_propTypes),_leaf=require("./leaf"),_leaf2=_interopRequireDefault(_leaf),_mark=require("../models/mark"),_mark2=_interopRequireDefault(_mark),_offsetKey=require("../utils/offset-key"),_offsetKey2=_interopRequireDefault(_offsetKey),_propTypes3=require("../utils/prop-types"),_propTypes4=_interopRequireDefault(_propTypes3),_environment=require("../constants/environment"),debug=(0,_debug2.default)("slate:void"),Void=function(e){function t(){var e,r,n,o;_classCallCheck(this,t);for(var i=arguments.length,a=Array(i),s=0;s<i;s++)a[s]=arguments[s];return r=n=_possibleConstructorReturn(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),_initialiseProps.call(n),o=r,_possibleConstructorReturn(n,o)}return _inherits(t,e),_createClass(t,[{key:"render",value:function(){var e=this.props,t=e.children,r=e.node,n=void 0,o=void 0;return"block"===r.kind?(n="div",o={position:"relative"}):n="span",this.debug("render",{props:e}),_react2.default.createElement(n,{"data-slate-void":!0,style:o,onClick:this.onClick,onDragEnter:this.onDragEnter,onDragLeave:this.onDragLeave,onDrop:this.onDrop},this.renderSpacer(),_react2.default.createElement(n,{contentEditable:this.state.editable},t))}}]),t}(_react2.default.Component);Void.propTypes={block:_propTypes4.default.block,children:_propTypes2.default.any.isRequired,editor:_propTypes2.default.object.isRequired,node:_propTypes4.default.node.isRequired,parent:_propTypes4.default.node.isRequired,readOnly:_propTypes2.default.bool.isRequired,schema:_propTypes4.default.schema.isRequired,state:_propTypes4.default.state.isRequired};var _initialiseProps=function(){var e=this;this.state={dragCounter:0,editable:!1},this.debug=function(t){for(var r=arguments.length,n=Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];var i=e.props.node,a=i.key,s=i.type,u=a+" ("+s+")";debug.apply(void 0,[t,""+u].concat(n))},this.onClick=function(t){if(!e.props.readOnly){e.debug("onClick",{event:t});var r=e.props,n=r.node;r.editor.change(function(e){e.collapseToEndOf(n).focus()})}},this.onDragEnter=function(){e.setState(function(e){return{dragCounter:e.dragCounter+1,editable:void 0}})},this.onDragLeave=function(){e.setState(function(e){var t=e.dragCounter-1;return{dragCounter:t,editable:0!==t&&void 0}})},this.onDrop=function(){e.setState({dragCounter:0,editable:!1})},this.renderSpacer=function(){var t=e.props.node,r=void 0;return r="block"==t.kind?_environment.IS_FIREFOX?{pointerEvents:"none",width:"0px",height:"0px",lineHeight:"0px",visibility:"hidden"}:{position:"absolute",top:"0px",left:"-9999px",textIndent:"-9999px"}:{color:"transparent"},_react2.default.createElement("span",{style:r},e.renderLeaf())},this.renderLeaf=function(){var t=e.props,r=t.block,n=t.node,o=t.schema,i=t.state,a=t.editor,s=n.getFirstText(),u=s.getRanges(),p=_mark2.default.createSet(),l=_offsetKey2.default.stringify({key:s.key,index:0});return _react2.default.createElement(_leaf2.default,{key:l,block:"block"==n.kind?n:r,editor:a,index:0,marks:p,node:s,offset:0,parent:n,ranges:u,schema:o,state:i,text:""})}};exports.default=Void},{"../constants/environment":232,"../models/mark":244,"../utils/offset-key":275,"../utils/prop-types":276,"./leaf":228,debug:3,"prop-types":213}],232:[function(require,module,exports){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.IS_WINDOWS=exports.IS_MAC=exports.IS_IE=exports.IS_SAFARI=exports.IS_FIREFOX=exports.IS_CHROME=void 0;var _slicedToArray=function(){function e(e,r){var i=[],o=!0,t=!1,S=void 0;try{for(var s,_=e[Symbol.iterator]();!(o=(s=_.next()).done)&&(i.push(s.value),!r||i.length!==r);o=!0);}catch(e){t=!0,S=e}finally{try{!o&&_.return&&_.return()}finally{if(t)throw S}}return i}return function(r,i){if(Array.isArray(r))return r;if(Symbol.iterator in Object(r))return e(r,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_isInBrowser=require("is-in-browser"),_isInBrowser2=_interopRequireDefault(_isInBrowser),BROWSER_RULES=[["edge",/Edge\/([0-9\._]+)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)$/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+)\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["android",/Android\s([0-9\.]+)/],["safari",/Version\/([0-9\._]+).*Safari/]],OS_RULES=[["macos",/mac os x/i],["ios",/os ([\.\_\d]+) like mac os/i],["android",/android/i],["firefoxos",/mozilla\/[a-z\.\_\d]+ \((?:mobile)|(?:tablet)/i],["windows",/windows\s*(?:nt)?\s*([\.\_\d]+)/i]],BROWSER=void 0,OS=void 0;if(_isInBrowser2.default){for(var userAgent=window.navigator.userAgent,i=0;i<BROWSER_RULES.length;i++){var _BROWSER_RULES$i=_slicedToArray(BROWSER_RULES[i],2),name=_BROWSER_RULES$i[0],regexp=_BROWSER_RULES$i[1];if(regexp.test(userAgent)){BROWSER=name;break}}for(var _i=0;_i<OS_RULES.length;_i++){var _OS_RULES$_i=_slicedToArray(OS_RULES[_i],2),name=_OS_RULES$_i[0],regexp=_OS_RULES$_i[1];if(regexp.test(userAgent)){OS=name;break}}}var IS_CHROME=exports.IS_CHROME="chrome"===BROWSER,IS_FIREFOX=exports.IS_FIREFOX="firefox"===BROWSER,IS_SAFARI=exports.IS_SAFARI="safari"===BROWSER,IS_IE=exports.IS_IE="ie"===BROWSER,IS_MAC=exports.IS_MAC="macos"===OS,IS_WINDOWS=exports.IS_WINDOWS="windows"===OS},{"is-in-browser":65}],233:[function(require,module,exports){(function(process){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var IS_DEV="undefined"!=typeof process&&process.env&&!1;exports.default=IS_DEV}).call(this,require("_process"))},{_process:209}],234:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var MODEL_TYPES={BLOCK:"@@__SLATE_BLOCK__@@",CHANGE:"@@__SLATE_CHANGE__@@",CHARACTER:"@@__SLATE_CHARACTER__@@",DOCUMENT:"@@__SLATE_DOCUMENT__@@",HISTORY:"@@__SLATE_HISTORY__@@",INLINE:"@@__SLATE_INLINE__@@",MARK:"@@__SLATE_MARK__@@",RANGE:"@@__SLATE_RANGE__@@",SCHEMA:"@@__SLATE_SCHEMA__@@",SELECTION:"@@__SLATE_SELECTION__@@",STACK:"@@__SLATE_STACK__@@",STATE:"@@__SLATE_STATE__@@",TEXT:"@@__SLATE_TEXT__@@"};exports.default=MODEL_TYPES},{}],235:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var TYPES={FRAGMENT:"application/x-slate-fragment",NODE:"application/x-slate-node"};exports.default=TYPES},{}],236:[function(require,module,exports){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.setKeyGenerator=exports.resetKeyGenerator=exports.findDOMNode=exports.Changes=exports.Text=exports.State=exports.Stack=exports.Selection=exports.Schema=exports.Raw=exports.Range=exports.Plain=exports.Placeholder=exports.Operations=exports.Node=exports.Mark=exports.Inline=exports.Html=exports.History=exports.Editor=exports.Document=exports.Data=exports.Character=exports.Block=void 0;var _editor=require("./components/editor"),_editor2=_interopRequireDefault(_editor),_placeholder=require("./components/placeholder"),_placeholder2=_interopRequireDefault(_placeholder),_block=require("./models/block"),_block2=_interopRequireDefault(_block),_character=require("./models/character"),_character2=_interopRequireDefault(_character),_data=require("./models/data"),_data2=_interopRequireDefault(_data),_document=require("./models/document"),_document2=_interopRequireDefault(_document),_history=require("./models/history"),_history2=_interopRequireDefault(_history),_inline=require("./models/inline"),_inline2=_interopRequireDefault(_inline),_mark=require("./models/mark"),_mark2=_interopRequireDefault(_mark),_node=require("./models/node"),_node2=_interopRequireDefault(_node),_schema=require("./models/schema"),_schema2=_interopRequireDefault(_schema),_selection=require("./models/selection"),_selection2=_interopRequireDefault(_selection),_stack=require("./models/stack"),_stack2=_interopRequireDefault(_stack),_state=require("./models/state"),_state2=_interopRequireDefault(_state),_text=require("./models/text"),_text2=_interopRequireDefault(_text),_range=require("./models/range"),_range2=_interopRequireDefault(_range),_operations=require("./operations"),_operations2=_interopRequireDefault(_operations),_html=require("./serializers/html"),_html2=_interopRequireDefault(_html),_plain=require("./serializers/plain"),_plain2=_interopRequireDefault(_plain),_raw=require("./serializers/raw"),_raw2=_interopRequireDefault(_raw),_changes=require("./changes"),_changes2=_interopRequireDefault(_changes),_findDomNode=require("./utils/find-dom-node"),_findDomNode2=_interopRequireDefault(_findDomNode),_generateKey=require("./utils/generate-key");exports.Block=_block2.default,exports.Character=_character2.default,exports.Data=_data2.default,exports.Document=_document2.default,exports.Editor=_editor2.default,exports.History=_history2.default,exports.Html=_html2.default,exports.Inline=_inline2.default,exports.Mark=_mark2.default,exports.Node=_node2.default,exports.Operations=_operations2.default,exports.Placeholder=_placeholder2.default,exports.Plain=_plain2.default,exports.Range=_range2.default,exports.Raw=_raw2.default,exports.Schema=_schema2.default,exports.Selection=_selection2.default,exports.Stack=_stack2.default,exports.State=_state2.default,exports.Text=_text2.default,exports.Changes=_changes2.default,exports.findDOMNode=_findDomNode2.default,exports.resetKeyGenerator=_generateKey.resetKeyGenerator,exports.setKeyGenerator=_generateKey.setKeyGenerator,exports.default={Block:_block2.default,Character:_character2.default,Data:_data2.default,Document:_document2.default,Editor:_editor2.default,History:_history2.default,Html:_html2.default,Inline:_inline2.default,Mark:_mark2.default,Node:_node2.default,Operations:_operations2.default,Placeholder:_placeholder2.default,Plain:_plain2.default,Range:_range2.default,Raw:_raw2.default,Schema:_schema2.default,Selection:_selection2.default,Stack:_stack2.default,State:_state2.default,Text:_text2.default,Changes:_changes2.default,findDOMNode:_findDomNode2.default,resetKeyGenerator:_generateKey.resetKeyGenerator,setKeyGenerator:_generateKey.setKeyGenerator}},{"./changes":221,"./components/editor":227,"./components/placeholder":230,"./models/block":237,"./models/character":239,"./models/data":240,"./models/document":241,"./models/history":242,"./models/inline":243,"./models/mark":244,"./models/node":245,"./models/range":246,"./models/schema":247,"./models/selection":248,"./models/stack":249,"./models/state":250,"./models/text":251,"./operations":253,"./serializers/html":258,"./serializers/plain":259,"./serializers/raw":260,"./utils/find-dom-node":264,"./utils/generate-key":265}],237:[function(require,module,exports){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,r,o){return r&&e(t.prototype,r),o&&e(t,o),t}}();require("./document");var _data=require("./data"),_data2=_interopRequireDefault(_data),_node=require("./node"),_node2=_interopRequireDefault(_node),_text=require("./text"),_text2=_interopRequireDefault(_text),_modelTypes=require("../constants/model-types"),_modelTypes2=_interopRequireDefault(_modelTypes),_generateKey=require("../utils/generate-key"),_generateKey2=_interopRequireDefault(_generateKey),_isPlainObject=require("is-plain-object"),_isPlainObject2=_interopRequireDefault(_isPlainObject),_immutable=window.Immutable,DEFAULTS={data:new _immutable.Map,isVoid:!1,key:void 0,nodes:new _immutable.List,type:void 0},Block=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"kind",get:function(){return"block"}},{key:"isEmpty",get:function(){return""==this.text}},{key:"text",get:function(){return this.getText()}}],[{key:"create",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(t.isBlock(e))return e;if("string"==typeof e&&(e={type:e}),(0,_isPlainObject2.default)(e)){var r=e,o=r.data,n=r.isVoid,i=r.key,a=r.type,u=e,s=u.nodes;if("string"!=typeof a)throw new Error("`Block.create` requires a block `type` string.");null!=s&&0!=s.length||(s=[_text2.default.create()]);return new t({data:_data2.default.create(o),isVoid:!!n,key:i||(0,_generateKey2.default)(),nodes:_node2.default.createList(s),type:a})}throw new Error("`Block.create` only accepts objects, strings or blocks, but you passed it: "+e)}},{key:"createList",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(_immutable.List.isList(e)||Array.isArray(e)){return new _immutable.List(e.map(t.create))}throw new Error("`Block.createList` only accepts arrays or lists, but you passed it: "+e)}},{key:"isBlock",value:function(e){return!(!e||!e[_modelTypes2.default.BLOCK])}},{key:"isBlockList",value:function(e){return _immutable.List.isList(e)&&e.every(function(e){return t.isBlock(e)})}}]),t}((0,_immutable.Record)(DEFAULTS));Block.prototype[_modelTypes2.default.BLOCK]=!0,Object.getOwnPropertyNames(_node2.default.prototype).forEach(function(e){"constructor"!=e&&(Block.prototype[e]=_node2.default.prototype[e])}),exports.default=Block},{"../constants/model-types":234,"../utils/generate-key":265,"./data":240,"./document":241,"./node":245,"./text":251,"is-plain-object":66}],238:[function(require,module,exports){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},_createClass=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),_modelTypes=require("../constants/model-types"),_modelTypes2=_interopRequireDefault(_modelTypes),_debug=require("debug"),_debug2=_interopRequireDefault(_debug),_changes=require("../changes"),_changes2=_interopRequireDefault(_changes),_apply=require("../operations/apply"),_apply2=_interopRequireDefault(_apply),_logger=require("../utils/logger"),_logger2=_interopRequireDefault(_logger),_pick=require("lodash/pick"),_pick2=_interopRequireDefault(_pick),debug=(0,_debug2.default)("slate:change"),Change=function(){function e(t){_classCallCheck(this,e);var a=t.state;this.state=a,this.operations=[],this.flags=(0,_pick2.default)(t,["merge","save"]),this.setIsNative(void 0!==t.isNative&&t.isNative)}return _createClass(e,null,[{key:"isChange",value:function(e){return!(!e||!e[_modelTypes2.default.CHANGE])}}]),_createClass(e,[{key:"applyOperation",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=this.operations,n=this.flags,r=this.state,s=r,o=s.history;t=_extends({},n,t);var i=t,l=i.merge,u=void 0===l?0!=a.length||null:l,c=i.save,p=void 0===c||c,h=i.skip,d=void 0===h?null:h;return debug("apply",{operation:e,save:p,merge:u}),r=(0,_apply2.default)(r,e),o&&p&&(o=o.save(e,{merge:u,skip:d}),r=r.set("history",o)),this.state=r,this.operations.push(e),this}},{key:"applyOperations",value:function(e,t){var a=this;return e.forEach(function(e){return a.applyOperation(e,t)}),this}},{key:"call",value:function(e){for(var t=arguments.length,a=Array(t>1?t-1:0),n=1;n<t;n++)a[n-1]=arguments[n];return e.apply(void 0,[this].concat(a)),this}},{key:"setOperationFlag",value:function(e,t){return this.flags[e]=t,this}},{key:"unsetOperationFlag",value:function(e){return delete this.flags[e],this}},{key:"apply",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return _logger2.default.deprecate("0.22.0","The `change.apply()` method is deprecrated and no longer necessary, as all operations are applied immediately when invoked. You can access the change's state, which is already pre-computed, directly via `change.state` instead."),this.state}},{key:"kind",get:function(){return"change"}}]),e}();Change.prototype[_modelTypes2.default.CHANGE]=!0,Object.keys(_changes2.default).forEach(function(e){Change.prototype[e]=function(){for(var t=arguments.length,a=Array(t),n=0;n<t;n++)a[n]=arguments[n];return debug(e,{args:a}),this.call.apply(this,[_changes2.default[e]].concat(a)),this}}),["hasUndos","hasRedos","isBlurred","isFocused","isCollapsed","isExpanded","isBackward","isForward","startKey","endKey","startOffset","endOffset","anchorKey","focusKey","anchorOffset","focusOffset","startBlock","endBlock","anchorBlock","focusBlock","startInline","endInline","anchorInline","focusInline","startText","endText","anchorText","focusText","characters","marks","blocks","fragment","inlines","texts","isEmpty"].forEach(function(e){Object.defineProperty(Change.prototype,e,{get:function(){return _logger2.default.deprecate("0.22.0","You attempted to access the `"+e+"` property of what was previously a `state` object but is now a `change` object. This syntax has been deprecated as plugins are now passed `change` objects instead of `state` objects."),this.state[e]}})}),Change.prototype.transform=function(){return _logger2.default.deprecate("0.22.0","You attempted to call `.transform()` on what was previously a `state` object but is now already a `change` object. This syntax has been deprecated as plugins are now passed `change` objects instead of `state` objects."),this},exports.default=Change},{"../changes":221,"../constants/model-types":234,"../operations/apply":252,"../utils/logger":271,debug:3,"lodash/pick":200}],239:[function(require,module,exports){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),_modelTypes=require("../constants/model-types"),_modelTypes2=_interopRequireDefault(_modelTypes),_mark=require("./mark"),_mark2=_interopRequireDefault(_mark),_isPlainObject=require("is-plain-object"),_isPlainObject2=_interopRequireDefault(_isPlainObject),_logger=require("../utils/logger"),_logger2=_interopRequireDefault(_logger),_immutable=window.Immutable,DEFAULTS={marks:new _immutable.Set,text:""},Character=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"kind",get:function(){return"character"}}],[{key:"create",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(t.isCharacter(e))return e;if("string"==typeof e&&(e={text:e}),(0,_isPlainObject2.default)(e)){var r=e,a=r.marks;return new t({text:r.text,marks:_mark2.default.createSet(a)})}throw new Error("`Character.create` only accepts objects, strings or characters, but you passed it: "+e)}},{key:"createList",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if("string"==typeof e&&(e=e.split("")),_immutable.List.isList(e)||Array.isArray(e)){return new _immutable.List(e.map(t.create))}throw new Error("`Block.createList` only accepts strings, arrays or lists, but you passed it: "+e)}},{key:"isCharacter",value:function(e){return!(!e||!e[_modelTypes2.default.CHARACTER])}},{key:"isCharacterList",value:function(e){return _immutable.List.isList(e)&&e.every(function(e){return t.isCharacter(e)})}},{key:"createListFromText",value:function(e){return _logger2.default.deprecate("0.22.0","The `Character.createListFromText(string)` method is deprecated, use `Character.createList(string)` instead."),this.createList(e)}}]),t}((0,_immutable.Record)(DEFAULTS));Character.prototype[_modelTypes2.default.CHARACTER]=!0,exports.default=Character},{"../constants/model-types":234,"../utils/logger":271,"./mark":244,"is-plain-object":66}],240:[function(require,module,exports){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var _isPlainObject=require("is-plain-object"),_isPlainObject2=_interopRequireDefault(_isPlainObject),_immutable=window.Immutable,Data={create:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(_immutable.Map.isMap(e))return e;if((0,_isPlainObject2.default)(e))return new _immutable.Map(e);throw new Error("`Data.create` only accepts objects or maps, but you passed it: "+e)}};exports.default=Data},{"is-plain-object":66}],241:[function(require,module,exports){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();require("./block"),require("./inline");var _data=require("./data"),_data2=_interopRequireDefault(_data),_node=require("./node"),_node2=_interopRequireDefault(_node),_modelTypes=require("../constants/model-types"),_modelTypes2=_interopRequireDefault(_modelTypes),_generateKey=require("../utils/generate-key"),_generateKey2=_interopRequireDefault(_generateKey),_isPlainObject=require("is-plain-object"),_isPlainObject2=_interopRequireDefault(_isPlainObject),_immutable=window.Immutable,DEFAULTS={data:new _immutable.Map,key:void 0,nodes:new _immutable.List},Document=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"kind",get:function(){return"document"}},{key:"isEmpty",get:function(){return""==this.text}},{key:"text",get:function(){return this.getText()}}],[{key:"create",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(t.isDocument(e))return e;if((_immutable.List.isList(e)||Array.isArray(e))&&(e={nodes:e}),(0,
_isPlainObject2.default)(e)){var r=e,n=r.data,o=r.key,i=r.nodes;return new t({key:o||(0,_generateKey2.default)(),data:_data2.default.create(n),nodes:_node2.default.createList(i)})}throw new Error("`Document.create` only accepts objects, arrays, lists or documents, but you passed it: "+e)}},{key:"isDocument",value:function(e){return!(!e||!e[_modelTypes2.default.DOCUMENT])}}]),t}((0,_immutable.Record)(DEFAULTS));Document.prototype[_modelTypes2.default.DOCUMENT]=!0,Object.getOwnPropertyNames(_node2.default.prototype).forEach(function(e){"constructor"!=e&&(Document.prototype[e]=_node2.default.prototype[e])}),exports.default=Document},{"../constants/model-types":234,"../utils/generate-key":265,"./block":237,"./data":240,"./inline":243,"./node":245,"is-plain-object":66}],242:[function(require,module,exports){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function shouldMerge(e,t){return!!t&&("set_selection"==e.type&&"set_selection"==t.type||"insert_text"==e.type&&"insert_text"==t.type&&e.offset==t.offset+t.text.length&&(0,_isEqual2.default)(e.path,t.path)||"remove_text"==e.type&&"remove_text"==t.type&&e.offset+e.text.length==t.offset&&(0,_isEqual2.default)(e.path,t.path))}function shouldSkip(e,t){return!!t&&("set_selection"==e.type&&"set_selection"==t.type)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,r,o){return r&&e(t.prototype,r),o&&e(t,o),t}}(),_modelTypes=require("../constants/model-types"),_modelTypes2=_interopRequireDefault(_modelTypes),_debug=require("debug"),_debug2=_interopRequireDefault(_debug),_isEqual=require("lodash/isEqual"),_isEqual2=_interopRequireDefault(_isEqual),_isPlainObject=require("is-plain-object"),_isPlainObject2=_interopRequireDefault(_isPlainObject),_immutable=window.Immutable,debug=(0,_debug2.default)("slate:history"),DEFAULTS={redos:new _immutable.Stack,undos:new _immutable.Stack},History=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"save",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this,o=r,n=o.undos,i=o.redos,s=t.merge,u=t.skip,l=n.peek(),a=l&&l[l.length-1];if(null==u&&(u=shouldSkip(e,a)),u)return r;if(null==s&&(s=shouldMerge(e,a)),debug("save",{operation:e,merge:s}),s){var c=l.slice();c.push(e),n=n.pop(),n=n.push(c)}else{var p=[e];n=n.push(p)}return n.length>100&&(n=n.take(100)),i=i.clear(),r=r.set("undos",n).set("redos",i)}},{key:"kind",get:function(){return"history"}}],[{key:"create",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(t.isHistory(e))return e;if((0,_isPlainObject2.default)(e)){return new t({undos:e.undos||new _immutable.Stack,redos:e.redos||new _immutable.Stack})}throw new Error("`History.create` only accepts objects or histories, but you passed it: "+e)}},{key:"isHistory",value:function(e){return!(!e||!e[_modelTypes2.default.HISTORY])}}]),t}((0,_immutable.Record)(DEFAULTS));History.prototype[_modelTypes2.default.HISTORY]=!0,exports.default=History},{"../constants/model-types":234,debug:3,"is-plain-object":66,"lodash/isEqual":191}],243:[function(require,module,exports){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();require("./document");var _data=require("./data"),_data2=_interopRequireDefault(_data),_node=require("./node"),_node2=_interopRequireDefault(_node),_text=require("./text"),_text2=_interopRequireDefault(_text),_modelTypes=require("../constants/model-types"),_modelTypes2=_interopRequireDefault(_modelTypes),_generateKey=require("../utils/generate-key"),_generateKey2=_interopRequireDefault(_generateKey),_isPlainObject=require("is-plain-object"),_isPlainObject2=_interopRequireDefault(_isPlainObject),_immutable=window.Immutable,DEFAULTS={data:new _immutable.Map,isVoid:!1,key:void 0,nodes:new _immutable.List,type:void 0},Inline=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"kind",get:function(){return"inline"}},{key:"isEmpty",get:function(){return""==this.text}},{key:"text",get:function(){return this.getText()}}],[{key:"create",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(t.isInline(e))return e;if("string"==typeof e&&(e={type:e}),(0,_isPlainObject2.default)(e)){var r=e,n=r.data,i=r.isVoid,o=r.key,a=r.type,u=e,s=u.nodes;if("string"!=typeof a)throw new Error("`Inline.create` requires a block `type` string.");null!=s&&0!=s.length||(s=[_text2.default.create()]);return new t({data:_data2.default.create(n),isVoid:!!i,key:o||(0,_generateKey2.default)(),nodes:_node2.default.createList(s),type:a})}throw new Error("`Inline.create` only accepts objects, strings or inlines, but you passed it: "+e)}},{key:"createList",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(_immutable.List.isList(e)||Array.isArray(e)){return new _immutable.List(e.map(t.create))}throw new Error("`Inline.createList` only accepts arrays or lists, but you passed it: "+e)}},{key:"isInline",value:function(e){return!(!e||!e[_modelTypes2.default.INLINE])}},{key:"isInlineList",value:function(e){return _immutable.List.isList(e)&&e.every(function(e){return t.isInline(e)})}}]),t}((0,_immutable.Record)(DEFAULTS));Inline.prototype[_modelTypes2.default.INLINE]=!0,Object.getOwnPropertyNames(_node2.default.prototype).forEach(function(e){"constructor"!=e&&(Inline.prototype[e]=_node2.default.prototype[e])}),exports.default=Inline},{"../constants/model-types":234,"../utils/generate-key":265,"./data":240,"./document":241,"./node":245,"./text":251,"is-plain-object":66}],244:[function(require,module,exports){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),_modelTypes=require("../constants/model-types"),_modelTypes2=_interopRequireDefault(_modelTypes),_data=require("./data"),_data2=_interopRequireDefault(_data),_isPlainObject=require("is-plain-object"),_isPlainObject2=_interopRequireDefault(_isPlainObject),_memoize=require("../utils/memoize"),_memoize2=_interopRequireDefault(_memoize),_immutable=window.Immutable,DEFAULTS={data:new _immutable.Map,type:void 0},Mark=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"getComponent",value:function(e){return e.__getComponent(this)}},{key:"kind",get:function(){return"mark"}}],[{key:"create",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(t.isMark(e))return e;if("string"==typeof e&&(e={type:e}),(0,_isPlainObject2.default)(e)){var r=e,a=r.data,n=r.type;if("string"!=typeof n)throw new Error("`Mark.create` requires a mark `type` string.");return new t({type:n,data:_data2.default.create(a)})}throw new Error("`Mark.create` only accepts objects, strings or marks, but you passed it: "+e)}},{key:"createSet",value:function(e){if(_immutable.Set.isSet(e)||Array.isArray(e)){return new _immutable.Set(e.map(t.create))}if(null==e)return new _immutable.Set;throw new Error("`Mark.createSet` only accepts sets, arrays or null, but you passed it: "+e)}},{key:"createProperties",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(t.isMark(e))return{data:e.data,type:e.type};if("string"==typeof e)return{type:e};if((0,_isPlainObject2.default)(e)){var r={};return"type"in e&&(r.type=e.type),"data"in e&&(r.data=_data2.default.create(e.data)),r}throw new Error("`Mark.createProperties` only accepts objects, strings or marks, but you passed it: "+e)}},{key:"isMark",value:function(e){return!(!e||!e[_modelTypes2.default.MARK])}},{key:"isMarkSet",value:function(e){return _immutable.Set.isSet(e)&&e.every(function(e){return t.isMark(e)})}}]),t}((0,_immutable.Record)(DEFAULTS));Mark.prototype[_modelTypes2.default.MARK]=!0,(0,_memoize2.default)(Mark.prototype,["getComponent"],{takesArguments:!0}),exports.default=Mark},{"../constants/model-types":234,"../utils/memoize":272,"./data":240,"is-plain-object":66}],245:[function(require,module,exports){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function normalizeKey(e){if("string"==typeof e)return e;if(_logger2.default.deprecate("0.14.0","An object was passed to a Node method instead of a `key` string. This was previously supported, but is being deprecated because it can have a negative impact on performance. The object in question was:",e),Node.isNode(e))return e.key;throw new Error("Invalid `key` argument! It must be either a block, an inline, a text, or a string. You passed: "+e)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),_block=require("./block"),_block2=_interopRequireDefault(_block),_data=require("./data"),_data2=_interopRequireDefault(_data),_document=require("./document"),_document2=_interopRequireDefault(_document),_inline=require("./inline"),_inline2=_interopRequireDefault(_inline),_text=require("./text"),_text2=_interopRequireDefault(_text),_direction=require("direction"),_direction2=_interopRequireDefault(_direction),_generateKey=require("../utils/generate-key"),_generateKey2=_interopRequireDefault(_generateKey),_isIndexInRange=require("../utils/is-index-in-range"),_isIndexInRange2=_interopRequireDefault(_isIndexInRange),_isPlainObject=require("is-plain-object"),_isPlainObject2=_interopRequireDefault(_isPlainObject),_logger=require("../utils/logger"),_logger2=_interopRequireDefault(_logger),_memoize=require("../utils/memoize"),_memoize2=_interopRequireDefault(_memoize),_immutable=window.Immutable,Node=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"areDescendantsSorted",value:function(e,t){e=normalizeKey(e),t=normalizeKey(t);var n=void 0;return this.forEachDescendant(function(r){return r.key===e?(n=!0,!1):r.key===t?(n=!1,!1):void 0}),n}},{key:"assertChild",value:function(e){var t=this.getChild(e);if(!t)throw e=normalizeKey(e),new Error('Could not find a child node with key "'+e+'".');return t}},{key:"assertDescendant",value:function(e){var t=this.getDescendant(e);if(!t)throw e=normalizeKey(e),new Error('Could not find a descendant node with key "'+e+'".');return t}},{key:"assertNode",value:function(e){var t=this.getNode(e);if(!t)throw e=normalizeKey(e),new Error('Could not find a node with key "'+e+'".');return t}},{key:"assertPath",value:function(e){var t=this.getDescendantAtPath(e);if(!t)throw new Error('Could not find a descendant at path "'+e+'".');return t}},{key:"filterDescendants",value:function(e){var t=[];return this.forEachDescendant(function(n,r,s){e(n,r,s)&&t.push(n)}),(0,_immutable.List)(t)}},{key:"findDescendant",value:function(e){var t=null;return this.forEachDescendant(function(n,r,s){if(e(n,r,s))return t=n,!1}),t}},{key:"forEachDescendant",value:function(e){var t=void 0;return this.nodes.forEach(function(n,r,s){return!1===e(n,r,s)?(t=!1,!1):"text"!=n.kind?t=n.forEachDescendant(e):void 0}),t}},{key:"getAncestors",value:function(e){if((e=normalizeKey(e))==this.key)return(0,_immutable.List)();if(this.hasChild(e))return(0,_immutable.List)([this]);var t=void 0;return this.nodes.find(function(n){return"text"!=n.kind&&(t=n.getAncestors(e))}),t?t.unshift(this):null}},{key:"getBlocks",value:function(){var e=this.getBlocksAsArray();return new _immutable.List(e)}},{key:"getBlocksAsArray",value:function(){return this.nodes.reduce(function(e,t){return"block"!=t.kind?e:t.isLeafBlock()?(e.push(t),e):e.concat(t.getBlocksAsArray())},[])}},{key:"getBlocksAtRange",value:function(e){var t=this.getBlocksAtRangeAsArray(e);return new _immutable.List(new _immutable.OrderedSet(t))}},{key:"getBlocksAtRangeAsArray",value:function(e){if(e=e.normalize(this),e.isUnset)return[];var t=e,n=t.startKey,r=t.endKey,s=this.getClosestBlock(n);if(n==r)return[s];var i=this.getClosestBlock(r),a=this.getBlocksAsArray(),o=a.indexOf(s),u=a.indexOf(i);return a.slice(o,u+1)}},{key:"getBlocksByType",value:function(e){var t=this.getBlocksByTypeAsArray(e);return new _immutable.List(t)}},{key:"getBlocksByTypeAsArray",value:function(e){return this.nodes.reduce(function(t,n){return"block"!=n.kind?t:n.isLeafBlock()&&n.type==e?(t.push(n),t):t.concat(n.getBlocksByTypeAsArray(e))},[])}},{key:"getCharacters",value:function(){var e=this.getCharactersAsArray();return new _immutable.List(e)}},{key:"getCharactersAsArray",value:function(){return this.nodes.reduce(function(e,t){return"text"==t.kind?e.concat(t.characters.toArray()):e.concat(t.getCharactersAsArray())},[])}},{key:"getCharactersAtRange",value:function(e){var t=this.getCharactersAtRangeAsArray(e);return new _immutable.List(t)}},{key:"getCharactersAtRangeAsArray",value:function(e){return e=e.normalize(this),e.isUnset?[]:this.getTextsAtRange(e).reduce(function(t,n){var r=n.characters.filter(function(t,r){return(0,_isIndexInRange2.default)(r,n,e)}).toArray();return t.concat(r)},[])}},{key:"getChild",value:function(e){return e=normalizeKey(e),this.nodes.find(function(t){return t.key==e})}},{key:"getClosest",value:function(e,t){e=normalizeKey(e);var n=this.getAncestors(e);if(!n)throw new Error('Could not find a descendant node with key "'+e+'".');return n.rest().findLast(t)}},{key:"getClosestBlock",value:function(e){return this.getClosest(e,function(e){return"block"==e.kind})}},{key:"getClosestInline",value:function(e){return this.getClosest(e,function(e){return"inline"==e.kind})}},{key:"getClosestVoid",value:function(e){return this.getClosest(e,function(e){return e.isVoid})}},{key:"getCommonAncestor",value:function(e,t){if(e=normalizeKey(e),t=normalizeKey(t),e==this.key)return this;if(t==this.key)return this;this.assertDescendant(e),this.assertDescendant(t);for(var n=new _immutable.List,r=this.getParent(e),s=this.getParent(t);r;)n=n.push(r),r=this.getParent(r.key);for(;s;){if(n.includes(s))return s;s=this.getParent(s.key)}}},{key:"getComponent",value:function(e){return e.__getComponent(this)}},{key:"getDecorators",value:function(e){return e.__getDecorators(this)}},{key:"getDepth",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return this.assertDescendant(e),this.hasChild(e)?t:this.getFurthestAncestor(e).getDepth(e,t+1)}},{key:"getDescendant",value:function(e){e=normalizeKey(e);var t=null,n=this.nodes.find(function(n){return n.key===e?n:"text"!==n.kind&&(t=n.getDescendant(e))});return t||n}},{key:"getDescendantAtPath",value:function(e){for(var t=this,n=0;n<e.length;n++){var r=e[n];if(!t)return;if(!t.nodes)return;t=t.nodes.get(r)}return t}},{key:"getDescendantDecorators",value:function(e,t){if(!t.hasDecorators)return[];for(var n=this.assertDescendant(e),r=this.getFurthestAncestor(e),s=[];r!=n;)s=s.concat(r.getDecorators(t)),r=r.getFurthestAncestor(e);return s=s.concat(n.getDecorators(t))}},{key:"getFirstText",value:function(){var e=null,t=this.nodes.find(function(t){return"text"==t.kind||(e=t.getFirstText())});return e||t}},{key:"getFragmentAtRange",value:function(e){if(e=e.normalize(this),e.isUnset)return _document2.default.create();for(var t=this,n=e,r=n.startKey,s=n.startOffset,i=n.endKey,a=n.endOffset,o=t.assertDescendant(r),u=t.assertDescendant(i),d=o,c=void 0,l=void 0;l=t.getParent(d.key);){var f=l.nodes.indexOf(d),g="text"==d.kind?s:d.nodes.indexOf(c);l=l.splitNode(f,g),t=t.updateNode(l),c=l.nodes.get(f+1),d=l}for(d=u;l=t.getParent(d.key);){var h=l.nodes.indexOf(d),y="text"==d.kind?a:d.nodes.indexOf(c);l=l.splitNode(h,y),t=t.updateNode(l),c=l.nodes.get(h+1),d=l}var k=t.getNextText(r),v=t.getNextSibling(t.getFurthestAncestor(r).key),A=r==i?t.getFurthestAncestor(k.key):t.getFurthestAncestor(i),m=t.nodes.indexOf(v),p=t.nodes.indexOf(A),x=t.nodes.slice(m,p+1);return _document2.default.create({nodes:x})}},{key:"getFurthest",value:function(e,t){var n=this.getAncestors(e);if(!n)throw e=normalizeKey(e),new Error('Could not find a descendant node with key "'+e+'".');return n.rest().find(t)}},{key:"getFurthestBlock",value:function(e){return this.getFurthest(e,function(e){return"block"==e.kind})}},{key:"getFurthestInline",value:function(e){return this.getFurthest(e,function(e){return"inline"==e.kind})}},{key:"getFurthestAncestor",value:function(e){return e=normalizeKey(e),this.nodes.find(function(t){return t.key==e||"text"!=t.kind&&t.hasDescendant(e)})}},{key:"getFurthestOnlyChildAncestor",value:function(e){var t=this.getAncestors(e);if(!t)throw e=normalizeKey(e),new Error('Could not find a descendant node with key "'+e+'".');return t.skipLast().reverse().takeUntil(function(e){return e.nodes.size>1}).last()}},{key:"getInlines",value:function(){var e=this.getInlinesAsArray();return new _immutable.List(e)}},{key:"getInlinesAsArray",value:function(){var e=[];return this.nodes.forEach(function(t){"text"!=t.kind&&(t.isLeafInline()?e.push(t):e=e.concat(t.getInlinesAsArray()))}),e}},{key:"getInlinesAtRange",value:function(e){var t=this.getInlinesAtRangeAsArray(e);return new _immutable.List(new _immutable.OrderedSet(t))}},{key:"getInlinesAtRangeAsArray",value:function(e){var t=this;return e=e.normalize(this),e.isUnset?[]:this.getTextsAtRangeAsArray(e).map(function(e){return t.getClosestInline(e.key)}).filter(function(e){return e})}},{key:"getInlinesByType",value:function(e){var t=this.getInlinesByTypeAsArray(e);return new _immutable.List(t)}},{key:"getInlinesByTypeAsArray",value:function(e){return this.nodes.reduce(function(t,n){return"text"==n.kind?t:n.isLeafInline()&&n.type==e?(t.push(n),t):t.concat(n.getInlinesByTypeAsArray(e))},[])}},{key:"getKeys",value:function(){var e=[];return this.forEachDescendant(function(t){e.push(t.key)}),new _immutable.Set(e)}},{key:"getLastText",value:function(){var e=null,t=this.nodes.findLast(function(t){return"text"==t.kind||(e=t.getLastText())});return e||t}},{key:"getMarks",value:function(){var e=this.getMarksAsArray();return new _immutable.Set(e)}},{key:"getOrderedMarks",value:function(){var e=this.getMarksAsArray();return new _immutable.OrderedSet(e)}},{key:"getMarksAsArray",value:function(){return this.nodes.reduce(function(e,t){return e.concat(t.getMarksAsArray())},[])}},{key:"getMarksAtRange",value:function(e){var t=this.getMarksAtRangeAsArray(e);return new _immutable.Set(t)}},{key:"getOrderedMarksAtRange",value:function(e){var t=this.getMarksAtRangeAsArray(e);return new _immutable.OrderedSet(t)}},{key:"getActiveMarksAtRange",value:function(e){var t=this.getActiveMarksAtRangeAsArray(e);return new _immutable.Set(t)}},{key:"getMarksAtRangeAsArray",value:function(e){if(e=e.normalize(this),e.isUnset)return[];var t=e,n=t.startKey,r=t.startOffset;if(e.isCollapsed&&0==r){var s=this.getPreviousText(n);if(!s||0==s.text.length)return[];return s.characters.get(s.text.length-1).marks.toArray()}if(e.isCollapsed){return this.getDescendant(n).characters.get(e.startOffset-1).marks.toArray()}return this.getCharactersAtRange(e).reduce(function(e,t){return t.marks.toArray().forEach(function(t){return e.push(t)}),e},[])}},{key:"getActiveMarksAtRangeAsArray",value:function(e){if(e=e.normalize(this),e.isUnset)return[];var t=e,n=t.startKey,r=t.startOffset;if(e.isCollapsed&&0==r){var s=this.getPreviousText(n);if(!s||!s.length)return[];return s.characters.get(s.length-1).marks.toArray()}if(e.isCollapsed){return this.getDescendant(n).characters.get(e.startOffset-1).marks.toArray()}var i=this.getCharactersAtRange(e),a=i.first();if(!a)return[];var o=a.marks;return i.slice(1).forEach(function(e){return o=o.intersect(e.marks),0!=o.size}),o.toArray()}},{key:"getMarksByType",value:function(e){var t=this.getMarksByTypeAsArray(e);return new _immutable.Set(t)}},{key:"getOrderedMarksByType",value:function(e){var t=this.getMarksByTypeAsArray(e);return new _immutable.OrderedSet(t)}},{key:"getMarksByTypeAsArray",value:function(e){return this.nodes.reduce(function(t,n){return"text"==n.kind?t.concat(n.getMarksAsArray().filter(function(t){return t.type==e})):t.concat(n.getMarksByTypeAsArray(e))},[])}},{key:"getNextBlock",value:function(e){var t=this.assertDescendant(e),n=void 0;if("block"==t.kind)n=t.getLastText();else{n=this.getClosestBlock(e).getLastText()}var r=this.getNextText(n.key);return r?this.getClosestBlock(r.key):null}},{key:"getNextSibling",value:function(e){e=normalizeKey(e);var t=this.getParent(e),n=t.nodes.skipUntil(function(t){return t.key==e});if(0==n.size)throw new Error('Could not find a child node with key "'+e+'".');return n.get(1)}},{key:"getNextText",value:function(e){return e=normalizeKey(e),this.getTexts().skipUntil(function(t){return t.key==e}).get(1)}},{key:"getNode",value:function(e){return e=normalizeKey(e),this.key==e?this:this.getDescendant(e)}},{key:"getNodeAtPath",value:function(e){return e.length?this.getDescendantAtPath(e):this}},{key:"getOffset",value:function(e){this.assertDescendant(e);var t=this.getFurthestAncestor(e),n=this.nodes.takeUntil(function(e){return e==t}).reduce(function(e,t){return e+t.text.length},0);return this.hasChild(e)?n:n+t.getOffset(e)}},{key:"getOffsetAtRange",value:function(e){if(e=e.normalize(this),e.isUnset)throw new Error("The range cannot be unset to calculcate its offset.");if(e.isExpanded)throw new Error("The range must be collapsed to calculcate its offset.");var t=e,n=t.startKey,r=t.startOffset;return this.getOffset(n)+r}},{key:"getParent",value:function(e){if(this.hasChild(e))return this;var t=null;return this.nodes.find(function(n){return"text"!=n.kind&&(t=n.getParent(e))}),t}},{key:"getPath",value:function(e){var t=this.assertNode(e),n=this.getAncestors(e),r=[];return n.reverse().forEach(function(e){var n=e.nodes.indexOf(t);r.unshift(n),t=e}),r}},{key:"getPreviousBlock",value:function(e){var t=this.assertDescendant(e),n=void 0;if("block"==t.kind)n=t.getFirstText();else{n=this.getClosestBlock(e).getFirstText()}var r=this.getPreviousText(n.key);return r?this.getClosestBlock(r.key):null}},{key:"getPreviousSibling",value:function(e){e=normalizeKey(e);var t=this.getParent(e),n=t.nodes.takeUntil(function(t){return t.key==e});if(n.size==t.nodes.size)throw new Error('Could not find a child node with key "'+e+'".');return n.last()}},{key:"getPreviousText",value:function(e){return e=normalizeKey(e),this.getTexts().takeUntil(function(t){return t.key==e}).last()}},{key:"getSelectionIndexes",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.startKey,r=e.endKey;if(!t||e.isBlurred)return null;if(n==r){var s=this.getFurthestAncestor(n),i=s?this.nodes.indexOf(s):null;return{start:i,end:i+1}}var a=null,o=null;return this.nodes.forEach(function(e,t){return"text"==e.kind?(null==a&&e.key==n&&(a=t),null==o&&e.key==r&&(o=t+1)):(null==a&&e.hasDescendant(n)&&(a=t),null==o&&e.hasDescendant(r)&&(o=t+1)),null!=a&&null!=o}),t&&null==a&&(a=0),t&&null==o&&(o=this.nodes.size),null==a?null:{start:a,end:o}}},{key:"getText",value:function(){return this.nodes.reduce(function(e,t){return e+t.text},"")}},{key:"getTextAtOffset",value:function(e){if(0==e)return this.getFirstText();if(e==this.text.length)return this.getLastText();if(e<0||e>this.text.length)return null;var t=0;return this.getTexts().find(function(n,r,s){return(t+=n.text.length)>e})}},{key:"getTextDirection",value:function(){var e=(0,_direction2.default)(this.text);return"neutral"==e?void 0:e}},{key:"getTexts",value:function(){var e=this.getTextsAsArray();return new _immutable.List(e)}},{key:"getTextsAsArray",value:function(){var e=[];return this.nodes.forEach(function(t){"text"==t.kind?e.push(t):e=e.concat(t.getTextsAsArray())}),e}},{key:"getTextsAtRange",value:function(e){var t=this.getTextsAtRangeAsArray(e);return new _immutable.List(t)}},{key:"getTextsAtRangeAsArray",value:function(e){if(e=e.normalize(this),e.isUnset)return[];var t=e,n=t.startKey,r=t.endKey,s=this.getDescendant(n);if(n==r)return[s];var i=this.getDescendant(r),a=this.getTextsAsArray(),o=a.indexOf(s),u=a.indexOf(i);return a.slice(o,u+1)}},{key:"hasChild",value:function(e){return!!this.getChild(e)}},{key:"hasDescendant",value:function(e){return!!this.getDescendant(e)}},{key:"hasNode",value:function(e){return!!this.getNode(e)}},{key:"hasVoidParent",value:function(e){return!!this.getClosest(e,function(e){return e.isVoid})}},{key:"insertNode",value:function(e,t){var n=this.getKeys();n.contains(t.key)&&(t=t.regenerateKey()),"text"!=t.kind&&(t=t.mapDescendants(function(e){return n.contains(e.key)?e.regenerateKey():e}));var r=this.nodes.insert(e,t);return this.set("nodes",r)}},{key:"isInRange",value:function(e){e=e.normalize(this);var t=this,n=e,r=n.startKey,s=n.endKey,i=n.isCollapsed;if(t.key==r||t.key==s||t.hasDescendant(r)||t.hasDescendant(s))return!0;if(i)return!1;var a=t.getTextsAtRange(e),o=!1;return a.forEach(function(e){return t.hasDescendant(e.key)&&(o=!0),o}),o}},{key:"isLeafBlock",value:function(){return"block"==this.kind&&this.nodes.every(function(e){return"block"!=e.kind})}},{key:"isLeafInline",value:function(){return"inline"==this.kind&&this.nodes.every(function(e){return"inline"!=e.kind})}},{key:"mergeNode",value:function(e,t){var n=this,r=n.nodes.get(e),s=n.nodes.get(t);if(r.kind!=s.kind)throw new Error('Tried to merge two nodes of different kinds: "'+r.kind+'" and "'+s.kind+'".');if("text"==r.kind){var i=r.characters.concat(s.characters);r=r.set("characters",i)}else{var a=r.nodes.concat(s.nodes);r=r.set("nodes",a)}return n=n.removeNode(t),n=n.removeNode(e),n=n.insertNode(e,r)}},{key:"mapChildren",value:function(e){var t=this,n=this.nodes;return n.forEach(function(r,s){var i=e(r,s,t.nodes);i!=r&&(n=n.set(i.key,i))}),this.set("nodes",n)}},{key:"mapDescendants",value:function(e){var t=this,n=this.nodes;return n.forEach(function(r,s){var i=r;if("text"!=i.kind&&(i=i.mapDescendants(e)),(i=e(i,s,t.nodes))!=r){var a=n.indexOf(r);n=n.set(a,i)}}),this.set("nodes",n)}},{key:"regenerateKey",value:function(){var e=(0,_generateKey2.default)();return this.set("key",e)}},{key:"removeDescendant",value:function(e){e=normalizeKey(e);var t=this,n=t.getParent(e);if(!n)throw new Error('Could not find a descendant node with key "'+e+'".');var r=n.nodes.findIndex(function(t){return t.key===e}),s=n.nodes.splice(r,1);return n=n.set("nodes",s),t=t.updateNode(n)}},{key:"removeNode",value:function(e){var t=this.nodes.splice(e,1);return this.set("nodes",t)}},{key:"splitNode",value:function(e,t){var n=this,r=n.nodes.get(e),s=void 0,i=void 0;if("text"==r.kind){var a=r.characters.take(t),o=r.characters.skip(t);s=r.set("characters",a),i=r.set("characters",o).regenerateKey()}else{var u=r.nodes.take(t),d=r.nodes.skip(t);s=r.set("nodes",u),i=r.set("nodes",d).regenerateKey()}return n=n.removeNode(e),n=n.insertNode(e,i),n=n.insertNode(e,s)}},{key:"updateNode",value:function(e){if(e.key==this.key)return e;var t=this.assertDescendant(e.key);return this.getAncestors(e.key).reverse().forEach(function(n){var r=n,s=r.nodes,i=s.indexOf(t);t=n,s=s.set(i,e),n=n.set("nodes",s),e=n}),e}},{key:"validate",value:function(e){return e.__validate(this)}},{key:"areDescendantSorted",value:function(e,t){return _logger2.default.deprecate("0.19.0","The Node.areDescendantSorted(first, second) method is deprecated, please use `Node.areDescendantsSorted(first, second) instead."),this.areDescendantsSorted(e,t)}},{key:"concatChildren",value:function(e){return _logger2.default.deprecate("0.19.0","The `Node.concatChildren(nodes)` method is deprecated."),e=this.nodes.concat(e),this.set("nodes",e)}},{key:"decorateTexts",value:function(e){return _logger2.default.deprecate("0.19.0","The `Node.decorateTexts(decorator) method is deprecated."),this.mapDescendants(function(t){return"text"==t.kind?t.decorateCharacters(e):t})}},{key:"filterDescendantsDeep",value:function(e){return _logger2.default.deprecate("0.19.0","The Node.filterDescendantsDeep(iterator) method is deprecated."),this.nodes.reduce(function(t,n,r,s){return"text"!=n.kind&&(t=t.concat(n.filterDescendantsDeep(e))),e(n,r,s)&&(t=t.push(n)),t},new _immutable.List)}},{key:"findDescendantDeep",value:function(e){_logger2.default.deprecate("0.19.0","The Node.findDescendantDeep(iterator) method is deprecated.");var t=void 0;return this.forEachDescendant(function(n){if(e(n))return t=n,!1}),t}},{key:"getChildrenBetween",value:function(e,t){return _logger2.default.deprecate("0.19.0","The `Node.getChildrenBetween(start, end)` method is deprecated."),e=this.assertChild(e),e=this.nodes.indexOf(e),t=this.assertChild(t),t=this.nodes.indexOf(t),this.nodes.slice(e+1,t)}},{key:"getChildrenBetweenIncluding",value:function(e,t){return _logger2.default.deprecate("0.19.0","The `Node.getChildrenBetweenIncluding(start, end)` method is deprecated."),e=this.assertChild(e),e=this.nodes.indexOf(e),t=this.assertChild(t),t=this.nodes.indexOf(t),this.nodes.slice(e,t+1)}},{key:"getHighestChild",value:function(e){return _logger2.default.deprecate("0.19.0","The `Node.getHighestChild(key) method is deprecated, please use `Node.getFurthestAncestor(key) instead."),this.getFurthestAncestor(e)}
},{key:"getHighestOnlyChildParent",value:function(e){return _logger2.default.deprecate("0.19.0","The `Node.getHighestOnlyChildParent(key)` method is deprecated, please use `Node.getFurthestOnlyChildAncestor` instead."),this.getFurthestOnlyChildAncestor(e)}},{key:"isInlineSplitAtRange",value:function(e){if(_logger2.default.deprecate("0.19.0","The `Node.isInlineSplitAtRange(range)` method is deprecated."),e=e.normalize(this),e.isExpanded)throw new Error;var t=e,n=t.startKey,r=this.getFurthestInline(n)||this.getDescendant(n);return e.isAtStartOf(r)||e.isAtEndOf(r)}}],[{key:"create",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(e.isNode(t))return t;if((0,_isPlainObject2.default)(t))switch(t.kind){case"block":return _block2.default.create(t);case"document":return _document2.default.create(t);case"inline":return _inline2.default.create(t);case"text":return _text2.default.create(t);default:throw new Error("`Node.create` requires a `kind` string.")}throw new Error("`Node.create` only accepts objects or nodes but you passed it: "+t)}},{key:"createList",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(_immutable.List.isList(t)||Array.isArray(t)){return new _immutable.List(t.map(e.create))}throw new Error("`Node.createList` only accepts lists or arrays, but you passed it: "+t)}},{key:"createProperties",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(_block2.default.isBlock(e)||_inline2.default.isInline(e))return{data:e.data,isVoid:e.isVoid,type:e.type};if("string"==typeof e)return{type:e};if((0,_isPlainObject2.default)(e)){var t={};return"type"in e&&(t.type=e.type),"data"in e&&(t.data=_data2.default.create(e.data)),"isVoid"in e&&(t.isVoid=e.isVoid),t}throw new Error("`Node.createProperties` only accepts objects, strings, blocks or inlines, but you passed it: "+e)}},{key:"isNode",value:function(e){return _block2.default.isBlock(e)||_document2.default.isDocument(e)||_inline2.default.isInline(e)||_text2.default.isText(e)}},{key:"isNodeList",value:function(t){return _immutable.List.isList(t)&&t.every(function(t){return e.isNode(t)})}}]),e}();(0,_memoize2.default)(Node.prototype,["getBlocks","getBlocksAsArray","getCharacters","getCharactersAsArray","getFirstText","getInlines","getInlinesAsArray","getKeys","getLastText","getMarks","getOrderedMarks","getMarksAsArray","getText","getTextDirection","getTexts","getTextsAsArray","isLeafBlock","isLeafInline"],{takesArguments:!1}),(0,_memoize2.default)(Node.prototype,["areDescendantsSorted","getActiveMarksAtRange","getActiveMarksAtRangeAsArray","getAncestors","getBlocksAtRange","getBlocksAtRangeAsArray","getBlocksByType","getBlocksByTypeAsArray","getCharactersAtRange","getCharactersAtRangeAsArray","getChild","getChildrenBetween","getChildrenBetweenIncluding","getClosestBlock","getClosestInline","getClosestVoid","getCommonAncestor","getComponent","getDecorators","getDepth","getDescendant","getDescendantAtPath","getDescendantDecorators","getFragmentAtRange","getFurthestBlock","getFurthestInline","getFurthestAncestor","getFurthestOnlyChildAncestor","getInlinesAtRange","getInlinesAtRangeAsArray","getInlinesByType","getInlinesByTypeAsArray","getMarksAtRange","getOrderedMarksAtRange","getMarksAtRangeAsArray","getMarksByType","getOrderedMarksByType","getMarksByTypeAsArray","getNextBlock","getNextSibling","getNextText","getNode","getNodeAtPath","getOffset","getOffsetAtRange","getParent","getPath","getPreviousBlock","getPreviousSibling","getPreviousText","getTextAtOffset","getTextsAtRange","getTextsAtRangeAsArray","hasChild","hasDescendant","hasNode","hasVoidParent","isInlineSplitAtRange","validate"],{takesArguments:!0}),exports.default=Node},{"../utils/generate-key":265,"../utils/is-index-in-range":269,"../utils/logger":271,"../utils/memoize":272,"./block":237,"./data":240,"./document":241,"./inline":243,"./text":251,direction:5,"is-plain-object":66}],246:[function(require,module,exports){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),_modelTypes=require("../constants/model-types"),_modelTypes2=_interopRequireDefault(_modelTypes),_character=require("./character"),_character2=_interopRequireDefault(_character),_mark=require("./mark"),_mark2=_interopRequireDefault(_mark),_isPlainObject=require("is-plain-object"),_isPlainObject2=_interopRequireDefault(_isPlainObject),_immutable=window.Immutable,DEFAULTS={marks:new _immutable.Set,text:""},Range=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"getCharacters",value:function(){var e=this.marks;return _character2.default.createList(this.text.split("").map(function(t){return _character2.default.create({text:t,marks:e})}))}},{key:"kind",get:function(){return"range"}}],[{key:"create",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(t.isRange(e))return e;if("string"==typeof e&&(e={text:e}),(0,_isPlainObject2.default)(e)){var r=e,n=r.marks;return new t({text:r.text,marks:_mark2.default.createSet(n)})}throw new Error("`Range.create` only accepts objects, strings or ranges, but you passed it: "+e)}},{key:"isRange",value:function(e){return!(!e||!e[_modelTypes2.default.RANGE])}},{key:"isRangeList",value:function(e){return _immutable.List.isList(e)&&e.every(function(e){return t.isRange(e)})}}]),t}((0,_immutable.Record)(DEFAULTS));Range.prototype[_modelTypes2.default.RANGE]=!0,exports.default=Range},{"../constants/model-types":234,"./character":239,"./mark":244,"is-plain-object":66}],247:[function(require,module,exports){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function normalizeProperties(e){var t=e.rules,r=void 0===t?[]:t,n=e.nodes,o=e.marks;if(n){var a=normalizeNodes(n);r=r.concat(a)}if(o){var i=normalizeMarks(o);r=r.concat(i)}return e.transform&&(_logger2.default.deprecate("0.22.0","The `schema.transform` property has been deprecated in favor of `schema.change`."),e.change=e.transform,delete e.transform),{rules:r}}function normalizeNodes(e){var t=[];for(var r in e)!function(r){var n=e[r];("function"==(0,_typeOf2.default)(n)||(0,_isReactComponent2.default)(n))&&(n={render:n}),n.match=function(e){return("block"==e.kind||"inline"==e.kind)&&e.type==r},t.push(n)}(r);return t}function normalizeMarks(e){var t=[];for(var r in e)!function(r){var n=e[r];n.render||n.decorator||n.validate||(n={render:n}),n.render=normalizeMarkComponent(n.render),n.match=function(e){return"mark"==e.kind&&e.type==r},t.push(n)}(r);return t}function normalizeMarkComponent(e){if((0,_isReactComponent2.default)(e))return e;switch((0,_typeOf2.default)(e)){case"function":return e;case"object":return function(t){return _react2.default.createElement("span",{style:e},t.children)};case"string":return function(t){return _react2.default.createElement("span",{className:e},t.children)}}}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),_modelTypes=require("../constants/model-types"),_modelTypes2=_interopRequireDefault(_modelTypes),_react=window.React,_react2=_interopRequireDefault(_react),_find=require("lodash/find"),_find2=_interopRequireDefault(_find),_isPlainObject=require("is-plain-object"),_isPlainObject2=_interopRequireDefault(_isPlainObject),_isReactComponent=require("../utils/is-react-component"),_isReactComponent2=_interopRequireDefault(_isReactComponent),_logger=require("../utils/logger"),_logger2=_interopRequireDefault(_logger),_typeOf=require("type-of"),_typeOf2=_interopRequireDefault(_typeOf),_immutable=window.Immutable,DEFAULTS={rules:[]},Schema=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"__getComponent",value:function(e){var t=(0,_find2.default)(this.rules,function(t){return t.render&&t.match(e)});if(t)return t.render}},{key:"__getDecorators",value:function(e){return this.rules.filter(function(t){return t.decorate&&t.match(e)}).map(function(t){return function(r){return t.decorate(r,e)}})}},{key:"__validate",value:function(e){var t=void 0,r=(0,_find2.default)(this.rules,function(r){if(r.validate&&r.match(e))return t=r.validate(e)});if(t)return{rule:r,value:t}}},{key:"kind",get:function(){return"schema"}},{key:"hasValidators",get:function(){return this.rules.some(function(e){return e.validate})}},{key:"hasDecorators",get:function(){return this.rules.some(function(e){return e.decorate})}}],[{key:"create",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(t.isSchema(e))return e;if((0,_isPlainObject2.default)(e)){return new t(normalizeProperties(e))}throw new Error("`Schema.create` only accepts objects or schemas, but you passed it: "+e)}},{key:"isSchema",value:function(e){return!(!e||!e[_modelTypes2.default.SCHEMA])}}]),t}((0,_immutable.Record)(DEFAULTS));Schema.prototype[_modelTypes2.default.SCHEMA]=!0,exports.default=Schema},{"../constants/model-types":234,"../utils/is-react-component":270,"../utils/logger":271,"is-plain-object":66,"lodash/find":181,"type-of":217}],248:[function(require,module,exports){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function getFirst(e){return"text"==e.kind?e:e.getFirstText()}function getLast(e){return"text"==e.kind?e:e.getLastText()}Object.defineProperty(exports,"__esModule",{value:!0});var _slicedToArray=function(){function e(e,t){var o=[],n=!0,s=!1,r=void 0;try{for(var i,a=e[Symbol.iterator]();!(n=(i=a.next()).done)&&(o.push(i.value),!t||o.length!==t);n=!0);}catch(e){s=!0,r=e}finally{try{!n&&a.return&&a.return()}finally{if(s)throw r}}return o}return function(t,o){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,o);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_createClass=function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}(),_modelTypes=require("../constants/model-types"),_modelTypes2=_interopRequireDefault(_modelTypes),_isPlainObject=require("is-plain-object"),_isPlainObject2=_interopRequireDefault(_isPlainObject),_logger=require("../utils/logger"),_logger2=_interopRequireDefault(_logger),_immutable=window.Immutable,DEFAULTS={anchorKey:null,anchorOffset:0,focusKey:null,focusOffset:0,isBackward:null,isFocused:!1,marks:null},Selection=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"hasAnchorAtStartOf",value:function(e){if(0!=this.anchorOffset)return!1;var t=getFirst(e);return this.anchorKey==t.key}},{key:"hasAnchorAtEndOf",value:function(e){var t=getLast(e);return this.anchorKey==t.key&&this.anchorOffset==t.text.length}},{key:"hasAnchorBetween",value:function(e,t,o){return this.anchorOffset<=o&&t<=this.anchorOffset&&this.hasAnchorIn(e)}},{key:"hasAnchorIn",value:function(e){return"text"==e.kind?e.key==this.anchorKey:null!=this.anchorKey&&e.hasDescendant(this.anchorKey)}},{key:"hasFocusAtEndOf",value:function(e){var t=getLast(e);return this.focusKey==t.key&&this.focusOffset==t.text.length}},{key:"hasFocusAtStartOf",value:function(e){if(0!=this.focusOffset)return!1;var t=getFirst(e);return this.focusKey==t.key}},{key:"hasFocusBetween",value:function(e,t,o){return t<=this.focusOffset&&this.focusOffset<=o&&this.hasFocusIn(e)}},{key:"hasFocusIn",value:function(e){return"text"==e.kind?e.key==this.focusKey:null!=this.focusKey&&e.hasDescendant(this.focusKey)}},{key:"isAtStartOf",value:function(e){return this.isCollapsed&&this.hasAnchorAtStartOf(e)}},{key:"isAtEndOf",value:function(e){return this.isCollapsed&&this.hasAnchorAtEndOf(e)}},{key:"focus",value:function(){return this.merge({isFocused:!0})}},{key:"blur",value:function(){return this.merge({isFocused:!1})}},{key:"deselect",value:function(){return this.merge({anchorKey:null,anchorOffset:0,focusKey:null,focusOffset:0,isFocused:!1,isBackward:!1})}},{key:"flip",value:function(){return this.merge({anchorKey:this.focusKey,anchorOffset:this.focusOffset,focusKey:this.anchorKey,focusOffset:this.anchorOffset,isBackward:null==this.isBackward?null:!this.isBackward})}},{key:"moveAnchor",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=this.anchorKey,o=this.focusKey,n=this.focusOffset,s=this.isBackward,r=this.anchorOffset+e;return this.merge({anchorOffset:r,isBackward:t==o?r>n:s})}},{key:"moveFocus",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=this.anchorKey,o=this.anchorOffset,n=this.focusKey,s=this.isBackward,r=this.focusOffset+e;return this.merge({focusOffset:r,isBackward:n==t?o>r:s})}},{key:"moveAnchorTo",value:function(e,t){var o=this.anchorKey,n=this.focusKey,s=this.focusOffset,r=this.isBackward;return this.merge({anchorKey:e,anchorOffset:t,isBackward:e==n?t>s:e==o?r:null})}},{key:"moveFocusTo",value:function(e,t){var o=this.focusKey,n=this.anchorKey,s=this.anchorOffset,r=this.isBackward;return this.merge({focusKey:e,focusOffset:t,isBackward:e==n?s>t:e==o?r:null})}},{key:"moveAnchorOffsetTo",value:function(e){return this.merge({anchorOffset:e,isBackward:this.anchorKey==this.focusKey?e>this.focusOffset:this.isBackward})}},{key:"moveFocusOffsetTo",value:function(e){return this.merge({focusOffset:e,isBackward:this.anchorKey==this.focusKey?this.anchorOffset>e:this.isBackward})}},{key:"moveOffsetsTo",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;return this.moveAnchorOffsetTo(e).moveFocusOffsetTo(t)}},{key:"moveToAnchor",value:function(){return this.moveFocusTo(this.anchorKey,this.anchorOffset)}},{key:"moveToFocus",value:function(){return this.moveAnchorTo(this.focusKey,this.focusOffset)}},{key:"moveAnchorToStartOf",value:function(e){return e=getFirst(e),this.moveAnchorTo(e.key,0)}},{key:"moveAnchorToEndOf",value:function(e){return e=getLast(e),this.moveAnchorTo(e.key,e.text.length)}},{key:"moveFocusToStartOf",value:function(e){return e=getFirst(e),this.moveFocusTo(e.key,0)}},{key:"moveFocusToEndOf",value:function(e){return e=getLast(e),this.moveFocusTo(e.key,e.text.length)}},{key:"moveToRangeOf",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;return this.moveAnchorToStartOf(e).moveFocusToEndOf(t)}},{key:"normalize",value:function(e){var t=this,o=t.anchorKey,n=t.anchorOffset,s=t.focusKey,r=t.focusOffset,i=t.isBackward;if(null==o||null==s)return t.merge({anchorKey:null,anchorOffset:0,focusKey:null,focusOffset:0,isBackward:!1});var a=e.getDescendant(o),c=e.getDescendant(s);if(!a||!c){_logger2.default.warn("The selection was invalid and was reset. The selection in question was:",t);var u=e.getFirstText();return t.merge({anchorKey:u?u.key:null,anchorOffset:0,focusKey:u?u.key:null,focusOffset:0,isBackward:!1})}if("text"!=a.kind){_logger2.default.warn("The selection anchor was set to a Node that is not a Text node. This should not happen and can degrade performance. The node in question was:",a);var f=a.getTextAtOffset(n);n-=a.getOffset(f.key),a=f}if("text"!=c.kind){_logger2.default.warn("The selection focus was set to a Node that is not a Text node. This should not happen and can degrade performance. The node in question was:",c);var h=c.getTextAtOffset(r);r-=c.getOffset(h.key),c=h}return null==i&&(i=a.key===c.key?n>r:!e.areDescendantsSorted(a.key,c.key)),t.merge({anchorKey:a.key,anchorOffset:n,focusKey:c.key,focusOffset:r,isBackward:i})}},{key:"unset",value:function(){return _logger2.default.deprecate("0.17.0","The `Selection.unset` method is deprecated, please switch to using `Selection.deselect` instead."),this.deselect()}},{key:"moveForward",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return _logger2.default.deprecate("0.17.0","The `Selection.moveForward(n)` method is deprecated, please switch to using `Selection.move(n)` instead."),this.move(e)}},{key:"moveBackward",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return _logger2.default.deprecate("0.17.0","The `Selection.moveBackward(n)` method is deprecated, please switch to using `Selection.move(-n)` (with a negative number) instead."),this.move(0-e)}},{key:"moveAnchorOffset",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return _logger2.default.deprecate("0.17.0","The `Selection.moveAnchorOffset(n)` method is deprecated, please switch to using `Selection.moveAnchor(n)` instead."),this.moveAnchor(e)}},{key:"moveFocusOffset",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return _logger2.default.deprecate("0.17.0","The `Selection.moveFocusOffset(n)` method is deprecated, please switch to using `Selection.moveFocus(n)` instead."),this.moveFocus(e)}},{key:"moveStartOffset",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return _logger2.default.deprecate("0.17.0","The `Selection.moveStartOffset(n)` method is deprecated, please switch to using `Selection.moveStart(n)` instead."),this.moveStart(e)}},{key:"moveEndOffset",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return _logger2.default.deprecate("0.17.0","The `Selection.moveEndOffset(n)` method is deprecated, please switch to using `Selection.moveEnd(n)` instead."),this.moveEnd(e)}},{key:"extendForward",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return _logger2.default.deprecate("0.17.0","The `Selection.extendForward(n)` method is deprecated, please switch to using `Selection.extend(n)` instead."),this.extend(e)}},{key:"extendBackward",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return _logger2.default.deprecate("0.17.0","The `Selection.extendBackward(n)` method is deprecated, please switch to using `Selection.extend(-n)` (with a negative number) instead."),this.extend(0-e)}},{key:"moveToOffsets",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;return _logger2.default.deprecate("0.17.0","The `Selection.moveToOffsets` method is deprecated, please switch to using `Selection.moveOffsetsTo` instead."),this.moveOffsetsTo(e,t)}},{key:"kind",get:function(){return"selection"}},{key:"isBlurred",get:function(){return!this.isFocused}},{key:"isCollapsed",get:function(){return this.anchorKey==this.focusKey&&this.anchorOffset==this.focusOffset}},{key:"isExpanded",get:function(){return!this.isCollapsed}},{key:"isForward",get:function(){return null==this.isBackward?null:!this.isBackward}},{key:"isSet",get:function(){return null!=this.anchorKey&&null!=this.focusKey}},{key:"isUnset",get:function(){return!this.isSet}},{key:"startKey",get:function(){return this.isBackward?this.focusKey:this.anchorKey}},{key:"startOffset",get:function(){return this.isBackward?this.focusOffset:this.anchorOffset}},{key:"endKey",get:function(){return this.isBackward?this.anchorKey:this.focusKey}},{key:"endOffset",get:function(){return this.isBackward?this.anchorOffset:this.focusOffset}}],[{key:"create",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(t.isSelection(e))return e;if((0,_isPlainObject2.default)(e)){return new t(e)}throw new Error("`Selection.create` only accepts objects or selections, but you passed it: "+e)}},{key:"createProperties",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(t.isSelection(e))return{anchorKey:e.anchorKey,anchorOffset:e.anchorOffset,focusKey:e.focusKey,focusOffset:e.focusOffset,isBackward:e.isBackward,isFocused:e.isFocused,marks:e.marks};if((0,_isPlainObject2.default)(e)){var o={};return"anchorKey"in e&&(o.anchorKey=e.anchorKey),"anchorOffset"in e&&(o.anchorOffset=e.anchorOffset),"focusKey"in e&&(o.focusKey=e.focusKey),"focusOffset"in e&&(o.focusOffset=e.focusOffset),"isBackward"in e&&(o.isBackward=e.isBackward),"isFocused"in e&&(o.isFocused=e.isFocused),"marks"in e&&(o.marks=e.marks),o}throw new Error("`Selection.createProperties` only accepts objects or selections, but you passed it: "+e)}},{key:"isSelection",value:function(e){return!(!e||!e[_modelTypes2.default.SELECTION])}}]),t}((0,_immutable.Record)(DEFAULTS));Selection.prototype[_modelTypes2.default.SELECTION]=!0;var MOVE_METHODS=[["move",""],["move","To"],["move","ToStartOf"],["move","ToEndOf"]];MOVE_METHODS.forEach(function(e){var t=_slicedToArray(e,2),o=t[0],n=t[1];Selection.prototype[""+o+n]=function(){var e;return(e=this[o+"Anchor"+n].apply(this,arguments))[o+"Focus"+n].apply(e,arguments)}});var EDGE_METHODS=[["has","AtStartOf",!0],["has","AtEndOf",!0],["has","Between",!0],["has","In",!0],["collapseTo",""],["move",""],["moveTo",""],["move","To"],["move","OffsetTo"]];EDGE_METHODS.forEach(function(e){var t=_slicedToArray(e,3),o=t[0],n=t[1],s=t[2],r=o+"Anchor"+n,i=o+"Focus"+n;Selection.prototype[o+"Start"+n]=function(){return this.isBackward?this[i].apply(this,arguments):this[r].apply(this,arguments)},Selection.prototype[o+"End"+n]=function(){return this.isBackward?this[r].apply(this,arguments):this[i].apply(this,arguments)},s&&(Selection.prototype[o+"Edge"+n]=function(){return this[r].apply(this,arguments)||this[i].apply(this,arguments)})});var ALIAS_METHODS=[["collapseTo","moveTo"],["collapseToAnchor","moveToAnchor"],["collapseToFocus","moveToFocus"],["collapseToStart","moveToStart"],["collapseToEnd","moveToEnd"],["collapseToStartOf","moveToStartOf"],["collapseToEndOf","moveToEndOf"],["extend","moveFocus"],["extendTo","moveFocusTo"],["extendToStartOf","moveFocusToStartOf"],["extendToEndOf","moveFocusToEndOf"]];ALIAS_METHODS.forEach(function(e){var t=_slicedToArray(e,2),o=t[0],n=t[1];Selection.prototype[o]=function(){return this[n].apply(this,arguments)}}),exports.default=Selection},{"../constants/model-types":234,"../utils/logger":271,"is-plain-object":66}],249:[function(require,module,exports){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _toConsumableArray(e){if(Array.isArray(e)){for(var r=0,t=Array(e.length);r<e.length;r++)t[r]=e[r];return t}return Array.from(e)}function _objectWithoutProperties(e,r){var t={};for(var n in e)r.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}function _classCallCheck(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,r){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!r||"object"!=typeof r&&"function"!=typeof r?e:r}function _inherits(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function, not "+typeof r);e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(e,r):e.__proto__=r)}function resolveSchema(e){for(var r=[],t=0;t<e.length;t++){var n=e[t];if(null!=n.schema){var o=_schema3.default.create(n.schema);r=r.concat(o.rules)}}return _schema3.default.create({rules:r})}function resolvePlugins(e){var r=e.plugins,t=void 0===r?[]:r,n=_objectWithoutProperties(e,["plugins"]),o=(0,_core2.default)(e);return[n].concat(_toConsumableArray(t),[o])}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function e(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(r,t,n){return t&&e(r.prototype,t),n&&e(r,n),r}}(),_modelTypes=require("../constants/model-types"),_modelTypes2=_interopRequireDefault(_modelTypes),_core=require("../plugins/core"),_core2=_interopRequireDefault(_core),_debug=require("debug"),_debug2=_interopRequireDefault(_debug),_schema2=require("./schema"),_schema3=_interopRequireDefault(_schema2),_immutable=window.Immutable,debug=(0,_debug2.default)("slate:stack"),METHODS=["onBeforeInput","onBeforeChange","onBlur","onCopy","onCut","onDrop","onFocus","onKeyDown","onKeyUp","onPaste","onSelect","onChange"],DEFAULTS={plugins:[],schema:new _schema3.default},Stack=function(e){function r(){return _classCallCheck(this,r),_possibleConstructorReturn(this,(r.__proto__||Object.getPrototypeOf(r)).apply(this,arguments))}return _inherits(r,e),_createClass(r,[{key:"render",value:function(e,r,t){debug("render");for(var n=this.plugins.slice().reverse(),o=void 0,u=0;u<n.length;u++){var a=n[u];a.render&&(o=a.render(t,e,r),t.children=o)}return o}},{key:"renderPortal",value:function(e,r){debug("renderPortal");for(var t=[],n=0;n<this.plugins.length;n++){var o=this.plugins[n];if(o.renderPortal){var u=o.renderPortal(e,r);u&&t.push(u)}}return t}},{key:"kind",get:function(){return"stack"}}],[{key:"create",value:function(e){var t=resolvePlugins(e);return new r({plugins:t,schema:resolveSchema(t)})}},{key:"isStack",value:function(e){return!(!e||!e[_modelTypes2.default.STACK])}}]),r}((0,_immutable.Record)(DEFAULTS));Stack.prototype[_modelTypes2.default.STACK]=!0;for(var _loop=function(e){var r=METHODS[e];Stack.prototype[r]=function(e,t){debug(r);for(var n=arguments.length,o=Array(n>2?n-2:0),u=2;u<n;u++)o[u-2]=arguments[u];for(var a=0;a<this.plugins.length;a++){var i=this.plugins[a];if(i[r]){if(null!=i[r].apply(i,o.concat([e,t])))break}}}},i=0;i<METHODS.length;i++)_loop(i);exports.default=Stack},{"../constants/model-types":234,"../plugins/core":255,"./schema":247,debug:3}],250:[function(require,module,exports){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(exports,"__esModule",{value:!0});var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},_createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,n,s){return n&&e(t.prototype,n),s&&e(t,s),t}}(),_modelTypes=require("../constants/model-types"),_modelTypes2=_interopRequireDefault(_modelTypes),_core=require("../schemas/core"),_core2=_interopRequireDefault(_core),_change=require("./change"),_change2=_interopRequireDefault(_change),_document=require("./document"),_document2=_interopRequireDefault(_document),_history=require("./history"),_history2=_interopRequireDefault(_history),_selection=require("./selection"),_selection2=_interopRequireDefault(_selection),_isPlainObject=require("is-plain-object"),_isPlainObject2=_interopRequireDefault(_isPlainObject),_logger=require("../utils/logger"),_logger2=_interopRequireDefault(_logger),_immutable=window.Immutable,DEFAULTS={document:_document2.default.create(),selection:_selection2.default.create(),history:_history2.default.create(),data:new _immutable.Map,isNative:!1},State=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"change",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new _change2.default(_extends({},e,{state:this}))}},{key:"transform",value:function(){return _logger2.default.deprecate("0.22.0","The `state.transform()` method has been deprecated in favor of `state.change()`."),this.change.apply(this,arguments)}},{key:"kind",get:function(){return"state"}},{key:"hasUndos",get:function(){return this.history.undos.size>0}},{key:"hasRedos",get:function(){return this.history.redos.size>0}},{key:"isBlurred",get:function(){return this.selection.isBlurred}},{key:"isFocused",get:function(){return this.selection.isFocused}},{key:"isCollapsed",get:function(){return this.selection.isCollapsed}},{key:"isExpanded",get:function(){return this.selection.isExpanded}},{key:"isBackward",get:function(){return this.selection.isBackward}},{key:"isForward",get:function(){return this.selection.isForward}},{key:"startKey",get:function(){return this.selection.startKey}},{key:"endKey",get:function(){return this.selection.endKey}},{key:"startOffset",get:function(){return this.selection.startOffset}},{key:"endOffset",get:function(){return this.selection.endOffset}},{key:"anchorKey",get:function(){return this.selection.anchorKey}},{key:"focusKey",get:function(){return this.selection.focusKey}},{key:"anchorOffset",get:function(){return this.selection.anchorOffset}},{key:"focusOffset",get:function(){return this.selection.focusOffset}},{key:"startBlock",get:function(){return this.selection.isUnset?null:this.document.getClosestBlock(this.selection.startKey)}},{key:"endBlock",get:function(){
return this.selection.isUnset?null:this.document.getClosestBlock(this.selection.endKey)}},{key:"anchorBlock",get:function(){return this.selection.isUnset?null:this.document.getClosestBlock(this.selection.anchorKey)}},{key:"focusBlock",get:function(){return this.selection.isUnset?null:this.document.getClosestBlock(this.selection.focusKey)}},{key:"startInline",get:function(){return this.selection.isUnset?null:this.document.getClosestInline(this.selection.startKey)}},{key:"endInline",get:function(){return this.selection.isUnset?null:this.document.getClosestInline(this.selection.endKey)}},{key:"anchorInline",get:function(){return this.selection.isUnset?null:this.document.getClosestInline(this.selection.anchorKey)}},{key:"focusInline",get:function(){return this.selection.isUnset?null:this.document.getClosestInline(this.selection.focusKey)}},{key:"startText",get:function(){return this.selection.isUnset?null:this.document.getDescendant(this.selection.startKey)}},{key:"endText",get:function(){return this.selection.isUnset?null:this.document.getDescendant(this.selection.endKey)}},{key:"anchorText",get:function(){return this.selection.isUnset?null:this.document.getDescendant(this.selection.anchorKey)}},{key:"focusText",get:function(){return this.selection.isUnset?null:this.document.getDescendant(this.selection.focusKey)}},{key:"characters",get:function(){return this.selection.isUnset?new _immutable.List:this.document.getCharactersAtRange(this.selection)}},{key:"marks",get:function(){return this.selection.isUnset?new _immutable.Set:this.selection.marks||this.document.getMarksAtRange(this.selection)}},{key:"activeMarks",get:function(){return this.selection.isUnset?new _immutable.Set:this.selection.marks||this.document.getActiveMarksAtRange(this.selection)}},{key:"blocks",get:function(){return this.selection.isUnset?new _immutable.List:this.document.getBlocksAtRange(this.selection)}},{key:"fragment",get:function(){return this.selection.isUnset?_document2.default.create():this.document.getFragmentAtRange(this.selection)}},{key:"inlines",get:function(){return this.selection.isUnset?new _immutable.List:this.document.getInlinesAtRange(this.selection)}},{key:"texts",get:function(){return this.selection.isUnset?new _immutable.List:this.document.getTextsAtRange(this.selection)}},{key:"isEmpty",get:function(){var e=this.startOffset,t=this.endOffset;return!!this.isCollapsed||(0==t||0==e)&&0==this.fragment.text.length}}],[{key:"create",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(t.isState(e))return e;if((0,_isPlainObject2.default)(e)){var s=_document2.default.create(e.document),i=_selection2.default.create(e.selection),o=new _immutable.Map;if(i.isUnset){var r=s.getFirstText();r&&(i=i.collapseToStartOf(r))}if(n.plugins){var c=!0,u=!1,l=void 0;try{for(var a,f=n.plugins[Symbol.iterator]();!(c=(a=f.next()).done);c=!0){var h=a.value;h.data&&(o=o.merge(h.data))}}catch(e){u=!0,l=e}finally{try{!c&&f.return&&f.return()}finally{if(u)throw l}}}e.data&&(o=o.merge(e.data));var d=new t({document:s,selection:i,data:o});return!1!==n.normalize&&(d=d.change({save:!1}).normalize(_core2.default).state),d}throw new Error("`State.create` only accepts objects or states, but you passed it: "+e)}},{key:"isState",value:function(e){return!(!e||!e[_modelTypes2.default.STATE])}}]),t}((0,_immutable.Record)(DEFAULTS));State.prototype[_modelTypes2.default.STATE]=!0,exports.default=State},{"../constants/model-types":234,"../schemas/core":256,"../utils/logger":271,"./change":238,"./document":241,"./history":242,"./selection":248,"is-plain-object":66}],251:[function(require,module,exports){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),_character=require("./character"),_character2=_interopRequireDefault(_character),_mark=require("./mark"),_mark2=_interopRequireDefault(_mark),_range=require("./range"),_range2=_interopRequireDefault(_range),_modelTypes=require("../constants/model-types"),_modelTypes2=_interopRequireDefault(_modelTypes),_generateKey=require("../utils/generate-key"),_generateKey2=_interopRequireDefault(_generateKey),_isPlainObject=require("is-plain-object"),_isPlainObject2=_interopRequireDefault(_isPlainObject),_logger=require("../utils/logger"),_logger2=_interopRequireDefault(_logger),_memoize=require("../utils/memoize"),_memoize2=_interopRequireDefault(_memoize),_immutable=window.Immutable,DEFAULTS={characters:new _immutable.List,key:void 0},Text=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"addMark",value:function(e,t,r){var a=this.characters.map(function(a,n){if(n<e)return a;if(n>=e+t)return a;var i=a,u=i.marks;return u=u.add(r),a=a.set("marks",u)});return this.set("characters",a)}},{key:"getDecorations",value:function(e){var t=this,r=t.characters;if(0==r.size)return r;for(var a=0;a<e.length;a++){var n=e[a],i=n(t);r=r.merge(i)}return r}},{key:"getDecorators",value:function(e){return e.__getDecorators(this)}},{key:"getMarks",value:function(){var e=this.getMarksAsArray();return new _immutable.OrderedSet(e)}},{key:"getMarksAsArray",value:function(){return this.characters.reduce(function(e,t){return e.concat(t.marks.toArray())},[])}},{key:"getMarksAtIndex",value:function(e){if(0==e)return _mark2.default.createSet();var t=this.characters,r=t.get(e-1);return r?r.marks:_mark2.default.createSet()}},{key:"getNode",value:function(e){return this.key==e?this:null}},{key:"getRanges",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=this.getDecorations(e),r=[],a=void 0,n=void 0;return 0==t.size?r.push({}):t.forEach(function(e,t){var i=e.marks,u=e.text;if(0==t)return a=e,n={text:u,marks:i},void r.push(n);var s=a.marks;if((0,_immutable.is)(i,s))return a=e,void(n.text+=u);a=e,n={text:u,marks:i},r.push(n)},[]),r=new _immutable.List(r.map(function(e){return new _range2.default(e)}))}},{key:"hasNode",value:function(e){return!!this.getNode(e)}},{key:"insertText",value:function(e,t,r){var a=this.characters,n=_character2.default.createList(t.split("").map(function(e){return{text:e,marks:r}}));return a=a.slice(0,e).concat(n).concat(a.slice(e)),this.set("characters",a)}},{key:"regenerateKey",value:function(){var e=(0,_generateKey2.default)();return this.set("key",e)}},{key:"removeMark",value:function(e,t,r){var a=this.characters.map(function(a,n){if(n<e)return a;if(n>=e+t)return a;var i=a,u=i.marks;return u=u.remove(r),a=a.set("marks",u)});return this.set("characters",a)}},{key:"removeText",value:function(e,t){var r=this.characters,a=e,n=e+t;return r=r.filterNot(function(e,t){return a<=t&&t<n}),this.set("characters",r)}},{key:"updateMark",value:function(e,t,r,a){var n=r.merge(a),i=this.characters.map(function(a,i){if(i<e)return a;if(i>=e+t)return a;var u=a,s=u.marks;return s.has(r)?(s=s.remove(r),s=s.add(n),a=a.set("marks",s)):a});return this.set("characters",i)}},{key:"validate",value:function(e){return e.__validate(this)}},{key:"kind",get:function(){return"text"}},{key:"isEmpty",get:function(){return""==this.text}},{key:"text",get:function(){return this.characters.reduce(function(e,t){return e+t.text},"")}}],[{key:"create",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(t.isText(e))return e;if((_immutable.List.isList(e)||Array.isArray(e))&&(e={ranges:e}),"string"==typeof e&&(e={ranges:[{text:e}]}),(0,_isPlainObject2.default)(e)){var r=e,a=r.characters,n=r.ranges,i=r.key;return new t({characters:n?n.map(_range2.default.create).reduce(function(e,t){return e.concat(t.getCharacters())},_character2.default.createList()):_character2.default.createList(a),key:i||(0,_generateKey2.default)()})}throw new Error("`Text.create` only accepts objects, arrays, strings or texts, but you passed it: "+e)}},{key:"createList",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return _immutable.List.isList(e)?e:new _immutable.List(e.map(t.create))}},{key:"isText",value:function(e){return!(!e||!e[_modelTypes2.default.TEXT])}},{key:"isTextList",value:function(e){return _immutable.List.isList(e)&&e.every(function(e){return t.isText(e)})}},{key:"createFromString",value:function(e){return _logger2.default.deprecate("0.22.0","The `Text.createFromString(string)` method is deprecated, use `Text.create(string)` instead."),t.create(e)}},{key:"createFromRanges",value:function(e){return _logger2.default.deprecate("0.22.0","The `Text.createFromRanges(ranges)` method is deprecated, use `Text.create(ranges)` instead."),t.create(e)}}]),t}((0,_immutable.Record)(DEFAULTS));Text.prototype[_modelTypes2.default.TEXT]=!0,(0,_memoize2.default)(Text.prototype,["getMarks","getMarksAsArray"],{takesArguments:!1}),(0,_memoize2.default)(Text.prototype,["getDecorations","getDecorators","getMarksAtIndex","getRanges","validate"],{takesArguments:!0}),exports.default=Text},{"../constants/model-types":234,"../utils/generate-key":265,"../utils/logger":271,"../utils/memoize":272,"./character":239,"./mark":244,"./range":246,"is-plain-object":66}],252:[function(require,module,exports){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function applyOperation(e,t){var o=t.type,r=APPLIERS[o];if(!r)throw new Error('Unknown operation type: "'+o+'".');return debug(o,t),e=r(e,t)}Object.defineProperty(exports,"__esModule",{value:!0});var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(e[r]=o[r])}return e},_debug=require("debug"),_debug2=_interopRequireDefault(_debug),_node=require("../models/node"),_node2=_interopRequireDefault(_node),_mark=require("../models/mark"),_mark2=_interopRequireDefault(_mark),_logger=require("../utils/logger"),_logger2=_interopRequireDefault(_logger),debug=(0,_debug2.default)("slate:operation:apply"),APPLIERS={add_mark:function(e,t){var o=t.path,r=t.offset,n=t.length,a=_mark2.default.create(t.mark),s=e,d=s.document,u=d.assertPath(o);return u=u.addMark(r,n,a),d=d.updateNode(u),e=e.set("document",d)},insert_node:function(e,t){var o=t.path,r=_node2.default.create(t.node),n=o[o.length-1],a=o.slice(0,-1),s=e,d=s.document,u=d.assertPath(a);return u=u.insertNode(n,r),d=d.updateNode(u),e=e.set("document",d)},insert_text:function(e,t){var o=t.path,r=t.offset,n=t.text,a=t.marks;Array.isArray(a)&&(a=_mark2.default.createSet(a));var s=e,d=s.document,u=s.selection,i=u,c=i.anchorKey,l=i.focusKey,f=i.anchorOffset,h=i.focusOffset,m=d.assertPath(o);return m=m.insertText(r,n,a),d=d.updateNode(m),c==m.key&&f>=r&&(u=u.moveAnchor(n.length)),l==m.key&&h>=r&&(u=u.moveFocus(n.length)),e=e.set("document",d).set("selection",u)},merge_node:function(e,t){var o=t.path,r=o.slice(0,o.length-1).concat([o[o.length-1]-1]),n=e,a=n.document,s=n.selection,d=a.assertPath(r),u=a.assertPath(o),i=a.getParent(d.key),c=i.nodes.indexOf(d),l=i.nodes.indexOf(u);if(i=i.mergeNode(c,l),a=a.updateNode(i),"text"==d.kind){var f=s,h=f.anchorKey,m=f.anchorOffset,p=f.focusKey,v=f.focusOffset,g=!1;h==u.key&&(s=s.moveAnchorTo(d.key,d.text.length+m),g=!0),p==u.key&&(s=s.moveFocusTo(d.key,d.text.length+v),g=!0),g&&(s=s.normalize(a))}return e=e.set("document",a).set("selection",s)},move_node:function(e,t){var o=t.path,r=t.newPath,n=r[r.length-1],a=r.slice(0,-1),s=o.slice(0,-1),d=o[o.length-1],u=e,i=u.document,c=i.assertPath(o),l=i.getParent(c.key);l=l.removeNode(d),i=i.updateNode(l);var f=void 0;return s.every(function(e,t){return e===a[t]})&&s.length===a.length?f=l:s.every(function(e,t){return e===a[t]})&&d<a[s.length]?(a[s.length]--,f=i.assertPath(a)):f=i.assertPath(a),f=f.insertNode(n,c),i=i.updateNode(f),e=e.set("document",i)},remove_mark:function(e,t){var o=t.path,r=t.offset,n=t.length,a=_mark2.default.create(t.mark),s=e,d=s.document,u=d.assertPath(o);return u=u.removeMark(r,n,a),d=d.updateNode(u),e=e.set("document",d)},remove_node:function(e,t){var o=t.path,r=e,n=r.document,a=r.selection,s=a,d=s.startKey,u=s.endKey,i=n.assertPath(o);if(a.isSet){var c=i.hasNode(d),l=i.hasNode(u),f=!1;if(c){var h=n.getPreviousText(d),m=n.getNextText(d);h?(a=a.moveStartTo(h.key,h.text.length),f=!0):m?(a=a.moveStartTo(m.key,0),f=!0):a=a.deselect()}if(l){var p=n.getPreviousText(u),v=n.getNextText(u);p?(a=a.moveEndTo(p.key,p.text.length),f=!0):v?(a=a.moveEndTo(v.key,0),f=!0):a=a.deselect()}f&&(a=a.normalize(n))}var g=n.getParent(i.key),y=g.nodes.indexOf(i);return g=g.removeNode(y),n=n.updateNode(g),e=e.set("document",n).set("selection",a)},remove_text:function(e,t){var o=t.path,r=t.offset,n=t.text,a=n.length,s=r+a,d=e,u=d.document,i=d.selection,c=i,l=c.anchorKey,f=c.focusKey,h=c.anchorOffset,m=c.focusOffset,p=u.assertPath(o);return l==p.key&&h>=s&&(i=i.moveAnchor(-a)),f==p.key&&m>=s&&(i=i.moveFocus(-a)),p=p.removeText(r,a),u=u.updateNode(p),e=e.set("document",u).set("selection",i)},set_data:function(e,t){var o=t.properties,r=e,n=r.data;return n=n.merge(o),e=e.set("data",n)},set_mark:function(e,t){var o=t.path,r=t.offset,n=t.length,a=t.properties,s=_mark2.default.create(t.mark),d=e,u=d.document,i=u.assertPath(o);return i=i.updateMark(r,n,s,a),u=u.updateNode(i),e=e.set("document",u)},set_node:function(e,t){var o=t.path,r=t.properties,n=e,a=n.document,s=a.assertPath(o);return r.nodes&&r.nodes!=s.nodes&&(_logger2.default.warn("Updating a Node's `nodes` property via `setNode()` is not allowed. Use the appropriate insertion and removal operations instead. The opeartion in question was:",t),delete r.nodes),r.key&&r.key!=s.key&&(_logger2.default.warn("Updating a Node's `key` property via `setNode()` is not allowed. There should be no reason to do this. The opeartion in question was:",t),delete r.key),s=s.merge(r),a=a.updateNode(s),e=e.set("document",a)},set_selection:function(e,t){var o=_extends({},t.properties),r=e,n=r.document,a=r.selection;return null!=o.marks&&(o.marks=_mark2.default.createSet(o.marks)),void 0!==o.anchorPath&&(o.anchorKey=null===o.anchorPath?null:n.assertPath(o.anchorPath).key,delete o.anchorPath),void 0!==o.focusPath&&(o.focusKey=null===o.focusPath?null:n.assertPath(o.focusPath).key,delete o.focusPath),a=a.merge(o),a=a.normalize(n),e=e.set("selection",a)},split_node:function(e,t){var o=t.path,r=t.position,n=e,a=n.document,s=n.selection,d=a.assertPath(o),u=a.getParent(d.key),i=u.nodes.indexOf(d);u=u.splitNode(i,r),a=a.updateNode(u);var c=s,l=c.startKey,f=c.endKey,h=c.startOffset,m=c.endOffset,p=a.getNextText(d.key),v=!1;return d.key==l&&r<=h&&(s=s.moveStartTo(p.key,h-r),v=!0),d.key==f&&r<=m&&(s=s.moveEndTo(p.key,m-r),v=!0),v&&(s=s.normalize(a)),e=e.set("document",a).set("selection",s)}};exports.default=applyOperation},{"../models/mark":244,"../models/node":245,"../utils/logger":271,debug:3}],253:[function(require,module,exports){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var _apply=require("./apply"),_apply2=_interopRequireDefault(_apply),_invert=require("./invert"),_invert2=_interopRequireDefault(_invert);exports.default={apply:_apply2.default,invert:_invert2.default}},{"./apply":252,"./invert":254}],254:[function(require,module,exports){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function invertOperation(e){var t=e.type;if(debug(t,e),"insert_node"==t)return _extends({},e,{type:"remove_node"});if("remove_node"==t)return _extends({},e,{type:"insert_node"});if("move_node"==t)return _extends({},e,{path:e.newPath,newPath:e.path});if("merge_node"==t){var r=e.path,n=r.length,i=n-1;return _extends({},e,{type:"split_node",path:r.slice(0,i).concat([r[i]-1])})}if("split_node"==t){var o=e.path,a=o.length,p=a-1;return _extends({},e,{type:"merge_node",path:o.slice(0,p).concat([o[p]+1])})}if("set_node"==t){var _=e.properties,s=e.node;return _extends({},e,{node:s.merge(_),properties:(0,_pick2.default)(s,Object.keys(_))})}if("insert_text"==t)return _extends({},e,{type:"remove_text"});if("remove_text"==t)return _extends({},e,{type:"insert_text"});if("add_mark"==t)return _extends({},e,{type:"remove_mark"});if("remove_mark"==t)return _extends({},e,{type:"add_mark"});if("set_mark"==t){var d=e.properties,u=e.mark;return _extends({},e,{mark:u.merge(d),properties:(0,_pick2.default)(u,Object.keys(d))})}if("set_selection"==t){var c=e.properties,f=e.selection;return _extends({},e,{selection:_extends({},f,c),properties:(0,_pick2.default)(f,Object.keys(c))})}if("set_data"==t){var l=e.properties,v=e.data;return _extends({},e,{data:v.merge(l),properties:(0,_pick2.default)(v,Object.keys(l))})}throw new Error('Unknown op type: "'+t+'".')}Object.defineProperty(exports,"__esModule",{value:!0});var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_debug=require("debug"),_debug2=_interopRequireDefault(_debug),_pick=require("lodash/pick"),_pick2=_interopRequireDefault(_pick),debug=(0,_debug2.default)("slate:operation:invert");exports.default=invertOperation},{debug:3,"lodash/pick":200}],255:[function(require,module,exports){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function Plugin(){function e(e,t){var n=e.state,r=t.getSchema(),a=t.getState();n.isNative||a&&n.document==a.document||(e.normalize(r),debug("onBeforeChange"))}function t(e,t,n,r){var a=n,o=a.state,i=o.document,s=o.startKey,l=o.startBlock,c=o.startOffset,d=o.startInline,u=o.startText,f=l.getPreviousText(s),p=f&&l.getClosestInline(f.key),g=l.getNextText(s),_=g&&l.getClosestInline(g.key),m=r.getSchema(),v=i.getDescendantDecorators(s,m),h=u.getDecorations(v),y=0===c?null:h.get(c-1),k=c===h.size?null:h.get(c),C=_character2.default.create({text:e.data,marks:y&&y.marks||k&&k.marks||[]}),b=h.insert(c,C),x=(0,_getWindow2.default)(e.target),D=x.getSelection(),O=D.anchorNode,S=D.anchorOffset,q=D.focusNode,B=D.focusOffset,N=(0,_getPoint2.default)(O,S,o,r),T=(0,_getPoint2.default)(q,B,o,r);if(N&&T){var A=o.selection;A.anchorKey===N.key&&A.anchorOffset===N.offset&&A.focusKey===T.key&&A.focusOffset===T.offset||(n=n.select({anchorKey:N.key,anchorOffset:N.offset,focusKey:T.key,focusOffset:T.offset}))}n.insertText(e.data);var K=n.state,I=K.startText,P=I.getDecorations(v),R=o.isCollapsed&&null==o.selection.marks&&""!=o.startText.text&&(!d||!o.selection.isAtStartOf(d))&&(!d||!o.selection.isAtEndOf(d))&&!(p&&!p.isVoid&&0==c)&&!(_&&!_.isVoid&&c==u.text.length)&&!(" "===e.data&&_environment.IS_CHROME)&&b.equals(P);R?n.setIsNative(!0):e.preventDefault(),debug("onBeforeInput",{data:t,isNative:R})}function n(e,t,n){debug("onBlur",{data:t}),n.blur()}function r(e,t,n){debug("onCopy",t),o(e,t,n)}function a(e,t,n,r){debug("onCut",t),o(e,t,n),(0,_getWindow2.default)(e.target).requestAnimationFrame(function(){r.change(function(e){return e.delete()})})}function o(e,t,n){var r=(0,_getWindow2.default)(e.target),a=r.getSelection(),o=n.state,i=o.endBlock,s=o.endInline,l=i&&i.isVoid,c=s&&s.isVoid,d=l||c;if(!a.isCollapsed||d){var u=t.fragment,f=_base2.default.serializeNode(u),p=a.getRangeAt(0),g=p.cloneContents(),_=g.childNodes[0];if(d){var m=p.cloneRange(),v=(0,_findDomNode2.default)(l?i:s);m.setEndAfter(v),g=m.cloneContents(),_=g.childNodes[g.childNodes.length-1].firstChild}if([].slice.call(g.querySelectorAll("[data-slate-zero-width]")).forEach(function(e){return e.parentNode.removeChild(e)}),_environment.IS_CHROME||_environment.IS_SAFARI){[].slice.call(g.querySelectorAll('[contenteditable="false"]')).forEach(function(e){return e.removeAttribute("contenteditable")})}if(3==_.nodeType){var h=r.document.createElement("span");h.appendChild(_),g.appendChild(h),_=h}_.setAttribute("data-slate-fragment",f);var y=r.document.querySelector("body"),k=r.document.createElement("div");k.setAttribute("contenteditable",!0),k.style.position="absolute",k.style.left="-9999px",k.appendChild(g),y.appendChild(k);var C=r.document.createRange();C.selectNodeContents(k),a.removeAllRanges(),a.addRange(C),r.requestAnimationFrame(function(){y.removeChild(k),a.removeAllRanges(),a.addRange(p)})}}function i(e,t,n){switch(debug("onDrop",{data:t}),t.type){case"text":case"html":return c(e,t,n);case"fragment":return l(e,t,n);case"node":return s(e,t,n)}}function s(e,t,n){debug("onDropNode",{data:t});var r=n.state,a=r.selection,o=t.node,i=t.target,s=t.isInternal;s&&a.endKey==i.endKey&&a.endOffset<i.endOffset&&(i=i.move(a.startKey==a.endKey?0-a.endOffset+a.startOffset:0-a.endOffset)),s&&n.delete(),_block2.default.isBlock(o)&&n.select(i).insertBlock(o).removeNodeByKey(o.key),_inline2.default.isInline(o)&&n.select(i).insertInline(o).removeNodeByKey(o.key)}function l(e,t,n){debug("onDropFragment",{data:t});var r=n.state,a=r.selection,o=t.fragment,i=t.target,s=t.isInternal;s&&a.endKey==i.endKey&&a.endOffset<i.endOffset&&(i=i.move(a.startKey==a.endKey?0-a.endOffset+a.startOffset:0-a.endOffset)),s&&n.delete(),n.select(i).insertFragment(o)}function c(e,t,n){debug("onDropText",{data:t});var r=n.state,a=r.document,o=t.text,i=t.target,s=i.anchorKey;n.select(i);var l=a.hasVoidParent(s);if(l){for(var c=a.getNode(s);l&&(c=a.getNextText(c.key));)l=a.hasVoidParent(c.key);c&&n.collapseToStartOf(c)}o.split("\n").forEach(function(e,t){t>0&&n.splitBlock(),n.insertText(e)})}function d(e,t,n){switch(debug("onKeyDown",{data:t}),t.key){case"enter":return u(e,t,n);case"backspace":return f(e,t,n);case"delete":return p(e,t,n);case"left":return g(e,t,n);case"right":return _(e,t,n);case"up":return m(e,t,n);case"down":return v(e,t,n);case"d":return h(e,t,n);case"h":return y(e,t,n);case"k":return k(e,t,n);case"y":return C(e,t,n);case"z":return b(e,t,n)}}function u(e,t,n){var r=n.state,a=r.document,o=r.startKey;if(a.hasVoidParent(o)){var i=a.getNextText(o);if(!i)return;return void n.collapseToStartOf(i)}n.splitBlock()}function f(e,t,n){var r="Char";t.isWord&&(r="Word"),t.isLine&&(r="Line"),n["delete"+r+"Backward"]()}function p(e,t,n){var r="Char";t.isWord&&(r="Word"),t.isLine&&(r="Line"),n["delete"+r+"Forward"]()}function g(e,t,n){var r=n.state;if(!t.isCtrl&&!t.isAlt&&!r.isExpanded){var a=r.document,o=r.startKey,i=r.startText,s=a.hasVoidParent(o);if(""==i.text||s){e.preventDefault();var l=a.getPreviousText(o);if(!l)return;var c=r.startBlock,d=a.getClosestBlock(l.key),u=a.getClosestInline(l.key);if(d===c&&u&&!u.isVoid){var f=t.isShift?"extend":"move";return void n.collapseToEndOf(l)[f](-1)}n.collapseToEndOf(l)}}}function _(e,t,n){var r=n.state;if(!t.isCtrl&&!t.isAlt&&!r.isExpanded){var a=r.document,o=r.startKey,i=r.startText,s=a.hasVoidParent(o);if(""==i.text||s){e.preventDefault();var l=a.getNextText(o);if(!l)return;if(a.hasVoidParent(l.key))return void n.collapseToEndOf(l);var c=r.startBlock,d=a.getClosestBlock(l.key),u=a.getClosestInline(l.key);if(d==c&&u){var f=t.isShift?"extend":"move";return void n.collapseToStartOf(l)[f](1)}n.collapseToStartOf(l)}}}function m(e,t,n){if(_environment.IS_MAC&&!t.isCtrl&&t.isAlt){var r=n.state,a=r.selection,o=r.document,i=r.focusKey,s=r.focusBlock,l=t.isShift?"extendToStartOf":"collapseToStartOf",c=a.hasFocusAtStartOf(s)?o.getPreviousBlock(i):s;if(c){var d=c.getFirstText();e.preventDefault(),n[l](d)}}}function v(e,t,n){if(_environment.IS_MAC&&!t.isCtrl&&t.isAlt){var r=n.state,a=r.selection,o=r.document,i=r.focusKey,s=r.focusBlock,l=t.isShift?"extendToEndOf":"collapseToEndOf",c=a.hasFocusAtEndOf(s)?o.getNextBlock(i):s;if(c){var d=c.getLastText();e.preventDefault(),n[l](d)}}}function h(e,t,n){_environment.IS_MAC&&t.isCtrl&&(e.preventDefault(),n.deleteCharForward())}function y(e,t,n){_environment.IS_MAC&&t.isCtrl&&(e.preventDefault(),n.deleteCharBackward())}function k(e,t,n){_environment.IS_MAC&&t.isCtrl&&(e.preventDefault(),n.deleteLineForward())}function C(e,t,n){t.isMod&&n.redo()}function b(e,t,n){t.isMod&&n[t.isShift?"redo":"undo"]()}function x(e,t,n){switch(debug("onPaste",{data:t}),t.type){case"fragment":return D(e,t,n);case"text":case"html":return O(e,t,n)}}function D(e,t,n){debug("onPasteFragment",{data:t}),n.insertFragment(t.fragment)}function O(e,t,n){debug("onPasteText",{data:t});var r=n.state,a=r.document,o=r.selection,i=r.startBlock;if(!i.isVoid){var s=t.text,l={type:i.type,data:i.data},c=a.getMarksAtRange(o.collapseToStart()),d=_plain2.default.deserialize(s,{defaultBlock:l,defaultMarks:c}).document;n.insertFragment(d)}}function S(e,t,n){debug("onSelect",{data:t}),n.select(t.selection)}function q(e,t,n){return _react2.default.createElement(_content2.default,{autoCorrect:e.autoCorrect,autoFocus:e.autoFocus,className:e.className,children:e.children,editor:n,onBeforeInput:n.onBeforeInput,onBlur:n.onBlur,onFocus:n.onFocus,onCopy:n.onCopy,onCut:n.onCut,onDrop:n.onDrop,onKeyDown:n.onKeyDown,onKeyUp:n.onKeyUp,onPaste:n.onPaste,onSelect:n.onSelect,readOnly:e.readOnly,role:e.role,schema:n.getSchema(),spellCheck:e.spellCheck,state:t,style:e.style,tabIndex:e.tabIndex,tagName:e.tagName})}var B=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},N=B.placeholder,T=B.placeholderClassName,A=B.placeholderStyle;return{onBeforeChange:e,onBeforeInput:t,onBlur:n,onCopy:r,onCut:a,onDrop:i,onKeyDown:d,onPaste:x,onSelect:S,render:q,schema:{rules:[{match:function(e){return"block"==e.kind},render:function(e){return _react2.default.createElement("div",_extends({},e.attributes,{style:{position:"relative"}}),e.children,N?_react2.default.createElement(_placeholder2.default,{className:T,node:e.node,parent:e.state.document,state:e.state,style:A},N):null)}},{match:function(e){return"inline"==e.kind},render:function(e){return _react2.default.createElement("span",_extends({},e.attributes,{style:{position:"relative"}}),e.children)}}]}}}Object.defineProperty(exports,"__esModule",{value:!0});var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_base=require("../serializers/base-64"),_base2=_interopRequireDefault(_base),_block=require("../models/block"),_block2=_interopRequireDefault(_block),_character=require("../models/character"),_character2=_interopRequireDefault(_character),_content=require("../components/content"),_content2=_interopRequireDefault(_content),_debug=require("debug"),_debug2=_interopRequireDefault(_debug),_inline=require("../models/inline"),_inline2=_interopRequireDefault(_inline),_plain=require("../serializers/plain"),_plain2=_interopRequireDefault(_plain),_placeholder=require("../components/placeholder"),_placeholder2=_interopRequireDefault(_placeholder),_react=window.React,_react2=_interopRequireDefault(_react),_getPoint=require("../utils/get-point"),_getPoint2=_interopRequireDefault(_getPoint),_getWindow=require("get-window"),_getWindow2=_interopRequireDefault(_getWindow),_findDomNode=require("../utils/find-dom-node"),_findDomNode2=_interopRequireDefault(_findDomNode),_environment=require("../constants/environment"),debug=(0,_debug2.default)("slate:core");exports.default=Plugin},{"../components/content":226,"../components/placeholder":230,"../constants/environment":232,"../models/block":237,"../models/character":239,"../models/inline":243,"../serializers/base-64":257,"../serializers/plain":259,"../utils/find-dom-node":264,"../utils/get-point":267,debug:3,"get-window":62}],256:[function(require,module,exports){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var _schema=require("../models/schema"),_schema2=_interopRequireDefault(_schema),_text=require("../models/text"),_text2=_interopRequireDefault(_text),_immutable=window.Immutable,OPTS={normalize:!1},rules=[{match:function(e){return"document"==e.kind},validate:function(e){var n=e.nodes.filter(function(e){return"block"!=e.kind});return n.size?n:null},normalize:function(e,n,t){t.forEach(function(n){e.removeNodeByKey(n.key,OPTS)})}},{match:function(e){return"block"==e.kind},validate:function(e){var n=e.nodes.first();if(!n)return null;var t="block"==n.kind?["block"]:["inline","text"],i=e.nodes.filter(function(e){return!t.includes(e.kind)});return i.size?i:null},normalize:function(e,n,t){t.forEach(function(n){e.removeNodeByKey(n.key,OPTS)})}},{match:function(e){return"inline"==e.kind},validate:function(e){var n=e.nodes.filter(function(e){return"inline"!=e.kind&&"text"!=e.kind});return n.size?n:null},normalize:function(e,n,t){t.forEach(function(n){e.removeNodeByKey(n.key,OPTS)})}},{match:function(e){return"block"==e.kind||"inline"==e.kind},validate:function(e){return 0==e.nodes.size},normalize:function(e,n){var t=_text2.default.create();e.insertNodeByKey(n.key,0,t,OPTS)}},{match:function(e){return("inline"==e.kind||"block"==e.kind)&&e.isVoid},validate:function(e){return" "!==e.text||1!==e.nodes.size},normalize:function(e,n,t){var i=_text2.default.create(" "),r=n.nodes.size;e.insertNodeByKey(n.key,r,i,OPTS),n.nodes.forEach(function(n){e.removeNodeByKey(n.key,OPTS)})}},{match:function(e){return"block"==e.kind},validate:function(e){var n=e.nodes.filter(function(e){return"inline"==e.kind&&""==e.text});return n.size?n:null},normalize:function(e,n,t){if(n.nodes.size==t.size){var i=_text2.default.create();e.insertNodeByKey(n.key,1,i,OPTS)}t.forEach(function(n){e.removeNodeByKey(n.key,OPTS)})}},{match:function(e){return"block"==e.kind||"inline"==e.kind},validate:function(e){var n=e.nodes.reduce(function(n,t,i){if("inline"!==t.kind)return n;var r=i>0?e.nodes.get(i-1):null,o=e.nodes.get(i+1),u=!r,l=!o||"inline"==o.kind;return(l||u)&&(n=n.push({insertAfter:l,insertBefore:u,index:i})),n},new _immutable.List);return n.size?n:null},normalize:function(e,n,t){var i=0;t.forEach(function(t){var r=t.index,o=t.insertAfter;t.insertBefore&&(e.insertNodeByKey(n.key,i+r,_text2.default.create(),OPTS),i++),o&&(e.insertNodeByKey(n.key,i+r+1,_text2.default.create(),OPTS),i++)})}},{match:function(e){return"block"==e.kind||"inline"==e.kind},validate:function(e){var n=e.nodes.map(function(n,t){var i=e.nodes.get(t+1);if("text"==n.kind&&i&&"text"==i.kind)return i}).filter(Boolean);return n.size?n:null},normalize:function(e,n,t){t.reverse().forEach(function(n){return e.mergeNodeByKey(n.key,OPTS)})}},{match:function(e){return"block"==e.kind||"inline"==e.kind},validate:function(e){var n=e.nodes;if(!(n.size<=1)){var t=n.filter(function(e,t){if("text"==e.kind&&!(e.text.length>0)){var i=t>0?n.get(t-1):null,r=n.get(t+1);if((i||"inline"!=r.kind)&&(r||"inline"!=i.kind)&&(!r||!i||"inline"!=r.kind||"inline"!=i.kind))return!0}});return t.size?t:null}},normalize:function(e,n,t){t.forEach(function(n){e.removeNodeByKey(n.key,OPTS)})}}],SCHEMA=_schema2.default.create({rules:rules});exports.default=SCHEMA},{"../models/schema":247,"../models/text":251}],257:[function(require,module,exports){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function encode(e){var r=JSON.stringify(e);return window.btoa(window.encodeURIComponent(r))}function decode(e){var r=window.decodeURIComponent(window.atob(e));return JSON.parse(r)}
function deserialize(e,r){var i=decode(e);return _raw2.default.deserialize(i,r)}function deserializeNode(e,r){var i=decode(e);return _raw2.default.deserializeNode(i,r)}function serialize(e,r){return encode(_raw2.default.serialize(e,r))}function serializeNode(e,r){return encode(_raw2.default.serializeNode(e,r))}Object.defineProperty(exports,"__esModule",{value:!0});var _raw=require("./raw"),_raw2=_interopRequireDefault(_raw);exports.default={deserialize:deserialize,deserializeNode:deserializeNode,serialize:serialize,serializeNode:serializeNode}},{"./raw":260}],258:[function(require,module,exports){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _toConsumableArray(e){if(Array.isArray(e)){for(var r=0,t=Array(e.length);r<e.length;r++)t[r]=e[r];return t}return Array.from(e)}function _classCallCheck(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function addKey(e){return _react2.default.cloneElement(e,{key:key++})}Object.defineProperty(exports,"__esModule",{value:!0});var _extends=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},_raw=require("./raw"),_raw2=_interopRequireDefault(_raw),_react=window.React,_react2=_interopRequireDefault(_react),_server=window.ReactDOMServer,_server2=_interopRequireDefault(_server),_typeOf=require("type-of"),_typeOf2=_interopRequireDefault(_typeOf),_immutable=window.Immutable,String=new _immutable.Record({kind:"string",text:""}),TEXT_RULE={deserialize:function(e){if("br"==e.tagName)return{kind:"text",text:"\n"};if("#text"==e.nodeName){if(e.value&&e.value.match(/<!--.*?-->/))return;return{kind:"text",text:e.value||e.nodeValue}}},serialize:function(e,r){if("string"==e.kind)return r.split("\n").reduce(function(e,r,t){return 0!=t&&e.push(_react2.default.createElement("br",null)),e.push(r),e},[])}},Html=function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(_classCallCheck(this,e),_initialiseProps.call(this),this.rules=[].concat(_toConsumableArray(r.rules||[]),[TEXT_RULE]),this.defaultBlockType=r.defaultBlockType||"paragraph","function"==typeof r.parseHtml)this.parseHtml=r.parseHtml;else{if("undefined"==typeof DOMParser)throw new Error("Native DOMParser is not present in this environment; you must supply a parse function via options.parseHtml");this.parseHtml=function(e){return(new DOMParser).parseFromString(e,"text/html").childNodes[0].childNodes[1]}}},_initialiseProps=function(){var e=this;this.deserialize=function(r){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Array.from(e.parseHtml(r).childNodes),i=e.deserializeElements(n),a=e.defaultBlockType,s="string"==typeof a?{type:a}:a;i=i.reduce(function(e,r,t,n){if("block"==r.kind)return e.push(r),e;if(t>0&&"block"!=n[t-1].kind){return e[e.length-1].nodes.push(r),e}var i=_extends({kind:"block",nodes:[r]},s);return e.push(i),e},[]),0===i.length&&(i=[_extends({kind:"block",nodes:[]},s)]);var l={kind:"state",document:{kind:"document",nodes:i}};return t.toRaw?l:_raw2.default.deserialize(l,{terse:!0})},this.deserializeElements=function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=[];return r.filter(e.cruftNewline).forEach(function(r){var n=e.deserializeElement(r);switch((0,_typeOf2.default)(n)){case"array":t=t.concat(n);break;case"object":t.push(n)}}),t},this.deserializeElement=function(r){var t=void 0;r.tagName||(r.tagName="");for(var n=function(r){switch("undefined"!=typeof NodeList&&r instanceof NodeList&&(r=Array.from(r)),(0,_typeOf2.default)(r)){case"array":return e.deserializeElements(r);case"object":return e.deserializeElement(r);case"null":case"undefined":return;default:throw new Error('The `next` argument was called with invalid children: "'+r+'".')}},i=0;i<e.rules.length;i++){var a=e.rules[i];if(a.deserialize){var s=a.deserialize(r,n),l=(0,_typeOf2.default)(s);if("array"!=l&&"object"!=l&&"null"!=l&&"undefined"!=l)throw new Error('A rule returned an invalid deserialized representation: "'+t+'".');if(void 0!==s){if(null===s)return null;t="mark"==s.kind?e.deserializeMark(s):s;break}}}return t||n(r.childNodes)},this.deserializeMark=function(r){var t=r.type,n=r.data,i=function r(i){return"mark"==i.kind?e.deserializeMark(i):("text"==i.kind?(i.ranges||(i.ranges=[{text:i.text}]),i.ranges=i.ranges.map(function(e){return e.marks=e.marks||[],e.marks.push({type:t,data:n}),e})):i.nodes=i.nodes.map(r),i)};return r.nodes.reduce(function(e,r){var t=i(r);return Array.isArray(t)?e.concat(t):(e.push(t),e)},[])},this.serialize=function(r){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.document,i=n.nodes.map(e.serializeNode);return!1===t.render?i:_server2.default.renderToStaticMarkup(_react2.default.createElement("body",null,i)).slice(6,-7)},this.serializeNode=function(r){if("text"==r.kind){return r.getRanges().map(e.serializeRange)}for(var t=r.nodes.map(e.serializeNode),n=0;n<e.rules.length;n++){var i=e.rules[n];if(i.serialize){var a=i.serialize(r,t);if(a)return addKey(a)}}throw new Error('No serializer defined for node of type "'+r.type+'".')},this.serializeRange=function(r){var t=new String({text:r.text}),n=e.serializeString(t);return r.marks.reduce(function(r,t){for(var n=0;n<e.rules.length;n++){var i=e.rules[n];if(i.serialize){var a=i.serialize(t,r);if(a)return addKey(a)}}throw new Error('No serializer defined for mark of type "'+t.type+'".')},n)},this.serializeString=function(r){for(var t=0;t<e.rules.length;t++){var n=e.rules[t];if(n.serialize){var i=n.serialize(r,r.text);if(i)return i}}},this.cruftNewline=function(e){return!("#text"==e.nodeName&&"\n"==e.value)}},key=0;exports.default=Html},{"./raw":260,"type-of":217}],259:[function(require,module,exports){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function deserialize(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=r.defaultBlock,i=void 0===t?{type:"line"}:t,n=r.defaultMarks,o=void 0===n?[]:n,a={kind:"state",document:{kind:"document",nodes:e.split("\n").map(function(e){return _extends({},i,{kind:"block",nodes:[{kind:"text",ranges:[{text:e,marks:o}]}]})})}};return r.toRaw?a:_raw2.default.deserialize(a)}function serialize(e){return serializeNode(e.document)}function serializeNode(e){return"document"==e.kind||"block"==e.kind&&_block2.default.isBlockList(e.nodes)?e.nodes.map(serializeNode).join("\n"):e.text}Object.defineProperty(exports,"__esModule",{value:!0});var _extends=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},_block=require("../models/block"),_block2=_interopRequireDefault(_block),_raw=require("../serializers/raw"),_raw2=_interopRequireDefault(_raw);exports.default={deserialize:deserialize,serialize:serialize}},{"../models/block":237,"../serializers/raw":260}],260:[function(require,module,exports){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var _block=require("../models/block"),_block2=_interopRequireDefault(_block),_character=require("../models/character"),_character2=_interopRequireDefault(_character),_document=require("../models/document"),_document2=_interopRequireDefault(_document),_inline=require("../models/inline"),_inline2=_interopRequireDefault(_inline),_mark=require("../models/mark"),_mark2=_interopRequireDefault(_mark),_node=require("../models/node"),_node2=_interopRequireDefault(_node),_selection=require("../models/selection"),_selection2=_interopRequireDefault(_selection),_state=require("../models/state"),_state2=_interopRequireDefault(_state),_text=require("../models/text"),_text2=_interopRequireDefault(_text),_isEmpty=require("is-empty"),_isEmpty2=_interopRequireDefault(_isEmpty),Raw={deserialize:function(e,t){return Raw.deserializeState(e,t)},deserializeBlock:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.terse&&(e=Raw.untersifyBlock(e));var n=_node2.default.createList(e.nodes.map(function(e){return Raw.deserializeNode(e,t)}));return _block2.default.create({key:e.key,type:e.type,data:e.data,isVoid:e.isVoid,nodes:n})},deserializeDocument:function(e,t){var n=e.nodes.map(function(e){return Raw.deserializeNode(e,t)});return _document2.default.create({key:e.key,data:e.data,nodes:n})},deserializeInline:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.terse&&(e=Raw.untersifyInline(e));var n=e.nodes.map(function(e){return Raw.deserializeNode(e,t)});return _inline2.default.create({key:e.key,type:e.type,data:e.data,isVoid:e.isVoid,nodes:n})},deserializeMark:function(e,t){return _mark2.default.create(e)},deserializeNode:function(e,t){switch(e.kind){case"block":return Raw.deserializeBlock(e,t);case"document":return Raw.deserializeDocument(e,t);case"inline":return Raw.deserializeInline(e,t);case"text":return Raw.deserializeText(e,t);default:throw new Error('Unrecognized node kind "'+e.kind+'".')}},deserializeRange:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.terse&&(e=Raw.untersifyRange(e));var n=_mark2.default.createSet(e.marks.map(function(e){return Raw.deserializeMark(e,t)})),r=e.text.split("");return _character2.default.createList(r.map(function(e){return{text:e,marks:n}}))},deserializeSelection:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];return _selection2.default.create({anchorKey:e.anchorKey,anchorOffset:e.anchorOffset,focusKey:e.focusKey,focusOffset:e.focusOffset,isFocused:e.isFocused})},deserializeState:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.terse&&(e=Raw.untersifyState(e));var n=Raw.deserializeDocument(e.document,t),r=void 0;return null!=e.selection&&(r=Raw.deserializeSelection(e.selection,t)),_state2.default.create({data:e.data,document:n,selection:r},t)},deserializeText:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.terse&&(e=Raw.untersifyText(e));var n=e.ranges.reduce(function(e,n){return e.concat(Raw.deserializeRange(n,t))},_character2.default.createList());return _text2.default.create({key:e.key,characters:n})},serialize:function(e,t){return Raw.serializeState(e,t)},serializeBlock:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={data:e.data.toJSON(),key:e.key,kind:e.kind,isVoid:e.isVoid,type:e.type,nodes:e.nodes.toArray().map(function(e){return Raw.serializeNode(e,t)})};return t.preserveKeys||delete n.key,t.terse?Raw.tersifyBlock(n):n},serializeDocument:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={data:e.data.toJSON(),key:e.key,kind:e.kind,nodes:e.nodes.toArray().map(function(e){return Raw.serializeNode(e,t)})};return t.preserveKeys||delete n.key,t.terse?Raw.tersifyDocument(n):n},serializeInline:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={data:e.data.toJSON(),key:e.key,kind:e.kind,isVoid:e.isVoid,type:e.type,nodes:e.nodes.toArray().map(function(e){return Raw.serializeNode(e,t)})};return t.preserveKeys||delete n.key,t.terse?Raw.tersifyInline(n):n},serializeMark:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={data:e.data.toJSON(),kind:e.kind,type:e.type};return t.terse?Raw.tersifyMark(n):n},serializeNode:function(e,t){switch(e.kind){case"block":return Raw.serializeBlock(e,t);case"document":return Raw.serializeDocument(e,t);case"inline":return Raw.serializeInline(e,t);case"text":return Raw.serializeText(e,t);default:throw new Error('Unrecognized node kind "'+e.kind+'".')}},serializeRange:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={kind:e.kind,text:e.text,marks:e.marks.toArray().map(function(e){return Raw.serializeMark(e,t)})};return t.terse?Raw.tersifyRange(n):n},serializeSelection:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={kind:e.kind,anchorKey:e.anchorKey,anchorOffset:e.anchorOffset,focusKey:e.focusKey,focusOffset:e.focusOffset,isBackward:e.isBackward,isFocused:e.isFocused};return t.terse?Raw.tersifySelection(n):n},serializeState:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={document:Raw.serializeDocument(e.document,t),kind:e.kind};return t.preserveSelection&&(n.selection=Raw.serializeSelection(e.selection,t)),t.preserveStateData&&(n.data=e.data.toJSON()),t.terse?Raw.tersifyState(n):n},serializeText:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={key:e.key,kind:e.kind,ranges:e.getRanges().toArray().map(function(e){return Raw.serializeRange(e,t)})};return t.preserveKeys||delete n.key,t.terse?Raw.tersifyText(n):n},tersifyBlock:function(e){var t={};return t.kind=e.kind,t.type=e.type,e.key&&(t.key=e.key),e.isVoid||(t.nodes=e.nodes),e.isVoid&&(t.isVoid=e.isVoid),(0,_isEmpty2.default)(e.data)||(t.data=e.data),t},tersifyDocument:function(e){var t={};return t.nodes=e.nodes,e.key&&(t.key=e.key),(0,_isEmpty2.default)(e.data)||(t.data=e.data),t},tersifyInline:function(e){var t={};return t.kind=e.kind,t.type=e.type,e.key&&(t.key=e.key),e.isVoid||(t.nodes=e.nodes),e.isVoid&&(t.isVoid=e.isVoid),(0,_isEmpty2.default)(e.data)||(t.data=e.data),t},tersifyMark:function(e){var t={};return t.type=e.type,(0,_isEmpty2.default)(e.data)||(t.data=e.data),t},tersifyRange:function(e){var t={};return t.text=e.text,(0,_isEmpty2.default)(e.marks)||(t.marks=e.marks),t},tersifySelection:function(e){return{anchorKey:e.anchorKey,anchorOffset:e.anchorOffset,focusKey:e.focusKey,focusOffset:e.focusOffset,isFocused:e.isFocused}},tersifyState:function(e){var t=e.data,n=e.document,r=e.selection,i=(0,_isEmpty2.default)(t);if(!r&&i)return n;var a={document:n};return i||(a.data=t),r&&(a.selection=r),a},tersifyText:function(e){var t={};return t.kind=e.kind,e.key&&(t.key=e.key),1==e.ranges.length&&null==e.ranges[0].marks?t.text=e.ranges[0].text:t.ranges=e.ranges,t},untersifyBlock:function(e){return!e.isVoid&&e.nodes&&e.nodes.length?e:{key:e.key,data:e.data,kind:e.kind,type:e.type,isVoid:e.isVoid,nodes:[{kind:"text",text:""}]}},untersifyInline:function(e){return!e.isVoid&&e.nodes&&e.nodes.length?e:{key:e.key,data:e.data,kind:e.kind,type:e.type,isVoid:e.isVoid,nodes:[{kind:"text",text:""}]}},untersifyRange:function(e){return{kind:"range",text:e.text,marks:e.marks||[]}},untersifySelection:function(e){return{kind:"selection",anchorKey:e.anchorKey,anchorOffset:e.anchorOffset,focusKey:e.focusKey,focusOffset:e.focusOffset,isBackward:null,isFocused:!1}},untersifyState:function(e){return e.document?{kind:"state",data:e.data,document:e.document,selection:e.selection}:{kind:"state",document:{data:e.data,key:e.key,kind:"document",nodes:e.nodes}}},untersifyText:function(e){return e.ranges?e:{key:e.key,kind:e.kind,ranges:[{text:e.text,marks:e.marks||[]}]}}};exports.default=Raw},{"../models/block":237,"../models/character":239,"../models/document":241,"../models/inline":243,"../models/mark":244,"../models/node":245,"../models/selection":248,"../models/state":250,"../models/text":251,"is-empty":64}],261:[function(require,module,exports){"use strict";function extendSelection(e,t,n){if("function"==typeof e.extend)return e.extend(t,n);var o=document.createRange(),r=document.createRange(),a=document.createRange();return r.setStart(e.anchorNode,e.anchorOffset),a.setStart(t,n),a.compareBoundaryPoints(window.Range.START_TO_START,r)>=0?(o.setStart(e.anchorNode,e.anchorOffset),o.setEnd(t,n)):(o.setStart(t,n),o.setEnd(e.anchorNode,e.anchorOffset)),e.removeAllRanges(),e.addRange(o),e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=extendSelection},{}],262:[function(require,module,exports){"use strict";function findClosestNode(e,t){if("function"==typeof e.closest)return e.closest(t);var o=(e.document||e.ownerDocument).querySelectorAll(t),n=e,r=void 0;do{for(r=o.length;--r>=0&&o.item(r)!==n;);}while(r<0&&(n=n.parentElement));return n}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=findClosestNode},{}],263:[function(require,module,exports){"use strict";function findDeepestNode(e){return e.firstChild?findDeepestNode(e.firstChild):e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=findDeepestNode},{}],264:[function(require,module,exports){"use strict";function findDOMNode(e){var o=window.document.querySelector('[data-key="'+e.key+'"]');if(!o)throw new Error('Unable to find a DOM node for "'+e.key+'". This is often because of forgetting to add `props.attributes` to a component returned from `renderNode`.');return o}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=findDOMNode},{}],265:[function(require,module,exports){"use strict";function generateKey(){return generate()}function setKeyGenerator(e){generate=e}function resetKeyGenerator(){n=0,generate=function(){return""+n++}}Object.defineProperty(exports,"__esModule",{value:!0});var n=void 0,generate=void 0;resetKeyGenerator(),exports.default=generateKey,exports.setKeyGenerator=setKeyGenerator,exports.resetKeyGenerator=resetKeyGenerator},{}],266:[function(require,module,exports){"use strict";function getHtmlFromNativePaste(e,t){var o=(0,_reactDom.findDOMNode)(e),r=o.cloneNode();r.setAttribute("class",""),r.setAttribute("style","position: fixed; left: -9999px"),o.parentNode.insertBefore(r,o),r.focus(),setTimeout(function(){if(r.childElementCount>0){var e=r.innerHTML;r.parentNode.removeChild(r),t(e)}else t()},0)}Object.defineProperty(exports,"__esModule",{value:!0});var _reactDom=window.ReactDOM;exports.default=getHtmlFromNativePaste},{}],267:[function(require,module,exports){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function getPoint(e,t,f,r){var n=f.document,u=r.getSchema(),o=_offsetKey2.default.findKey(e,t);if(!o)return null;var a=o.key,i=n.getDescendant(a);if(!i)return null;var s=n.getDescendantDecorators(a,u),l=i.getRanges(s);return _offsetKey2.default.findPoint(o,l)}Object.defineProperty(exports,"__esModule",{value:!0});var _offsetKey=require("./offset-key"),_offsetKey2=_interopRequireDefault(_offsetKey);exports.default=getPoint},{"./offset-key":275}],268:[function(require,module,exports){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function getTransferData(e){var t=getType(e,_transferTypes2.default.FRAGMENT),r=getType(e,_transferTypes2.default.NODE),n=getType(e,"text/html"),a=getType(e,"text/rtf"),s=getType(e,"text/plain"),l=void 0;if(!t&&n&&~n.indexOf(' data-slate-fragment="')){var i=FRAGMENT_MATCHER.exec(n),f=_slicedToArray(i,2),u=(f[0],f[1]);u&&(t=u)}if(s){var o=getEmbeddedTypes(s);o[_transferTypes2.default.FRAGMENT]&&(t=o[_transferTypes2.default.FRAGMENT]),o[_transferTypes2.default.NODE]&&(r=o[_transferTypes2.default.NODE]),o["text/plain"]&&(s=o["text/plain"])}t&&(t=_base2.default.deserializeNode(t)),r&&(r=_base2.default.deserializeNode(r));try{e.items&&e.items.length?l=Array.from(e.items).map(function(e){return"file"==e.kind?e.getAsFile():null}).filter(function(e){return e}):e.files&&e.files.length&&(l=Array.from(e.files))}catch(t){e.files&&e.files.length&&(l=Array.from(e.files))}var d={files:l,fragment:t,html:n,node:r,rich:a,text:s};return d.type=getTransferType(d),d}function getEmbeddedTypes(e){var t="SLATE-DATA-EMBED::";if(e.substring(0,t.length)!==t)return{"text/plain":e};try{return JSON.parse(e.substring(t.length))}catch(e){throw new Error("Unable to parse custom embedded drag data")}}function getTransferType(e){return e.fragment?"fragment":e.node?"node":e.rich&&e.html?"html":e.rich&&e.text?"text":e.files&&e.files.length?"files":e.html?"html":e.text?"text":"unknown"}function getType(e,t){return e.types&&e.types.length?-1!==e.types.indexOf(t)?e.getData(t)||null:null:"text/plain"===t?e.getData("Text")||null:null}Object.defineProperty(exports,"__esModule",{value:!0});var _slicedToArray=function(){function e(e,t){var r=[],n=!0,a=!1,s=void 0;try{for(var l,i=e[Symbol.iterator]();!(n=(l=i.next()).done)&&(r.push(l.value),!t||r.length!==t);n=!0);}catch(e){a=!0,s=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw s}}return r}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_base=require("../serializers/base-64"),_base2=_interopRequireDefault(_base),_transferTypes=require("../constants/transfer-types"),_transferTypes2=_interopRequireDefault(_transferTypes),FRAGMENT_MATCHER=/ data-slate-fragment="([^\s"]+)"/;exports.default=getTransferData},{"../constants/transfer-types":235,"../serializers/base-64":257}],269:[function(require,module,exports){"use strict";function isIndexInRange(e,t,n){var s=n.startKey,r=n.startOffset,a=n.endKey,d=n.endOffset;return t.key==s&&t.key==a?r<=e&&e<d:t.key==s?r<=e:t.key!=a||e<d}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=isIndexInRange},{}],270:[function(require,module,exports){"use strict";function isReactComponent(e){return e&&e.prototype&&e.prototype.isReactComponent}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=isReactComponent},{}],271:[function(require,module,exports){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function log(e,r){if(_isDev2.default&&"undefined"!=typeof console&&"function"==typeof console[e]){for(var n,o=arguments.length,t=Array(o>2?o-2:0),a=2;a<o;a++)t[a-2]=arguments[a];(n=console)[e].apply(n,[r].concat(t))}}function warn(e){for(var r=arguments.length,n=Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];log.apply(void 0,["warn","Warning: "+e].concat(n))}function deprecate(e,r){for(var n=arguments.length,o=Array(n>2?n-2:0),t=2;t<n;t++)o[t-2]=arguments[t];log.apply(void 0,["warn","Deprecation (v"+e+"): "+r].concat(o))}Object.defineProperty(exports,"__esModule",{value:!0});var _isDev=require("../constants/is-dev"),_isDev2=_interopRequireDefault(_isDev);exports.default={deprecate:deprecate,warn:warn}},{"../constants/is-dev":233}],272:[function(require,module,exports){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function memoize(e,t){for(var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},_=r.takesArguments,a=void 0===_||_,i=0;i<t.length;i++)!function(r){var _=t[r],i=e[_];if(!i)throw new Error('Object does not have a property named "'+_+'".');e[_]=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];if(_isDev2.default){if(!ENABLED)return i.apply(this,t);CACHE_KEY!==this.__cache_key&&(this.__cache_key=CACHE_KEY,this.__cache=new _es6Map2.default)}this.__cache||(this.__cache=new _es6Map2.default);var n=void 0,s=void 0;if(a?(s=[_].concat(t),n=getIn(this.__cache,s)):n=this.__cache.get(_),n!==UNSET)return n===UNDEFINED?void 0:n;var o=i.apply(this,t),c=void 0===o?UNDEFINED:o;return a?this.__cache=setIn(this.__cache,s,c):this.__cache.set(_,c),o}}(i)}function getIn(e,t){for(var r=0;r<t.length;r++){var _=t[r];if((e=e.get(_))===UNSET)return UNSET}return e.get(LEAF)}function setIn(e,t,r){for(var _=e,a=void 0,i=0;i<t.length;i++){var n=t[i];a=_.get(n),a===UNSET&&(a=new _es6Map2.default,_.set(n,a)),_=a}return a.set(LEAF,r),e}function __clear(){++CACHE_KEY>=Number.MAX_SAFE_INTEGER&&(CACHE_KEY=0)}function __enable(e){ENABLED=e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.__enable=exports.__clear=exports.default=void 0;var _es6Map=require("es6-map"),_es6Map2=_interopRequireDefault(_es6Map),_isDev=require("../constants/is-dev"),_isDev2=_interopRequireDefault(_isDev),ENABLED=!0,CACHE_KEY=0,LEAF={},UNDEFINED={},UNSET=void 0;exports.default=memoize,exports.__clear=__clear,exports.__enable=__enable},{"../constants/is-dev":233,"es6-map":45}],273:[function(require,module,exports){"use strict";function noop(){}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=noop},{}],274:[function(require,module,exports){"use strict";function normalizeNodeAndOffset(e,d){if(1==e.nodeType&&e.childNodes.length){var t=d==e.childNodes.length,o=t?"backward":"forward",n=t?d-1:d;for(e=getEditableChild(e,n,o);1==e.nodeType&&e.childNodes.length;){e=getEditableChild(e,t?e.childNodes.length-1:0,o)}d=t?e.textContent.length:0}return{node:e,offset:d}}function getEditableChild(e,d,t){for(var o=e.childNodes,n=o[d],l=d,r=!1,i=!1;(8==n.nodeType||1==n.nodeType&&0==n.childNodes.length||1==n.nodeType&&"false"==n.getAttribute("contenteditable"))&&(!r||!i);)l>=o.length?(r=!0,l=d-1,t="backward"):l<0?(i=!0,l=d+1,t="forward"):(n=o[l],"forward"==t&&l++,"backward"==t&&l--);return n||null}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=normalizeNodeAndOffset},{}],275:[function(require,module,exports){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function findBounds(e,t){var n=t.get(e),r=t.slice(0,e).reduce(function(e,t){return e+=t.text.length},0);return{start:r,end:r+n.text.length}}function findKey(e,t){var n=(0,_normalizeNodeAndOffset2.default)(e,t),r=n.node,i=n.offset,o=r.parentNode,f=(0,_findClosestNode2.default)(o,SELECTOR);if(!f){var d=(0,_findClosestNode2.default)(o,VOID_SELECTOR);if(!d)return null;f=d.querySelector(SELECTOR),i=f.textContent.length}var a=f.getAttribute(ATTRIBUTE);if(!a)return null;var u=parse(a);return{key:u.key,index:u.index,offset:i}}function findPoint(e,t){var n=e.key,r=e.index,i=e.offset,o=findBounds(r,t),f=o.start,d=o.end;return i=f+i,i=Math.max(i,f),i=Math.min(i,d),{key:n,index:r,start:f,end:d,offset:i}}function parse(e){var t=PARSER.exec(e);if(!t)throw new Error('Invalid offset key string "'+e+'".');var n=_slicedToArray(t,3),r=(n[0],n[1]),i=n[2];return{key:r,index:parseInt(i,10)}}function stringify(e){return e.key+"-"+e.index}Object.defineProperty(exports,"__esModule",{value:!0});var _slicedToArray=function(){function e(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var f,d=e[Symbol.iterator]();!(r=(f=d.next()).done)&&(n.push(f.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&d.return&&d.return()}finally{if(i)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_normalizeNodeAndOffset=require("./normalize-node-and-offset"),_normalizeNodeAndOffset2=_interopRequireDefault(_normalizeNodeAndOffset),_findClosestNode=require("./find-closest-node"),_findClosestNode2=_interopRequireDefault(_findClosestNode),PARSER=/^(\w+)(?:-(\d+))?$/,ATTRIBUTE="data-offset-key",SELECTOR="["+ATTRIBUTE+"]",VOID_SELECTOR="[data-slate-void]";exports.default={findBounds:findBounds,findKey:findKey,findPoint:findPoint,parse:parse,stringify:stringify}},{"./find-closest-node":262,"./normalize-node-and-offset":274}],276:[function(require,module,exports){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function create(e,t){function r(r,a,n,i,u){var c=a[n];return null!=c||r?null==c&&r?new Error("The "+u+" `"+n+"` is marked as required in `"+i+"`, but it was not supplied."):t(c)?null:new Error("Invalid "+u+" `"+n+"` supplied to `"+i+"`, expected a Slate `"+e+"` but received: "+c):null}function a(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return r.apply(void 0,[!1].concat(t))}return a.isRequired=function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return r.apply(void 0,[!0].concat(t))},a}Object.defineProperty(exports,"__esModule",{value:!0});var _block=require("../models/block"),_block2=_interopRequireDefault(_block),_change=require("../models/change"),_change2=_interopRequireDefault(_change),_character=require("../models/character"),_character2=_interopRequireDefault(_character),_data=require("../models/data"),_data2=_interopRequireDefault(_data),_document=require("../models/document"),_document2=_interopRequireDefault(_document),_history=require("../models/history"),_history2=_interopRequireDefault(_history),_inline=require("../models/inline"),_inline2=_interopRequireDefault(_inline),_mark=require("../models/mark"),_mark2=_interopRequireDefault(_mark),_node=require("../models/node"),_node2=_interopRequireDefault(_node),_range=require("../models/range"),_range2=_interopRequireDefault(_range),_schema=require("../models/schema"),_schema2=_interopRequireDefault(_schema),_selection=require("../models/selection"),_selection2=_interopRequireDefault(_selection),_stack=require("../models/stack"),_stack2=_interopRequireDefault(_stack),_state=require("../models/state"),_state2=_interopRequireDefault(_state),_text=require("../models/text"),_text2=_interopRequireDefault(_text),Types={block:create("Block",function(e){return _block2.default.isBlock(e)}),blocks:create("List<Block>",function(e){return _block2.default.isBlockList(e)}),change:create("Change",function(e){return _change2.default.isChange(e)}),character:create("Character",function(e){return _character2.default.isCharacter(e)}),characters:create("List<Character>",function(e){return _character2.default.isCharacterList(e)}),data:create("Data",function(e){return _data2.default.isData(e)}),document:create("Document",function(e){return _document2.default.isDocument(e)}),history:create("History",function(e){return _history2.default.isHistory(e)}),inline:create("Inline",function(e){return _inline2.default.isInline(e)}),mark:create("Mark",function(e){return _mark2.default.isMark(e)}),marks:create("Set<Mark>",function(e){return _mark2.default.isMarkSet(e)}),node:create("Node",function(e){return _node2.default.isNode(e)}),nodes:create("List<Node>",function(e){return _node2.default.isNodeList(e)}),range:create("Range",function(e){return _range2.default.isRange(e)}),ranges:create("List<Range>",function(e){return _range2.default.isRangeList(e)}),schema:create("Schema",function(e){return _schema2.default.isSchema(e)}),selection:create("Selection",function(e){return _selection2.default.isSelection(e)}),stack:create("Stack",function(e){return _stack2.default.isStack(e)}),state:create("State",function(e){return _state2.default.isState(e)}),text:create("Text",function(e){return _text2.default.isText(e)}),texts:create("List<Text>",function(e){return _text2.default.isTextList(e)})};exports.default=Types},{"../models/block":237,"../models/change":238,"../models/character":239,"../models/data":240,"../models/document":241,"../models/history":242,"../models/inline":243,"../models/mark":244,"../models/node":245,"../models/range":246,"../models/schema":247,"../models/selection":248,"../models/stack":249,"../models/state":250,"../models/text":251}],277:[function(require,module,exports){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function scrollToSelection(e){if(e.anchorNode){var t=(0,_getWindow2.default)(e.anchorNode),o=(0,_selectionIsBackward2.default)(e),i=e.getRangeAt(0),r=i.getBoundingClientRect(),n=t.innerWidth,a=t.innerHeight,l=t.pageYOffset,c=t.pageXOffset,d=(o?r.top:r.bottom)+l,s=(o?r.left:r.right)+c,u=s<c||n+c<s?s-n/2:c,f=d<l||a+l<d?d-a/2:l;t.scrollTo(u,f)}}Object.defineProperty(exports,"__esModule",{value:!0});var _getWindow=require("get-window"),_getWindow2=_interopRequireDefault(_getWindow),_selectionIsBackward=require("selection-is-backward"),_selectionIsBackward2=_interopRequireDefault(_selectionIsBackward);exports.default=scrollToSelection},{"get-window":62,"selection-is-backward":216}],278:[function(require,module,exports){"use strict";function setTransferData(t,e,a){try{t.setData(e,a)}catch(l){var r="SLATE-DATA-EMBED::",s=t.getData("text/plain"),n={};if(s.substring(0,r.length)===r)try{n=JSON.parse(s.substring(r.length))}catch(t){throw new Error("Failed to parse Slate data from `DataTransfer` object.")}else n["text/plain"]=s;n[e]=a;var i=""+r+JSON.stringify(n);t.setData("text/plain",i)}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=setTransferData},{}],279:[function(require,module,exports){"use strict"
;function isSurrogate(u){return SURROGATE_START<=u&&u<=SURROGATE_END}function isWord(u,F){if(SPACE.test(u))return!1;if(CHAMELEON.test(u)){var e=F.charAt(0),r=getCharLength(e);e=F.slice(0,r);if(isWord(e,F.slice(r)))return!0}return!PUNCTUATION.test(u)}function getCharLength(u){return isSurrogate(u.charCodeAt(0))?2:1}function getCharOffset(u){return getCharLength(u.charAt(0))}function getCharOffsetBackward(u,F){return u=u.slice(0,F),u=(0,_esrever.reverse)(u),getCharOffset(u)}function getCharOffsetForward(u,F){return u=u.slice(F),getCharOffset(u)}function getWordOffset(u){for(var F=0,e=0,r=!1,t=void 0;t=u.charAt(e);){var A=getCharLength(t);t=u.slice(e,e+A);if(isWord(t,u.slice(e+A)))r=!0,F+=A;else{if(r)break;F+=A}e+=A}return F}function getWordOffsetBackward(u,F){return u=u.slice(0,F),u=(0,_esrever.reverse)(u),getWordOffset(u)}function getWordOffsetForward(u,F){return u=u.slice(F),getWordOffset(u)}Object.defineProperty(exports,"__esModule",{value:!0});var _esrever=require("esrever"),SURROGATE_START=55296,SURROGATE_END=57343,SPACE=/\s/,CHAMELEON=/['\u2018\u2019]/,PUNCTUATION=/[\u0021-\u0023\u0025-\u002A\u002C-\u002F\u003A\u003B\u003F\u0040\u005B-\u005D\u005F\u007B\u007D\u00A1\u00A7\u00AB\u00B6\u00B7\u00BB\u00BF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u0AF0\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E3B\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]/;exports.default={getCharOffsetForward:getCharOffsetForward,getCharOffsetBackward:getCharOffsetBackward,getWordOffsetBackward:getWordOffsetBackward,getWordOffsetForward:getWordOffsetForward}},{esrever:56}]},{},[236])(236)});
