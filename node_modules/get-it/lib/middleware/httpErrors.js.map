{"version":3,"sources":["../../src/middleware/httpErrors.js"],"names":["createErrorClass","require","HttpError","res","ctx","message","method","url","statusCode","statusMessage","trim","response","request","options","module","exports","onResponse","isHttpError"],"mappings":";;AAAA,IAAMA,mBAAmBC,QAAQ,oBAAR,CAAzB;;AAEA,IAAMC,YAAYF,iBAAiB,WAAjB,EAA8B,UAAUG,GAAV,EAAeC,GAAf,EAAoB;AAClE,OAAKC,OAAL,GAAe,CAAGF,IAAIG,MAAP,oBAA4BH,IAAII,GAAhC,0BAAwDJ,IAAIK,UAA5D,SAA0EL,IAAIM,aAA9E,EAA8FC,IAA9F,EAAf;AACA,OAAKC,QAAL,GAAgBR,GAAhB;AACA,OAAKS,OAAL,GAAeR,IAAIS,OAAnB;AACD,CAJiB,CAAlB;;AAMAC,OAAOC,OAAP,GAAiB;AAAA,SAAO;AACtBC,gBAAY,oBAACb,GAAD,EAAMC,GAAN,EAAc;AACxB,UAAMa,cAAcd,IAAIK,UAAJ,IAAkB,GAAtC;AACA,UAAI,CAACS,WAAL,EAAkB;AAChB,eAAOd,GAAP;AACD;;AAED,YAAM,IAAID,SAAJ,CAAcC,GAAd,EAAmBC,GAAnB,CAAN;AACD;AARqB,GAAP;AAAA,CAAjB","file":"httpErrors.js","sourcesContent":["const createErrorClass = require('create-error-class')\n\nconst HttpError = createErrorClass('HttpError', function (res, ctx) {\n  this.message = `${res.method}-request to ${res.url} resulted in HTTP ${res.statusCode} ${res.statusMessage}`.trim()\n  this.response = res\n  this.request = ctx.options\n})\n\nmodule.exports = () => ({\n  onResponse: (res, ctx) => {\n    const isHttpError = res.statusCode >= 400\n    if (!isHttpError) {\n      return res\n    }\n\n    throw new HttpError(res, ctx)\n  }\n})\n"]}