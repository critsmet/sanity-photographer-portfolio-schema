!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).SanityImageUrlBuilder=t()}}(function(){return function i(a,u,c){function f(e,t){if(!u[e]){if(!a[e]){var n="function"==typeof require&&require;if(!t&&n)return n(e,!0);if(l)return l(e,!0);var r=new Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}var o=u[e]={exports:{}};a[e][0].call(o.exports,function(t){return f(a[e][1][t]||t)},o,o.exports,i,a,u,c)}return u[e].exports}for(var l="function"==typeof require&&require,t=0;t<c.length;t++)f(c[t]);return f}({1:[function(t,e,n){e.exports=t("./lib/builder").default},{"./lib/builder":2}],2:[function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t){return t&&"object"===r(t.clientConfig)?new f(null,{baseUrl:t.clientConfig.apiHost.replace(/^https:\/\/api\./,"https://cdn."),projectId:t.clientConfig.projectId,dataset:t.clientConfig.dataset}):new f(null,t)};var i,a=(i=t("./urlForImage"))&&i.__esModule?i:{default:i},u=["clip","crop","fill","fillmax","max","scale","min"],c=["top","bottom","left","right","center","focalpoint","entropy"],f=function(){function n(t,e){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,n),this.options=t?function(o){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},e=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(e=e.concat(Object.getOwnPropertySymbols(i).filter(function(t){return Object.getOwnPropertyDescriptor(i,t).enumerable}))),e.forEach(function(t){var e,n,r;e=o,r=i[n=t],n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r})}return o}({},t.options||{},e||{}):e||{}}return t=n,(e=[{key:"withOptions",value:function(t){return new n(this,t)}},{key:"image",value:function(t){return this.withOptions({source:t})}},{key:"dataset",value:function(t){return this.withOptions({dataset:t})}},{key:"projectId",value:function(t){return this.withOptions({projectId:t})}},{key:"bg",value:function(t){return this.withOptions({bg:t})}},{key:"width",value:function(t){return this.withOptions({width:t})}},{key:"height",value:function(t){return this.withOptions({height:t})}},{key:"focalPoint",value:function(t,e){return this.withOptions({focalPoint:{x:t,y:e}})}},{key:"maxWidth",value:function(t){return this.withOptions({maxWidth:t})}},{key:"minWidth",value:function(t){return this.withOptions({minWidth:t})}},{key:"maxHeight",value:function(t){return this.withOptions({maxHeight:t})}},{key:"minHeight",value:function(t){return this.withOptions({minHeight:t})}},{key:"size",value:function(t,e){return this.withOptions({width:t,height:e})}},{key:"blur",value:function(t){return this.withOptions({blur:t})}},{key:"sharpen",value:function(t){return this.withOptions({sharpen:t})}},{key:"rect",value:function(t,e,n,r){return this.withOptions({rect:{left:t,top:e,width:n,height:r}})}},{key:"format",value:function(t){return this.withOptions({format:t})}},{key:"invert",value:function(t){return this.withOptions({invert:t})}},{key:"orientation",value:function(t){return this.withOptions({orientation:t})}},{key:"quality",value:function(t){return this.withOptions({quality:t})}},{key:"forceDownload",value:function(t){return this.withOptions({download:t})}},{key:"flipHorizontal",value:function(){return this.withOptions({flipHorizontal:!0})}},{key:"flipVertical",value:function(){return this.withOptions({flipVertical:!0})}},{key:"ignoreImageParams",value:function(){return this.withOptions({ignoreImageParams:!0})}},{key:"fit",value:function(t){if(-1===u.indexOf(t))throw new Error('Invalid fit mode "'.concat(t,'"'));return this.withOptions({fit:t})}},{key:"crop",value:function(t){if(-1===c.indexOf(t))throw new Error('Invalid crop mode "'.concat(t,'"'));return this.withOptions({crop:t})}},{key:"url",value:function(){return(0,a.default)(this.options)}},{key:"toString",value:function(){return this.url()}}])&&o(t.prototype,e),r&&o(t,r),n;var t,e,r}()},{"./urlForImage":5}],3:[function(t,e,n){"use strict";function c(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],r=!0,o=!1,i=void 0;try{for(var a,u=t[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{r||null==u.return||u.return()}finally{if(o)throw i}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t){var e=c(t.split("-"),4),n=e[1],r=e[2],o=e[3];if(!n||!r||!o)throw new Error("Malformed asset _ref '".concat(t,"'. Expected an id like \"").concat(f,'".'));var i=c(r.split("x"),2),a=+i[0],u=+i[1];if(!isFinite(a)||!isFinite(u))throw new Error("Malformed asset _ref '".concat(t,"'. Expected an id like \"").concat(f,'".'));return{id:n,width:a,height:u,format:o}};var f="image-Tb9Ew8CXIwaY6R1kjMvI0uRR-2000x3000-jpg"},{}],4:[function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t){return"image-".concat(t.split("/").slice(-1)[0]).replace(/\.([a-z]+)$/,"-$1")}Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t){if(!t)return null;var e,n;if("string"==typeof t&&/^https?:\/\//.test("".concat(t)))e={asset:{_ref:o(t)}};else if("string"==typeof t)e={asset:{_ref:t}};else if("string"==typeof t._ref)e={asset:t};else if(t._id)e={asset:{_ref:t._id}};else if(t.asset&&t.asset.url&&!t.asset._ref)e={asset:{_ref:o(t.asset.url)}};else{if("object"!==r(t.asset))return null;e=t}return t.crop&&(e.crop=t.crop),t.hotspot&&(e.hotspot=t.hotspot),(n=e).crop&&n.hotspot?n:function(o){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},e=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(e=e.concat(Object.getOwnPropertySymbols(i).filter(function(t){return Object.getOwnPropertyDescriptor(i,t).enumerable}))),e.forEach(function(t){var e,n,r;e=o,r=i[n=t],n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r})}return o}({crop:{left:0,top:0,bottom:0,right:0},hotspot:{x:.5,y:.5,height:1,width:1}},n)}},{}],5:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function w(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],r=!0,o=!1,i=void 0;try{for(var a,u=t[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{r||null==u.return||u.return()}finally{if(o)throw i}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function g(o){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},e=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(e=e.concat(Object.getOwnPropertySymbols(i).filter(function(t){return Object.getOwnPropertyDescriptor(i,t).enumerable}))),e.forEach(function(t){var e,n,r;e=o,r=i[n=t],n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r})}return o}Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t){var e=g({},t||{}),n=e.source;delete e.source;var r=(0,b.default)(n);if(!r)return null;var o=(0,m.default)(r.asset._ref),i={left:Math.round(r.crop.left*o.width),top:Math.round(r.crop.top*o.height)};i.width=Math.round(o.width-r.crop.right*o.width-i.left),i.height=Math.round(o.height-r.crop.bottom*o.height-i.top);var a=r.hotspot.height*o.height/2,u=r.hotspot.width*o.width/2,c=r.hotspot.x*o.width,f=r.hotspot.y*o.height,l={left:c-u,top:f-a,right:c+u,bottom:f+u};return e.asset=o,e.rect||e.focalPoint||e.ignoreImageParams||e.crop||(e=g({},e,function(t,e){var n={width:e.width,height:e.height};if(!e.width||!e.height)return n.rect=t.crop,n;var r=t.crop,o=t.hotspot,i=e.width/e.height;if(r.width/r.height>i){var a=r.height,u=a*i,c=r.top,f=(o.right-o.left)/2+o.left,l=f-u/2;return l<r.left?l=r.left:l+u>r.left+r.width&&(l=r.left+r.width-u),n.rect={left:Math.round(l),top:Math.round(c),width:Math.round(u),height:Math.round(a)},n}var h=r.width,s=h/i,p=r.left,d=(o.bottom-o.top)/2+o.top-s/2;return d<r.top?d=r.top:d+s>r.top+r.height&&(d=r.top+r.height-s),n.rect={left:Math.max(0,Math.floor(p)),top:Math.max(0,Math.floor(d)),width:Math.round(h),height:Math.round(s)},n}({crop:i,hotspot:l},e))),h=e,s=h.baseUrl||"https://cdn.sanity.io",p="".concat(h.asset.id,"-").concat(h.asset.width,"x").concat(h.asset.height,".").concat(h.asset.format),d="".concat(s,"/images/").concat(h.projectId,"/").concat(h.dataset,"/").concat(p),y=[],h.rect&&(0!=h.rect.left||0!=h.rect.top||h.rect.height!=h.asset.height||h.rect.width!=h.asset.width)&&y.push("rect=".concat(h.rect.left,",").concat(h.rect.top,",").concat(h.rect.width,",").concat(h.rect.height)),h.bg&&y.push("bg=".concat(h.bg)),h.focalPoint&&(y.push("fp-x=".concat(h.focalPoint.x)),y.push("fp-x=".concat(h.focalPoint.y))),(h.flipHorizontal||h.flipVertical)&&y.push("flip=".concat(h.flipHorizontal?"h":"").concat(h.flipVertical?"v":"")),v.forEach(function(t){var e=w(t,2),n=e[0],r=e[1];void 0!==h[n]?y.push("".concat(r,"=").concat(encodeURIComponent(h[n]))):void 0!==h[r]&&y.push("".concat(r,"=").concat(encodeURIComponent(h[r])))}),0===y.length?d:"".concat(d,"?").concat(y.join("&"));var h,s,p,d,y},Object.defineProperty(n,"parseSource",{enumerable:!0,get:function(){return b.default}});var b=r(t("./parseSource")),m=r(t("./parseAssetId")),v=[["width","w"],["height","h"],["format","fm"],["download","dl"],["blur","blur"],["sharpen","sharp"],["invert","invert"],["orientation","or"],["minHeight","min-h"],["maxHeight","max-h"],["minWidth","min-w"],["maxWidth","max-w"],["quality","q"],["fit","fit"],["crop","crop"]]},{"./parseAssetId":3,"./parseSource":4}]},{},[1])(1)});
